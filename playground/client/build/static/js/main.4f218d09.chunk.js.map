{"version":3,"sources":["../../src/types/vc/atomic/v0.ts","../../src/types/attestation.ts","../../src/merkletreejs.ts","../../src/types/misc.ts","../../node_modules/babel-plugin-transform-async-to-promises/helpers.js","../../src/RFC3339DateTime.ts","../../src/utils.ts","../../src/validation.ts","../../src/ethUtils.ts","components/LocalClientProvider/utils.ts","../../../packages/share-kit-react/dist/index.js","../../../packages/claim-kit-react/dist/index.js","../../src/ClaimElement.tsx","../../src/elements/append.ts","../../src/elements/buttons/renderBloomLogo.ts","../../src/elements/buttons/renderSmallClaimButton.ts","../../src/elements/buttons/renderMediumClaimButton.ts","../../src/elements/buttons/renderLargeClaimButton.ts","../../src/elements/renderClaimButton.ts","../../src/elements/renderClaimQRCode.ts","../../src/renderClaimElement.ts","components/LocalClientProvider/index.tsx","../../src/RequestElement.tsx","../../src/types.ts","../../src/elements/buttons/renderSmallRequestButton.ts","../../src/elements/buttons/renderMediumRequestButton.ts","../../src/elements/buttons/renderLargeRequestButton.ts","../../src/elements/renderRequestButton.ts","../../src/elements/renderRequestQRCode.ts","../../src/renderRequestElement.ts","components/Shell/logo.svg","utils/socket.ts","sitemap.ts","components/Shell/index.tsx","utils/hooks.ts","components/BouncingDots/index.tsx","components/Card/index.tsx","components/Message/index.tsx","api/http.ts","api/cred.ts","api/share.ts","api/index.ts","components/Button/index.tsx","components/Delete/index.tsx","components/JsonEditor/index.tsx","pages/Claim/index.tsx","query/cred.ts","pages/Home/index.tsx","pages/Issue/index.tsx","pages/Request/index.tsx","pages/Share/index.tsx","query/share.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["MerkleTree","this","bufferify","createHashes","nodes","layerIndex","layers","i","left","right","data","Buffer","hash","hashAlgo","getLeaves","getLayers","getRoot","length","getProof","proof","index","leaves","layer","isRightNode","pairIndex","position","verify","Array","node","isLeftNode","buffers","f","v","CryptoJS","x","DataVersions","AttestationTypeID","AttestationTypes","phone","id","scoreWeight","nameFriendly","email","facebook","google","linkedin","twitter","payroll","ssn","criminal","offense","driving","employment","education","drug","bank","utility","income","assets","gender","group","meta","office","credential","medical","biometric","supplemental","vouch","audit","address","correction","account","AttestationTypeNames","Object","AttestationStatus","ChainId","Symbol","iterator","asyncIterator","leapYear","year","validateDateTime","dateTimeString","RFC_3339_REGEX","time","Date","dateString","timeString","datestring","Number","month","day","validateDate","TIME_REGEX","validateTime","isNotEmptyString","value","orderedStringify","obj","orderedObj","o","JSON","genValidateFn","_required","required","_fieldName","fieldName","Error","validator","validations","validators","outcome","fn","error","kind","message","hashMessage","ethUtil","keccak256","generateNonce","randomBytes","getMerkleTreeFromLeaves","leavesSorted","hexStr","getClaimTree","claim","dataHash","typeHash","issuanceHash","auxHash","hashClaimTree","signHash","sig","ethSigUtil","recoverHashSigner","sigParams","pubKey","sender","getSignedClaimNode","issuedClaimNode","claimNode","type","aux","issuance","localRevocationToken","localRevocationLink","globalRevocationToken","issuanceDate","expirationDate","claimHash","attesterSig","attester","EthWallet","getDataTree","attestation","linkHash","hashAttestationNode","getSignedDataNode","dataNode","attestationNode","link","local","global","attestationHash","signedAttestation","getBloomMerkleTree","claimHashes","getChecksum","dataHashes","signChecksum","getPadding","dataCount","paddingCount","getAttestationAgreement","types","EIP712Domain","name","AttestationRequest","primaryType","domain","version","chainId","verifyingContract","contractAddress","nonce","requestNonce","validateSignedAgreement","subjectSig","recoveredEthAddress","subject","isValidSignatureString","signatureString","signature","r","s","isValidEthHexString","hexString","isValidHash","isArrayOfPaddingNodes","isValidTypeString","isValidRFC3339DateTime","validateAttesterClaimSig","params","recoveredSigner","validateAttesterRootSig","validateBatchAttesterSig","batchAttesterSig","rootHash","layer2Hash","validateSubjectSig","validateChecksumSig","checksumSig","checksum","a","validateAttestationDataNode","validateAttestationTypeNode","validateLinkNode","validateAttestationIssuanceNode","isValidAttestationDataNode","isValidAttestationTypeNode","isValidAttestationIssuanceNode","isValidLinkNode","validateLegacyAttestationNode","isValidLegacyAttestationNode","validateIssueClaimNode","isValidIssuedClaimNode","validateClaimNode","isValidArrayOfClaimNodes","validateDataNodeLegacy","isValidArrayOfLegacyDataNodes","validateBloomLegacyMerkleTreeComponents","signedRootHash","rootHashNonce","dataNodes","paddingNodes","validateBloomMerkleTreeComponents","claimNodes","validateBloomBatchMerkleTreeComponents","EthereumDIDResolver","isValidDID","didDocument","ethAddress","did","publicKey","controller","ethereumAddress","authentication","e","globalRevocationLink","opts","signedClaimNodes","attesterClaimSigHashes","signedChecksum","signedChecksumHash","signedDataNodes","signedDataHashes","components","targetNode","root","batchLayer2Hash","require","EcdsaSecp256k1KeyClass2019","EcdsaSecp256k1Signature2019","defaultDocumentLoader","keyto","jsigs","url","AuthenticationProofPurpose","purposes","buildVPV1","wallet","atomicVCs","token","unsignedVP","verifiableCredential","holder","getAddressString","EthUtils","resolve","vp","sign","suite","key","privateKeyJwk","from","getPrivateKeyString","replace","toJwk","documentLoader","purpose","challenge","expansionMap","appendQuery","uri","queryToAppend","parts","parse","parsedQuery","extend","query","queryString","keys","map","encodeURIComponent","join","search","format","module","exports","ClaimElement","props","container","claimElementResult","componentDidMount","renderClaimElement","claimData","qrOptions","shouldRenderButton","buttonOptions","componentDidUpdate","prevProps","update","componentWillUnmount","remove","render","React","forwardProps","ref","_this2","element","Component","renderBloomLogo","svg","document","path","renderSmallClaimButton","anchor","style","borderRadius","styleText","stripIndents","invert","renderStyle","texts","d","width","height","renderTextAndLogo","textAndLogo","text","renderText","renderMediumClaimButton","indexOf","renderLargeClaimButton","window","lock","renderLockIcon","config","renderClaimButton","possible","rand","Math","generateId","updateConfig","copyDataToClipboard","selection","selected","textarea","renderClaimQRCode","canvas","drawQRCode","options","parsedResult","Bowser","isSupportedPlatform","isSupportedOS","renderButton","usePrivateKeyState","createPersistedState","useSDVCsState","LocalClientContext","createContext","vcs","generate","regen","deleteVC","shareVCs","claimVC","LocalClientProvider","privateKey","setPrivateKey","setVCs","fromPrivateKey","Provider","newVCs","splice","to","missing","foundVCs","forEach","foundVC","find","vc","includes","push","wretch","post","json","headers","credentials","children","useLocalClient","useContext","RequestElement","requestElementResult","renderRequestElement","requestData","Action","renderSmallRequestButton","connect","bloom","renderMediumRequestButton","renderLargeRequestButton","renderRequestButton","renderRequestQRCode","_extends","assign","target","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","socket","createElement","fill","transform","_ref","svgRef","title","viewBox","undefined","ForwardRef","forwardRef","host","isLocal","location","hostname","port","socketHandlers","resetSocketConnection","WebSocket","onmessage","decoded","callbacks","callback","console","log","onclose","setInterval","readyState","close","socketOn","socketOff","sitemap","useDocumentTitleSuffix","titleSuffix","useEffect","prevTitle","Shell","useState","isOpen","setIsOpen","className","clsx","onClick","activeClassName","BouncingDots","xmlns","cx","cy","Card","CardHeader","CardHeaderTitle","As","as","CardContent","CardFooter","CardFooterItem","MessageSkin","default","dark","primary","info","success","warning","danger","Message","_props","skin","MessageHeader","MessageBody","api","generic","method","endpoint","body","AbortController","wretcher","signal","resp","promise","abort","get","create","http","getConfig","getClaimedVC","responseVersion","getSharedData","cred","share","ButtonSkin","white","light","black","Button","size","isLight","isFullwidth","isOutlined","isInverted","isRounded","isHovered","isFocused","isActive","isLoading","isStatic","disabled","isDisabled","DeleteSize","small","medium","large","Delete","JsonEditor","ajv","useMemo","Ajv","allErrors","verbose","ace","onChange","mode","schema","Claim","variables","isMobile","bowser","navigator","userAgent","platform","useParams","useQuery","claimedVC","ready","setClaimedVC","current","URLSearchParams","socketCallback","useGetClaimedTypes","errorMessage","setErrorMessage","isUuid","process","REACT_APP_SERVER_URL","protocol","cardContent","localClientButton","claimVersion","callbackUrl","origin","response","Fragment","data-content","aria-label","isNarrow","Home","AtomicVCBuilder","useId","htmlFor","onTypeChange","trim","placeholder","onDataChange","S","object","prop","string","valueOf","Issue","newCredId","setNewCredId","setType","setData","codeBlock","stringify","getDisplayValueForType","TypeConfig","Request","Set","selectedTypes","setSelectedTypes","customTypes","setCustomTypes","newCustomType","setNewCustomType","setResponseVersion","newShareId","setNewShareId","handleResponseVersionChange","allRequestedTypes","onSubmit","preventDefault","newCustomTypes","add","customType","delete","checked","has","newSelectedTypes","stripIndent","Share","sharedData","setSharedData","useGetSharedTypes","action","org_name","org_logo_url","org_usage_policy_url","org_privacy_policy_url","App","exact","Boolean","match","ReactDOM","refetchAllOnWindowFocus","retry","getElementById","serviceWorker","then","registration","unregister"],"mappings":"0SAoBA,ECbA,E,yFCmBaA,EAAb,WAYE,gBACEC,KAAA,SAAgBC,EAAhB,GACAD,KAAA,SACAA,KAAA,OAAc,CAAd,GAEAA,KAAA,aAAkBA,KAAlB,QAjBJ,wCAoBEE,YACE,SAAOC,UAAoB,CACzB,IAAMC,EAAaJ,KAAKK,OAAxB,OAEAL,KAAA,gBAEA,IAAK,IAAIM,EAAT,EAAgBA,EAAIH,SAApB,EAAsCG,GAAtC,EAA8C,CAC5C,IAAMC,EAAOJ,EAAb,GACMK,EAAQL,EAAMG,EAApB,GACMG,EAAOC,SAAc,CAACH,EAA5B,IACMI,EAAOX,KAAKY,SAAlB,GACAZ,KAAA,kBAIF,GAAIG,aAAJ,EAA4B,CAC1B,IACMQ,EADOR,EAAMA,SAAnB,GAGAH,KAAA,kBAGFG,EAAQH,KAAKK,OAAbF,KA1CN,YAqDEU,WACE,OAAOb,KAAP,QAtDJ,YAgEEc,WACE,OAAOd,KAAP,QAjEJ,UA2EEe,WACE,OAAOf,KAAKK,OAAOL,KAAKK,OAAOW,OAAxB,GAAP,IA5EJ,WA+FEC,cACE,IAAMC,EAAN,GAEA,qBAAWC,EAAoB,CAC7BA,KAEA,IAAK,IAAIb,EAAT,EAAgBA,EAAIN,KAAKoB,OAAzB,OAAwCd,IACtC,IAAII,YAAqBV,KAAKoB,OAA1BV,MACFS,KAKN,GAAIA,IAAJ,EACE,SAGF,IAAK,IAAIb,EAAT,EAAgBA,EAAIN,KAAKK,OAAzB,OAAwCC,IAAK,CAC3C,IAAMe,EAAQrB,KAAKK,OAAnB,GACMiB,EAAcH,EAApB,EACMI,EAAYD,EAAcH,EAAH,EAAeA,EAA5C,EAEII,EAAYF,EAAhB,QACEH,OAAW,CACTM,SAAUF,EAAc,OADf,QAETb,KAAMY,EAAME,KAKhBJ,EAASA,EAAD,EAARA,EAGF,UAhIJ,SAkJEM,gBACE,IAAId,EAAJ,EAEA,IAAKe,cAAD,KAA0BR,EAA1B,aAAJ,EACE,SAGF,IAAK,IAAIZ,EAAT,EAAgBA,EAAIY,EAApB,OAAkCZ,IAAK,CACrC,IAAMqB,EAAOT,EAAb,GACMU,EAAN,SAAmBD,WACbE,EAAN,GACAA,UACAA,EAAQD,EAAa,UAArBC,QAAyCF,EAAzCE,MAEAlB,EAAOX,KAAKY,SAASF,SAArBC,IAGF,WAAOD,gBAnKX,KAuKMT,EAAY,SAAC6B,GACjB,OAAO,YACL,IAAMC,EAAID,EAAV,GACA,OAAIpB,WAAJ,GACE,EAIKA,OAAYoB,EAAEE,kBAAuBC,WAAzBH,kBAAsDE,QAAlEtB,KAAP,UFrLJ,SAAYwB,GACVA,kBACAA,oBACAA,gBACAA,0BAJF,CAAYA,MAAZ,KCbA,SAAYC,GACVA,qBACAA,qBACAA,2BACAA,4CACAA,kCACAA,oCACAA,uBACAA,2BACAA,yBACAA,yBACAA,kBACAA,4BACAA,0BACAA,0BACAA,gCACAA,8BACAA,oBACAA,oBACAA,0BACAA,wBACAA,wBACAA,iCACAA,mCACAA,wBACAA,sBACAA,oBACAA,wBACAA,gCACAA,0BACAA,8BACAA,oCACAA,sBACAA,sBACAA,0BACAA,gCACAA,0BApCF,CAAYA,MAAZ,KAyCA,IA2NA,EE/PA,EFoCaC,EAA4C,CACvDC,MAAO,CACLC,GAAIH,EADC,MAELI,YAFK,EAGLC,aAAc,SAEhBC,MAAO,CACLH,GADK,EAELC,YAFK,EAGLC,aAAc,SAEhBE,SAAU,CACRJ,GAAIH,EADI,SAERI,YAFQ,EAGRC,aAAc,YAEhB,kBAAmB,CACjBF,GAAIH,EADa,mBAEjBI,YAFiB,GAGjBC,aAAc,mBAEhB,aAAc,CACZF,GAAIH,EADQ,cAEZI,YAFY,GAGZC,aAAc,cAEhB,cAAe,CACbF,GAAIH,EADS,eAEbI,YAFa,GAGbC,aAAc,eAEhBG,OAAQ,CACNL,GAAIH,EADE,OAENI,YAFM,EAGNC,aAAc,UAEhBI,SAAU,CACRN,GAAIH,EADI,SAERI,YAFQ,EAGRC,aAAc,YAEhBK,QAAS,CACPP,GAAIH,EADG,QAEPI,YAFO,EAGPC,aAAc,WAEhBM,QAAS,CACPR,GAAIH,EADG,QAEPI,YAFO,GAGPC,aAAc,WAEhBO,IAAK,CACHT,GAAIH,EADD,IAEHI,YAFG,GAGHC,aAAc,0BAEhBQ,SAAU,CACRV,GAAIH,EADI,SAERI,YAFQ,GAGRC,aAAc,oBAEhBS,QAAS,CACPX,GAAIH,EADG,QAEPI,YAFO,GAGPC,aAAc,mBAEhBU,QAAS,CACPZ,GAAIH,EADG,QAEPI,YAFO,GAGPC,aAAc,mBAEhBW,WAAY,CACVb,GAAIH,EADM,WAEVI,YAFU,GAGVC,aAAc,cAEhBY,UAAW,CACTd,GAAIH,EADK,UAETI,YAFS,GAGTC,aAAc,aAEhBa,KAAM,CACJf,GAAIH,EADA,KAEJI,YAFI,EAGJC,aAAc,eAEhBc,KAAM,CACJhB,GAAIH,EADA,KAEJI,YAFI,GAGJC,aAAc,kBAEhBe,QAAS,CACPjB,GAAIH,EADG,QAEPI,YAFO,GAGPC,aAAc,sBAEhBgB,OAAQ,CACNlB,GAAIH,EADE,OAENI,YAFM,GAGNC,aAAc,uBAEhBiB,OAAQ,CACNnB,GAAIH,EADE,OAENI,YAFM,GAGNC,aAAc,uBAEhB,YAAa,CACXF,GAAIH,EADO,aAEXI,YAFW,EAGXC,aAAc,aAEhB,aAAc,CACZF,GAAIH,EADQ,cAEZI,YAFY,EAGZC,aAAc,iBAEhBkB,OAAQ,CACNpB,GAAIH,EAAiB,OACrBI,YAFM,EAGNC,aAAc,UAEhBmB,MAAO,CACLrB,GAAIH,EAAiB,MACrBI,YAFK,EAGLC,aAAc,SAEhBoB,KAAM,CACJtB,GAAIH,EAAiB,KACrBI,YAFI,GAGJC,aAAc,oBAEhBqB,OAAQ,CACNvB,GAAIH,EAAiB,OACrBI,YAFM,EAGNC,aAAc,mBAEhBsB,WAAY,CACVxB,GAAIH,EAAiB,WACrBI,YAFU,EAGVC,aAAc,cAEhBuB,QAAS,CACPzB,GAAIH,EAAiB,QACrBI,YAFO,EAGPC,aAAc,uBAEhBwB,UAAW,CACT1B,GAAIH,EAAiB,UACrBI,YAFS,GAGTC,aAAc,yBAEhByB,aAAc,CACZ3B,GAAIH,EAAiB,aACrBI,YAFY,EAGZC,aAAc,4BAEhB0B,MAAO,CACL5B,GAAIH,EAAiB,MACrBI,YAFK,EAGLC,aAAc,YAEhB2B,MAAO,CACL7B,GAAIH,EAAiB,MACrBI,YAFK,EAGLC,aAAc,SAEhB4B,QAAS,CACP9B,GAAIH,EAAiB,QACrBI,YAFO,EAGPC,aAAc,WAEhB6B,WAAY,CACV/B,GAAIH,EAAiB,WACrBI,YAFU,EAGVC,aAAc,cAEhB8B,QAAS,CACPhC,GAAIH,EAAiB,QACrBI,YAFO,EAGPC,aAAc,YAeL+B,EAAuBC,YAA7B,IAyBP,SAAYC,GACVA,oBACAA,gBACAA,sBACAA,sBAJF,CAAYA,MAAZ,KE/PA,SAAYC,GACVA,mBACAA,yBAFF,CAAYA,MAAZ,KCwJ+D,qBAAXC,SAA0BA,OAAOC,WAAaD,OAAOC,SAAWD,OAAO,qBA6DvD,qBAAXA,SAA0BA,OAAOE,gBAAkBF,OAAOE,cAAgBF,OAAO,0BC9M1I,IAAMG,EAAW,SAACC,GAChB,OAAQA,SAAkBA,QAAnB,GAAwCA,QAA/C,GAsGWC,EAAmB,SAACC,GAK/B,IAHA,4JAGKC,KAAL,GACE,SAIF,IAAMC,EAAOC,WAAb,GAEA,GAAID,IAAJ,EACE,SAIF,IAAMhE,EAAQ8D,UAAd,KACMI,EAAaJ,WAAnB,GACMK,EAAaL,SAAsB9D,EAAzC,GACA,OAnE0B,SAACoE,GAG3B,IAFA,qDAEKL,KAAL,GACE,SAKF,IAAMH,EAAOS,OAAOD,WAApB,IACME,EAAQD,OAAOD,WAArB,IACMG,EAAMF,OAAOD,WAAnB,IAEA,UACE,OACE,QAAIT,MAAkBY,EAAtB,QAEYZ,EAAD,IAAmBY,EAAvB,IAIT,KARF,EASE,KATF,EAUE,KAVF,EAWE,QACE,GAAIA,EAAJ,GACE,SAON,SAkCOC,KAhGmB,SAACR,GAG3B,MADA,wGACOS,KAAP,GA6FmCC,CAAnC,IC5FWC,EAA8B,SAACC,GAAD,MAAiC,kBAAVA,GAAvB,KAA6CA,UAS3EC,EAAmB,SAACC,GAC/B,IAAMC,EAAN,GAIA,OAHA1B,2BAEO,SAAA2B,GAAC,OAAKD,KAAgBD,EAArB,MACDG,eAAP,ICaWC,EAAgB,kBAEhBC,QAFgB,4BAGT,SAAA7F,GAClB,IAAM8F,EAAWD,GAAjB,GAEA,IACE9B,wBAAiC,SAAAgC,GAC/B,IAAMC,EAAN,EAEA,GAAIF,eAAJ,qBAA2C9F,EAAP,GAClC,MAAM,IAAIiG,MAAM,WAAhB,GAGF,IAGA,EAHMC,EAAqCC,EAA3C,GACMC,EAA0BF,qBAAyC,CAAzE,GAIA,IACEG,EAAUD,EAAA,OAAiB,SAAAE,GAAE,OAAIA,EAAGtG,EAAD,GAAN,MAC7B,SACA,MAAM,IAAIiG,MAAM,0BAAV,OAAkDN,eAAe3F,EAAvE,KAGF,MAAc,MAAM,IAAIiG,MAAM,WAAV,OAAmCN,eAAe3F,EAAxD,QAEhB,MAAOuG,GACP,MAAO,CACLC,KADK,gBAELC,QAASF,EAAME,SAInB,MAAO,CACLD,KADK,YAELxG,KAAMA,KCjFG0G,EAAc,SAACD,GAAD,OAA6BE,uBAAqBC,oBAAlD,KAKdC,EAAgB,kBAAMH,EAAYI,QAAlB,aAEhBC,EAA0B,SAACpG,GACtC,IAAMqG,EAAerG,EAAA,YAAkB,SAAAsG,GAAM,OAAIN,mBAAJ,MAC7C,OAAO,IAAIrH,EAAW0H,GAAc,SAAAxF,GAAC,OAAIvB,OAAY2G,oBAAZ3G,GAAJ,WAQ1BiH,EAAe,SAACC,GAC3B,IAAMC,EAAWV,EAAYnB,EAAiB4B,EAA9C,OACME,EAAWX,EAAYnB,EAAiB4B,EAA9C,OACMG,EAAeZ,EAAYnB,EAAiB4B,EAAlD,WACMI,EAAUb,EAAYS,EAA5B,KACA,OAAOJ,EAAwB,CAACK,EAAUC,EAAUC,EAApD,KAMWE,EAAgB,SAACL,GAE5B,OADiBD,EAAjB,GACA,WAQWO,EAAW,SAACvH,EAAD,GACtB,IAAMwH,EAAMf,mBAAZ,GACA,OAAOgB,oBAAqBD,EAArBC,EAA4BD,EAA5BC,EAAmCD,EAA1C,IAQWE,EAAoB,SAAC1H,EAAD,GAC/B,IAAM2H,EAAYlB,qBAAlB,GACMmB,EAASnB,sBAAwBkB,EAAxBlB,EAAqCkB,EAArClB,EAAkDkB,EAAjE,GACME,EAASpB,0BAAwBA,mBAAvC,IACA,OAAOA,sBAAP,IAQWqB,EAAqB,SAAC,EAAD,WAShC,IAAKzD,EAAL,GAAqC,MAAM,IAAI0B,MAAV,yBACrC,IAAK1B,EAAL,GACE,MAAM,IAAI0B,MAAV,2BAEF,IAAMgC,EAAoC,CACxCjI,KAAMkI,EADkC,KAExCC,KAAMD,EAFkC,KAGxCE,IAAKF,EAHmC,IAIxCG,SAAU,CACRC,qBAAsBC,GAAuB1B,IAC7C2B,sBAFQ,EAGRpB,SAAUV,EAAYnB,EAAiB2C,EAH/B,OAIRb,SAAUX,EAAYnB,EAAiB2C,EAJ/B,OAKRO,aALQ,EAMRC,eAAgBA,IAGdC,EAAYnB,EAAlB,GACMoB,EAAcnB,EAASkB,EAA7B,GAEA,MAAO,CACLT,UADK,EAELW,SAHeC,mBAAjB,GACO,mBAGLF,YAAaA,IASJG,EAAc,SAACC,GAC1B,IAAM5B,EAAWV,EAAYnB,EAAiByD,EAA9C,OACM3B,EAAWX,EAAYnB,EAAiByD,EAA9C,OACMC,EAAWvC,EAAYnB,EAAiByD,EAA9C,OACMzB,EAAUb,EAAYsC,EAA5B,KACA,OAAOjC,EAAwB,CAACK,EAAUC,EAAU4B,EAApD,KAMWC,EAAsB,SAACF,GAElC,OADiBD,EAAjB,GACA,WASWI,EAAoB,SAACC,EAAD,KAC/B,IAAMC,EAAoC,CACxCrJ,KAAMoJ,EADkC,KAExCjB,KAAMiB,EAFkC,KAGxChB,IAAKgB,EAHmC,IAIxCE,KAAM,CACJC,MAAO1C,IACP2C,OAFI,EAGJpC,SAAUV,EAAYnB,EAAiB6D,EAHnC,OAIJ/B,SAAUX,EAAYnB,EAAiB6D,EAAlB,SAGnBK,EAAkBP,EAAxB,GAEA,MAAO,CACLG,gBADK,EAELK,kBAHqBjC,EAASgC,EAAhC,KAiBWE,EAAqB,SAACC,EAAD,KAChC,IAAIjJ,EAAJ,EAGA,OAFAA,UACAA,EAASA,SAATA,GACOoG,EAAP,IAOW8C,EAAc,SAACC,GAC1B,OAAOnD,mBAAiBD,EAAYf,eAAemE,EAAnD,WAQWC,EAAe,SAACD,EAAD,GAC1B,OAAOrC,EAASoC,EAAD,GAAf,IAmBWG,EAAa,SAACC,GACzB,GAAIA,EAAJ,EAAmB,MAAO,GAE1B,IADA,IAAIpK,EAAJ,EACOoK,eAAsBpK,EAA7B,IACEA,KAEF,IAAMqK,EAAe,WAAMrK,EAAN,IAAgBoK,EAArC,GAEA,OAAOhJ,MAAA,iBAEA,kBAAMyF,EAAYI,QAAlB,gBAoJIqD,EAA0B,SAAC,EAAD,OAMrC,MAAO,CACLC,MAAO,CACLC,aAAc,CACZ,CAACC,KAAD,OAAenC,KAAM,UACrB,CAACmC,KAAD,UAAkBnC,KAAM,UACxB,CAACmC,KAAD,UAAkBnC,KAAM,WACxB,CAACmC,KAAD,oBAA4BnC,KAAM,YAEpCoC,mBAAoB,CAClB,CAACD,KAAD,WAAmBnC,KAAM,WACzB,CAACmC,KAAD,QAAgBnC,KAAM,aAG1BqC,YAbK,qBAcLC,OAAQ,CACNH,KADM,0BAENI,QAFM,IAGNC,QAHM,EAINC,kBAAmBC,GAErBpE,QAAS,CACPW,SADO,EAEP0D,MAAOC,KAKAC,EAA0B,SAACC,EAAD,SAKrC,OAJ4B,gCAAiC,CAC3DjL,KAAMmK,EAAwBU,EAAiB,EAAGzD,EADS,GAE3DM,IAAKuD,IAEAC,gBAAsCC,EAA7C,eAwDWC,EAAyB,SAACC,GACrC,MACA,IACEC,EAAY3E,qBAAZ2E,GACA,SACA,S,MAEgBA,EAAXhK,MAAGiK,MAAGC,MACb,OAAO7E,kCAAP,IAGW8E,EAAsB,SAACC,GAClC,aAAOA,cAGIC,EAAc,SAACrG,GAAD,OAAmBmG,MAAnB,KAAiDnG,UAE/DsG,EAAwB,SAACtG,GACpC,QAAKrE,cAAL,KAGA,IAAIqE,UACGA,EAAA,OAAY,SAAAhE,GAAC,YAAIA,cAGbuK,EAAoB,SAACvG,GAAD,OAAyBvB,0BAAzB,IAEpB+H,EAAyB,SAACxG,GAAD,OAAyBf,EAAzB,IAEzBwH,EAA2B,SAACnD,EAAD,GACtC,IAAMD,EAAYnB,EAAcwE,EAAhC,WAEA,OADwBpE,EAAkBe,EAA1C,GACOsD,gBAAkCD,WAAzC,eAGWE,EAA0B,SAACtD,EAAD,GAErC,OADwBhB,EAAkBjB,mBAAiBqF,EAAlB,UAAzC,GACOC,gBAAkCD,WAAzC,eAGWG,EAA2B,SAACC,EAAD,GAYtC,OAXwBxE,EACtB,mBACElB,EACEnB,EAAiB,CACf4F,QAASa,EADM,QAEfK,SAAUL,EAAOM,eALzB,GAWOL,gBAAkCD,WAAzC,eAGWO,EAAqB,SAACtB,EAAD,GAKhC,OAJwB,gCAAiC,CACvDjL,KAAMmK,EAAwB6B,EAAD,kBAA4BA,EAA5B,WAA+CA,EADrB,cAEvDtE,IAAKuD,IAEAgB,gBAAkCD,UAAzC,eAGWQ,EAAsB,SAACC,EAAD,GACjC,IAAMC,EAAW7C,EAAYmC,EAAA,gBAAsB,mBAAyBtF,EAAYiG,EAArC,iBAEnD,OADwB/E,EAAkB8E,EAA1C,GACOT,gBAAkCD,WAAzC,eAGWY,GAA8BhH,EAAc,CACvD5F,KADuD,EAEvD8K,MAFuD,EAGvDJ,QAASrF,IAGEwH,GAA8BjH,EAAc,CACvDuC,KAAM,CAAC9C,EADgD,GAEvDyF,MAAOzF,IAGIyH,GAAmBlH,EAAc,CAC5C2D,MAD4C,EAE5CC,OAF4C,EAG5CpC,SAH4C,EAI5CC,SAAUsE,IAGCoB,GAAkCnH,EAAc,CAC3D0C,qBAAsB,CAACqD,EADoC,GAE3DnD,sBAAuB,CAACmD,EAFmC,GAG3DvE,SAAU,CAACuE,EAHgD,GAI3DtE,SAAU,CAACsE,EAJgD,GAK3DlD,aAAc,CAACpD,EAL4C,GAM3DqD,eAAgB,CAACrD,EAAkB,KAGxB2H,GAA6B,SAAC1H,GAAD,oBAAyBsH,YAEtDK,GAA6B,SAAC3H,GAAD,oBAAyBuH,YAEtDK,GAAiC,SAAC5H,GAAD,oBAAyByH,YAE1DI,GAAkB,SAAC7H,GAAD,oBAAyBwH,YAE3CM,GAAgCxH,EAAc,CACzD5F,KADyD,GAEzDmI,KAFyD,GAGzDmB,KAHyD,GAIzDlB,IAAK,CAACqD,EAAqBE,KAGhB0B,GAA+B,SAAC/H,GAAD,oBAAyB8H,YAExDE,GAAyB1H,EAAc,CAClD5F,KADkD,GAElDmI,KAFkD,GAGlDE,SAHkD,GAIlDD,IAAK,CAACqD,EAAqBE,KAGhB4B,GAAyB,SAACjI,GAAD,oBAAyBgI,YAElDE,GAAoB5H,EAAc,CAC7CgD,YAAa,CAACwC,EAD+B,GAE7ClD,UAAWqF,KAGAE,GAA2B,SAACnI,GACvC,QAAKrE,cAAL,KACA,IAAIqE,UACGA,EAAA,OAAY,SAAAhE,GAAC,oBAAIkM,gBAGbE,GAAyB9H,EAAc,CAClD8D,kBADkD,EAGlDL,gBAAiBgE,KAGNM,GAAgC,SAACrI,GAC5C,QAAKrE,cAAL,KACA,IAAIqE,UACGA,EAAA,OAAY,SAAAhE,GAAC,oBAAIoM,gBAGbE,GAA0ChI,EAAc,CACnE0G,WADmE,EAEnEuB,eAFmE,EAGnEC,cAHmE,EAInEzB,SAJmE,EAKnE0B,UALmE,GAMnEtB,YANmE,EAOnEuB,aAAcpC,IAGHqC,GAAoCrI,EAAc,CAC7DgD,YAAa,CAACwC,EAD+C,GAE7DqB,YAAa,CAACrB,EAF+C,GAG7D8C,WAH6D,GAI7D5B,WAAY,CAACb,EAJgD,GAK7DuC,aAL6D,EAM7D3B,SAAU,CAACZ,EANkD,GAO7DqC,cAAe,CAACnC,EAP6C,GAQ7DjB,QAASrF,IAGE8I,GAAyCvI,EAAc,CAClEgD,YAAa,CAACwC,EADoD,GAElEqB,YAAa,CAACrB,EAFoD,GAGlE8C,WAHkE,GAIlE5B,WAAY,CAACb,EAJqD,GAKlEuC,aALkE,EAMlE3B,SAAU,CAACZ,EANuD,GAOlEqC,cAAe,CAACnC,EAPkD,GAQlEjB,QARkE,EASlE0B,iBAAkB,CAAChB,EAT+C,GAUlEP,gBAVkE,iBAWlEE,aAAc,CAACY,EAXmD,GAYlER,QAZkE,iBAalEF,WAAY,CAACG,EAAwBmB,KAgC1B6B,GAAb,oEAEI,IAAKC,GAAL,GACE,MAAMpI,MAAM,mCAAZ,GAGF,IAAMqI,EA5B4D,CACpE,WADoE,0BAEpEzM,GAAI,aAFuB0M,EA4BeC,sBAAxC,KAzBFC,UAAW,CACT,CACE5M,GAAI,YAAF,EADJ,SAEEsG,KAFF,+BAGEuG,WAAY,YAHd,EAIEC,gBAAiBJ,IAGrBK,eAAgB,CACd,CACEzG,KADF,uCAEEsG,UAAW,YAAF,cAeX,uBAAO,CACLH,YAAa,IAAI,EAAJ,iBARnB,MAAAO,GAAA,sBAAAA,GAtB4B,IAACN,GAsB7B,KAaaF,GAAa,SAAC/I,GACzB,wBAAWA,IAEJA,2BAAiCqB,yBAAuBrB,sBAA/D,O,mTA7c2C,SAAC,EAAD,SAY3C,IAAMwJ,EAAwBC,GAAQA,EAAT,sBAAuClI,IAC9DmI,EAAuCd,EAAA,KAAe,cAC1D,OAAOlG,EAAmB,EAAD,QAMvB+G,GAAQA,EAARA,qBAAoCA,uBAApCA,QANF,MASIE,EAAyBD,EAAA,KAAqB,SAAArC,GAAC,OAAIjG,EAAYiG,EAAhB,gBAE/CqB,EAAgBe,GAAQA,EAAT,cAA+B/E,EAAWiF,EAA/D,QACMC,EAAiBnF,EAAakF,EAApC,GACME,EAAqBzI,EAA3B,GACM2F,EAAW1C,EAAmBsF,EAAwBjB,EAA3CrE,GAAjB,UACMkE,EAAiBpG,EAAS4E,EAAhC,GACMyB,EAAiBiB,GAAQA,EAAT,eAAgClI,IAChDyF,EAAa5F,EACjBnB,EAAiB,CACf8G,SAAU1F,sBADK,GAEfmE,MAAOgD,KAIX,MAAO,CACLjF,SAFeC,mBAAjB,GACO,mBAELwD,WAFK,EAGL1D,YAHK,EAILkF,cAJK,EAKLzB,SAAU1F,sBALL,GAMLuH,WANK,EAOLzB,YAPK,EAQLuB,aARK,EASLtD,QAAS,2B,oCAgBsC,SAACqD,EAAD,GACjD,IAAMe,EAAuBjI,IACvBuI,EAAqCrB,EAAA,KAAc,SAAApB,GACvD,OAAOxD,EAAkBwD,EAAGmC,EAA5B,MAEIO,EAAmBD,EAAA,KAAoB,SAAAzC,GAAC,OAAIjG,EAAYiG,EAAhB,sBAExCqB,EAAehE,EAAWqF,EAAhC,QACMH,EAAiBnF,EAAasF,EAApC,GACMF,EAAqBzI,EAA3B,GACM2F,EAAW1C,EAAmB0F,EAAkBrB,EAArCrE,GAAjB,UACMkE,EAAiBpG,EAAS4E,EAAhC,GACMyB,EAAgBjH,IAOtB,MAAO,CACLyF,WAPiB5F,EACjBnB,EAAiB,CACf8G,SAAU1F,sBADK,GAEfmE,MAAOgD,KAKTD,eAFK,EAGLC,cAHK,EAILzB,SAAU1F,sBAJL,GAKLoH,UALK,EAMLtB,YANK,EAOLuB,aAAcA,I,kCAI+B,SAACsB,GAChD,IAAMD,EAAmBC,EAAA,eAAyB,SAAA3C,GAAC,OAAIjG,EAAYiG,EAAhB,sBACnD,OAAOhD,EAAmB0F,EAAkBC,EAAnB,aAA4C5I,EAAY4I,EAAjF,e,4BAGyC,SAACA,GAC1C,IAAMD,EAAmBC,EAAA,gBAA0B,SAAA3C,GAAC,OAAIjG,EAAYiG,EAAhB,gBACpD,OAAOhD,EAAmB0F,EAAkBC,EAAnB,aAA4C5I,EAAY4I,EAAjF,e,kBAmB+B,SAAC7O,EAAD,KAG/B,GAAI8O,mBAAJ,KAAoCC,aAClC,SAIF,IAAItP,EAAJ,EAUA,OAPAO,WAAc,SAAAS,GACZ,IAAMC,EAAN,SAAmBD,WACbE,EAAU,CAAhB,GACAA,EAAQD,EAAa,UAArBC,QAAyCF,EAAzCE,MACAlB,EAAOD,OAAY2G,oBAAU3G,SAAtBA,IAAPC,UAGF,IAAOD,gB,uFA4CyC,SAAC,EAAD,WAQhD,IAAK+K,EAAwBC,EAAYJ,EAAiByE,EAA9B,aAA5B,GACE,MAAM,IAAIrJ,MAAV,uBAEF,IAAMmG,EAAmB3E,EACvB,mBACEf,EACEnB,EAAiB,CACf4F,QADe,EAEfkB,SAAUiD,EAAWhD,eAL7B,GAWMmD,EAAkB/I,EACtBnB,EAAiB,CACfqD,YADe,EAEfqC,WAAYA,KAGVpC,EAAWC,mBAAjB,GACA,MAAO,CACLF,YAAa0G,EADR,YAELlD,iBAFK,EAGLqD,gBAHK,EAILhD,YAAa6C,EAJR,YAKLpB,WAAYoB,EALP,WAMLzE,gBANK,EAOLyB,WAAYgD,EAPP,WAQLtB,aAAcsB,EART,aASLvE,aATK,EAULsB,SAAUiD,EAVL,SAWLxB,cAAewB,EAXV,cAYLzG,SAAUA,EAZL,mBAaLsC,QAbK,EAcLF,WAdK,EAeLP,QAAS,iC,+iCChd4EgF,EAAQ,KAA1FC,E,EAAAA,2BAA4BC,E,EAAAA,4BAA6BC,E,EAAAA,sBAC1DC,EAAQJ,EAAQ,KAChBK,EAAQL,EAAQ,KAChBM,EAAMN,EAAQ,KAEbO,EAA8BF,EAAMG,SAApCD,2BAEME,EAAS,uCAAG,2CAAAxD,EAAA,6DACvByD,EADuB,EACvBA,OACAC,EAFuB,EAEvBA,UACAC,EAHuB,EAGvBA,MACA7F,EAJuB,EAIvBA,OAOM8F,EAA8C,CAClD,WAAY,CAAC,0CACbpI,KAAM,CAAC,0BACPqI,qBAAsBH,EACtBI,OAAO,YAAD,OAAcL,EAAOM,qBAfN,UAkBK,IAAIC,IAASvC,qBAAsBwC,QAAnC,mBAAuDR,EAAOM,qBAlBnE,uBAkBhBpC,EAlBgB,EAkBhBA,YAEDuC,EAAuBd,EAAMe,KAAKP,EAAY,CAClDQ,MAAO,IAAInB,EAA4B,CACrCoB,IAAK,IAAIrB,EAA2B,CAClC9N,GAAIyM,EAAYG,UAAU,GAAG5M,GAC7B6M,WAAYJ,EAAYG,UAAU,GAAGC,WACrCuC,cAAenB,EAAMoB,KAAKd,EAAOe,sBAAsBC,QAAQ,KAAM,IAAK,OAAOC,MAAM,eAG3FC,eAAgBzB,EAChB0B,QAAS,IAAItB,EAA2B,CACtCuB,UAAWlB,EACX7F,OAAQA,IAEVgH,cAAc,IAjCO,kBAoChBZ,GApCgB,2CAAH,sDAuCTa,EAAc,SAACC,EAAaC,GACvC,IAAMC,EAAQ7B,EAAI8B,MAAMH,GAAK,GACvBI,EAAcC,KAAO,EAAM,GAAIH,EAAMI,MAAOL,GAE5CM,EAAcnO,OAAOoO,KAAKJ,GAC7BK,KAAI,SAAApB,GACH,IAAM1L,EAAQyM,EAAYf,GAC1B,OAAiB,OAAV1L,EAAiB+M,mBAAmBrB,GAAOqB,mBAAmBrB,GAAO,IAAMqB,mBAAmB/M,MAEtGgN,KAAK,KAKR,OAHAT,EAAMI,MAAQ,KACdJ,EAAMU,OAASL,EAAc,IAAMA,EAAc,KAE1ClC,EAAIwC,OAAOX,K,iHC5DlBY,EAAOC,QAAUhD,EAAQ,M,yECAzB+C,EAAOC,QAAUhD,EAAQ,M,uJCcdiD,EAAb,+BAIcC,8BACJA,UAEDC,UAAY,OACZC,mBAAqB,yHAG5BC,gCACOxT,KAAKsT,iBAEwDtT,KAAKqT,WAClEE,mBAAqBE,qBAAmB,CAC3CH,UAAWtT,KAAKsT,UAChBI,YAHKA,UAILC,YAJoCA,UAKpCC,qBALgBA,mBAMhBC,gBAN+CA,oBAUnDC,4BAAmBC,MACZ/T,KAAKuT,0BAGoCvT,KAAKqT,MAA5CK,cAAWC,cAAWE,kBADkEE,EAAxFL,YAGeA,GAHyEK,EAA9DJ,YAGoBA,GAH0CI,EAApCF,gBAG6BA,QACjFN,mBAAmBS,OAAO,CAACN,YAAWC,YAAWE,sBAI1DI,gCACMjU,KAAKuT,yBACFA,mBAAmBW,YAI5BC,oCAEIC,uCACMC,eAAarU,KAAKqT,MAAO,YAAa,qBAAsB,YAAa,kBAC7EiB,IAAK,SAAAhF,GACHiF,EAAKjB,UAAYkB,SA9C3B,CAAkCC,4J,+MChB5BhE,EAAMN,EAAZ,KAEagC,EAAc,SAACC,EAAD,GACzB,IAAME,EAAQ7B,WAAd,GACM+B,EAAcC,KAAO,EAAM,GAAIH,EAAX,MAA1B,GAEMK,EAAcnO,OAAA,aACb,SAAAiN,GACH,IAAM1L,EAAQyM,EAAd,GACA,OAAOzM,SAAiB+M,mBAAjB/M,GAA2C+M,0BAAgCA,mBAAlF,MAHgB,KAApB,KAUA,OAHAR,aACAA,SAAeK,EAAc,IAAH,EAA1BL,KAEO7B,SAAP,I,mDCjBK,IAAMiE,EAAkB,SAACpS,GAC9B,IAAMqS,EAAMC,sDAAZ,OACAD,KAAYrS,EAAZqS,QACAA,4CAEA,IAAME,EAAOD,sDAAb,QASA,OARAC,+hBAIAA,sCAEAF,iBAEA,G,2YCVF,IA8CaG,EAAyB,SAACxS,EAAD,OACpCyS,SA/CkB,SAACzS,EAAD,KAClB,IAEA,EAFM0S,EAAQJ,uBAAd,SAIA,UACE,aACEK,SACA,MACF,eACEA,QACA,MACF,qBACEA,QACA,MACF,aACEA,MACA,MACF,QACE,MAAM,IAAIvO,MAAM,qBAAhB,GAGJ,IAAMwO,EAAYC,YAAH,IAAGA,CAAH,MAESC,EAAS,OAFlB,UAGFA,EAAS,UAHP,SAAf,GAqBA,OAFAJ,YAEA,EAIcK,CAAY/S,EAAIsG,EAA9BmM,IACAA,SAAcL,EAAdK,K,4pBCjDF,IA2DMO,EAA+E,CACnF1N,MAAO,CACL2N,EADK,ypCAGLC,MAHK,KAILC,OAAQ,OAKNC,EAAoB,SAACpT,EAAD,GACxB,IAAMqT,EAAcf,uBAApB,QACAe,KAAoBrT,EAApBqT,iBACAA,cAAwBjB,EAAxBiB,IAEA,IAAMC,EAAON,EAAb,GAIA,OAFAK,cAlCiB,SAACrT,EAAD,OACjB,IAAMqS,EAAMC,sDAAZ,OACAD,KAAYrS,EAAZqS,QACAA,0BACAA,2BAEA,IAAMiB,EAAOhB,sDAAb,QAOA,OANAgB,sBACAA,sCACAA,uCAEAjB,iBAEA,EAqBwBkB,CAAWvT,EAAIsT,EAAL,EAAaA,EAAb,MAAyBA,EAA3DD,SAEA,GAGWG,EAA0B,SAACxT,EAAD,KACrCyS,SAlFkB,SAACzS,EAAD,GAClB,IAAM0S,EAAQJ,uBAAd,SAEIM,EAAYC,YAAH,IAAGA,CAAH,QAAb,GAoCA,MAVI,CAAC,UAAW,SAAU,UAAUY,QAAQnN,IAA5C,IACEsM,GAAaC,YAAJ,IAAIA,CAAJ,IAATD,IAOFF,YAEA,EA2CcK,CAAY/S,EAA1ByS,IACAA,SAAcW,EAAkBpT,EAAhCyS,K,4pCClFF,IAmTMO,EAA8E,CAClF1N,MAAO,CACL2N,EADK,koCAGLC,MAHK,KAILC,OAAQ,OAKNC,EAAoB,SAACpT,EAAD,GACxB,IAAMqT,EAAcf,uBAApB,QACAe,KAAoBrT,EAApBqT,iBACAA,cAAwBjB,EAAxBiB,IAEA,IAAMC,EAAON,EAAb,GAIA,OAFAK,cAjCiB,SAACrT,EAAD,OACjB,IAAMqS,EAAMC,sDAAZ,OACAD,KAAYrS,EAAZqS,QACAA,0BACAA,2BAEA,IAAMiB,EAAOhB,sDAAb,QAOA,OANAgB,sBACAA,sCACAA,uCAEAjB,iBAEA,EAoBwBkB,CAAWvT,EAAIsT,EAAL,EAAaA,EAAb,MAAyBA,EAA3DD,SAEA,GAGWK,EAAyB,SAAC1T,EAAD,KACpCyS,cApHkB,SAACzS,EAAD,GAClB,IAAM0S,EAAQJ,uBAAd,SAEIM,EAAYC,YAAH,IAAGA,CAAH,MAGyCc,YA5NxD,8hWAyNe,IAAb,GAoDA,MAVI,CAAC,UAAW,SAAU,UAAUF,QAAQnN,IAA5C,IACEsM,GAAaC,YAAJ,IAAIA,CAAJ,IAATD,IAOFF,YAEA,EA6DmBK,CAAY/S,EAA/ByS,IACAA,cA1DqB,SAACzS,GACtB,IAAMqS,EAAMC,sDAAZ,OACAD,KAAYrS,EAAZqS,QACAA,sCAEA,IAAMuB,EAAOtB,sDAAb,QASA,OARAsB,oSAIAA,sCAEAvB,iBAEA,EA4CmBwB,CAAnBpB,IACAA,cAAmBW,EAAkBpT,EAArCyS,KCrUIZ,EAAS,SAAC7R,EAAD,KANC,IAACoR,EAAD,EAUd,IAHAqB,QAPerB,EAOO0C,EAAD,UAPP,EAO0BA,gBAAxCrB,YANArB,MAAgBvB,EAAYuB,EAAD,IAAgB,CAAC,iBAAkB,WAE9D,mCAA0CuC,YAAY7P,eAAtD,qBAAiG0M,mBAAjG,IAOOiC,EAAP,WACEA,cAAmBA,EAAnBA,WAGF,IAAMlB,EAAgBuC,EAAtB,cAEA,OAAIvC,OACFiB,EAAuBxS,EAAIyS,EAAQlB,EAAb,KAAiCA,EAAvDiB,QACK,OAAIjB,OACTiC,EAAwBxT,EAAIyS,EAAQlB,QAApCiC,SAEAE,EAAuB1T,EAAIyS,EAAQlB,QAAnCmC,UAeSK,EAAoB,SAACD,GAMhC,IAAM9T,EAAK8T,MAjBM,WAIjB,IAHA,IAAME,EAAN,iEAEIC,EAAJ,GACSjW,EAAT,EAAgBA,EAAhB,EAAuBA,IACrBiW,GAAQD,SAAgBE,WAAWA,cAAgBF,EAAnDC,SAGF,+BASwBE,GAClB1B,EAASH,uBAAf,KASA,OARAwB,2BAEArB,OACAA,kBACAA,4BAEAZ,EAAO7R,EAAIyS,EAAXZ,GAEO,CACLH,OAAQ,SAAA0C,GACNvC,EAAO7R,EAAIyS,EAAXZ,IAEFD,OAAQ,WACNa,cCzDA4B,EAAsB,SAACjD,GAC3B,IAAMkD,EAAYhC,SAAlB,eACMiC,IAAYD,IAAoBA,gBAA2BA,aAA3BA,IAEhCE,EAAWlC,uBAAjB,YACAkC,YAAqB1Q,eAArB0Q,OACAA,8BACAA,4BACAA,uBAEAlC,6BACAkC,WACAlC,6BACAA,6BAEIiC,GAAJ,IACED,oBACAA,gBAISG,EAAoB,SAACX,GAKhC,IAAMY,EAASpC,uBAAf,UACAwB,sBAEAA,gBAAuBjE,EAAYiE,YAAD,IAAuB,CAAC,iBAAkB,OAC5EY,UAAiB,kBAAML,EAAoBP,EAA1B,Y,MAEQa,YAAWD,EAAQ,CAACvW,KAAM2V,EAAP,UAAyBc,QAASd,EAAOzC,YAA9EK,WAEP,MAAO,CACLA,OAAQ,SAAA0C,GACNA,gBAA6BvE,EAAYuE,YAAD,IAA6B,CAAC,iBAAkB,OACxFM,UAAiB,kBAAML,EAAoBD,EAA1B,YAEjB1C,EAAO,CAACvT,KAAMiW,EAAP,UAA+BQ,QAASR,EAAa/C,aAE9DO,OATaA,WC/BXT,EAAqB,SAAC2C,GAO1B,MAEA,wBAAWA,EAAP,mBAAkD,CACpD,IAAMe,EAAeC,UAAanB,iBAAlC,WACMoB,EAAsBF,4BAA5B,WAAuEA,gBACjEG,EAAgBH,mBAAtB,YAAwDA,UAExDI,EAAeF,GAAfE,OAEAA,EADK,mBAAWnB,EAAP,mBACMA,EAAfmB,mBAEenB,qBAA0BgB,UAAanB,iBAAtDsB,YAGF,OAAQA,EAAelB,EAAhB,GAAP,K,0lBCpBImB,EAAqBC,YAAqB,sCAC1CC,EAAgBD,YAAqB,iCAsBrCE,EAAqBvD,IAAMwD,cAAuC,CACtEC,IAAK,GACLhH,OAAQtH,IAAUuO,WAClBC,MAAO,aACPC,SAAU,aACVC,SAAS,WAAD,4BAAE,sBAAA7K,EAAA,+EAAa,CAACnG,KAAM,YAApB,2CAAF,kDAAC,GACTiR,QAAQ,WAAD,4BAAE,sBAAA9K,EAAA,+EAAa,CAACnG,KAAM,YAApB,2CAAF,kDAAC,KAGGkR,EAAgC,SAAA9E,GAAU,IAAD,EAChBmE,GAA2B,kBAAMjO,IAAUuO,WAAWlG,yBADtC,mBAC7CwG,EAD6C,KACjCC,EADiC,OAE9BX,GAA4B,iBAAM,MAFJ,mBAE7CG,EAF6C,KAExCS,EAFwC,KAI9CzH,EAAStH,IAAUgP,eAAe7X,EAAOiR,KAAKyG,EAAWvG,QAAQ,KAAM,IAAK,QAElF,OACE,kBAAC8F,EAAmBa,SAApB,CACEzS,MAAO,CACL8K,SACAgH,MACAE,MAAO,WACLM,EAAc9O,IAAUuO,WAAWlG,uBACnC0G,EAAO,KAETN,SAAU,SAAA7W,GACR,IAAMsX,EAAM,YAAOZ,GACnBY,EAAOC,OAAOvX,EAAO,GACrBmX,EAAOG,IAETR,SAAS,WAAD,4BAAE,WAAOpN,EAAOkG,EAAO4H,GAArB,mBAAAvL,EAAA,yDACW,IAAfyK,EAAI7W,OADA,yCAEC,CACLiG,KAAM,QACNC,QAAS,mDAJL,UAQa,IAAjB2D,EAAM7J,OARF,yCASC,CACLiG,KAAM,QACNC,QAAS,uDAXL,UAeF0R,EAAoB,GACpBC,EAAyB,GAE/BhO,EAAMiO,SAAQ,SAAAlQ,GAEZ,IAAMmQ,EAAUlB,EAAImB,MAAK,SAAAC,GAAE,OAAIA,EAAGrQ,KAAKsQ,SAAStQ,MAE5CmQ,EACFF,EAASM,KAAKJ,GAEdH,EAAQO,KAAKvQ,QAIbgQ,EAAQ5X,OAAS,GA7Bb,yCA8BC,CACLiG,KAAM,QACNC,QAAQ,8CAAD,OAAgD0R,EAAQ7F,KAAK,SAhChE,wBAoCSnC,YAAU,CAACC,SAAQC,UAAW+H,EAAU9H,QAAO7F,OAAQyN,IApChE,eAoCFrH,EApCE,2BAuCA8H,cACH3I,IAAI0B,YAAYwG,EAAI,CAAC,iBAAkB,QACvCU,KAAK/H,GACLgI,OA1CG,oFA4CC,CACLrS,KAAM,QACNC,QAAS,mDA9CL,iCAkDD,CAACD,KAAM,YAlDN,2DAAF,uDAAC,GAoDTiR,QAAQ,WAAD,4BAAE,WAAMvG,GAAN,iBAAAvE,EAAA,+EAIUgM,cACZG,QAAQ,CAACC,YAAa,cAAe,eAAgB,qBACrD/I,IAAI0B,YAAYR,EAAM,CAAC,iBAAkB,QACzC0H,KAAK,CAACzN,QAAQ,YAAD,OAAciF,EAAOM,sBAClCmI,OARE,gBAIFL,EAJE,EAIFA,GAJE,yEAUE,CACLhS,KAAM,QACNC,QAAS,wDAZN,eAgBPoR,EAAO,GAAD,mBAAKT,GAAL,CAAUoB,KAhBT,kBAkBA,CAAChS,KAAM,YAlBP,yDAAF,mDAAC,KAsBToM,EAAMoG,WAKAC,EAAiB,WAC5B,OAAOC,qBAAWhC,M,iOC1HPiC,EAAb,+BAIcvG,8BACJA,UAEDC,UAAY,OACZuG,qBAAuB,yHAG9BrG,gCACOxT,KAAKsT,iBAE0DtT,KAAKqT,WACpEwG,qBAAuBC,uBAAqB,CAC/CxG,UAAWtT,KAAKsT,UAChByG,cAHKA,YAILpG,YAJsCA,UAKtCC,qBALkBA,mBAMlBC,gBANiDA,oBAUrDC,4BAAmBC,MACZ/T,KAAK6Z,4BAGsC7Z,KAAKqT,MAA9C0G,gBAAapG,cAAWE,kBADoEE,EAA5FgG,cAGiBA,GAH2EhG,EAA9DJ,YAGoBA,GAH0CI,EAApCF,gBAG6BA,QACrFgG,qBAAqB7F,OAAO,CAAC+F,cAAapG,YAAWE,sBAI9DI,gCACMjU,KAAK6Z,2BACFA,qBAAqB3F,YAI9BC,oCAEIC,uCACMC,eAAarU,KAAKqT,MAAO,cAAe,qBAAsB,YAAa,kBAC/EiB,IAAK,SAAAhF,GACHiF,EAAKjB,UAAYkB,SA9C3B,CAAoCC,8J,4MCZ/BuF,E,6CAAL,SAAKA,GACHA,yCACAA,kCAFF,CAAKA,MAAL,KVJA,IAAMvJ,EAAMN,EAAZ,KAEagC,EAAc,SAACC,EAAD,GACzB,IAAME,EAAQ7B,WAAd,GACM+B,EAAcC,KAAO,EAAM,GAAIH,EAAX,MAA1B,GAEMK,EAAcnO,OAAA,aACb,SAAAiN,GACH,IAAM1L,EAAQyM,EAAd,GACA,OAAOzM,SAAiB+M,mBAAjB/M,GAA2C+M,0BAAgCA,mBAAlF,MAHgB,KAApB,KAUA,OAHAR,aACAA,SAAeK,EAAc,IAAH,EAA1BL,KAEO7B,SAAP,I,mDCjBK,IAAMiE,EAAkB,SAACpS,GAC9B,IAAMqS,EAAMC,sDAAZ,OACAD,KAAYrS,EAAZqS,QACAA,4CAEA,IAAME,EAAOD,sDAAb,QASA,OARAC,+hBAIAA,sCAEAF,iBAEA,G,2YUVF,IA8CasF,EAA2B,SAAC3X,EAAD,OACtCyS,SA/CkB,SAACzS,EAAD,KAClB,IAEA,EAFM0S,EAAQJ,uBAAd,SAIA,UACE,aACEK,SACA,MACF,eACEA,QACA,MACF,qBACEA,QACA,MACF,aACEA,MACA,MACF,QACE,MAAM,IAAIvO,MAAM,qBAAhB,GAGJ,IAAMwO,EAAYC,YAAH,IAAGA,CAAH,MAESC,EAAS,OAFlB,UAGFA,EAAS,UAHP,SAAf,GAqBA,OAFAJ,YAEA,EAIcK,CAAY/S,EAAIsG,EAA9BmM,IACAA,SAAcL,EAAdK,K,4pBCjDF,IA2DMO,EAA+E,CACnF,SAAU,CACRC,EADQ,onFAGRC,MAHQ,MAIRC,OAAQ,MAEV,UAAW,CACTF,EADS,4yGAGTC,MAHS,MAITC,OAAQ,MAEVyE,QAAS,CACP3E,EADO,+hHAGPC,MAHO,MAIPC,OAAQ,MAEV0E,MAAO,CACL5E,EADK,ypCAGLC,MAHK,KAILC,OAAQ,MAEVhU,OAAQ,CACN8T,EADM,ooFAGNC,MAHM,MAINC,OAAQ,OAKNC,EAAoB,SAACpT,EAAD,GACxB,IAAMqT,EAAcf,uBAApB,QACAe,KAAoBrT,EAApBqT,iBACAA,cAAwBjB,EAAxBiB,IAEA,IAAMC,EAAON,EAAb,GAIA,OAFAK,cA1DiB,SAACrT,EAAD,OACjB,IAAMqS,EAAMC,sDAAZ,OACAD,KAAYrS,EAAZqS,QACAA,0BACAA,2BAEA,IAAMiB,EAAOhB,sDAAb,QAOA,OANAgB,sBACAA,sCACAA,uCAEAjB,iBAEA,EA6CwBkB,CAAWvT,EAAIsT,EAAL,EAAaA,EAAb,MAAyBA,EAA3DD,SAEA,GAGWyE,EAA4B,SAAC9X,EAAD,KACvCyS,SA1GkB,SAACzS,EAAD,GAClB,IAAM0S,EAAQJ,uBAAd,SAEIM,EAAYC,YAAH,IAAGA,CAAH,QAAb,GAoCA,MAVI,CAAC,UAAW,SAAU,UAAUY,QAAQnN,IAA5C,IACEsM,GAAaC,YAAJ,IAAIA,CAAJ,IAATD,IAOFF,YAEA,EAmEcK,CAAY/S,EAA1ByS,IACAA,SAAcW,EAAkBpT,EAAhCyS,K,4pCC1GF,IAoTMO,EAA8E,CAClF,SAAU,CACRC,EADQ,yjFAGRC,MAHQ,MAIRC,OAAQ,MAEV,UAAW,CACTF,EADS,gwGAGTC,MAHS,MAITC,OAAQ,MAEVyE,QAAS,CACP3E,EADO,ohHAGPC,MAHO,MAIPC,OAAQ,MAEV0E,MAAO,CACL5E,EADK,koCAGLC,MAHK,KAILC,OAAQ,MAEVhU,OAAQ,CACN8T,EADM,gmFAGNC,MAHM,MAINC,OAAQ,OAKNC,EAAoB,SAACpT,EAAD,GACxB,IAAMqT,EAAcf,uBAApB,QACAe,KAAoBrT,EAApBqT,iBACAA,cAAwBjB,EAAxBiB,IAEA,IAAMC,EAAON,EAAb,GAIA,OAFAK,cA1DiB,SAACrT,EAAD,OACjB,IAAMqS,EAAMC,sDAAZ,OACAD,KAAYrS,EAAZqS,QACAA,0BACAA,2BAEA,IAAMiB,EAAOhB,sDAAb,QAOA,OANAgB,sBACAA,sCACAA,uCAEAjB,iBAEA,EA6CwBkB,CAAWvT,EAAIsT,EAAL,EAAaA,EAAb,MAAyBA,EAA3DD,SAEA,GAGW0E,EAA2B,SAAC/X,EAAD,KACtCyS,cA7IkB,SAACzS,EAAD,GAClB,IAAM0S,EAAQJ,uBAAd,SAEIM,EAAYC,YAAH,IAAGA,CAAH,MAGyCc,YA5NxD,8hWAyNe,IAAb,GAoDA,MAVI,CAAC,UAAW,SAAU,UAAUF,QAAQnN,IAA5C,IACEsM,GAAaC,YAAJ,IAAIA,CAAJ,IAATD,IAOFF,YAEA,EAsFmBK,CAAY/S,EAA/ByS,IACAA,cAnFqB,SAACzS,GACtB,IAAMqS,EAAMC,sDAAZ,OACAD,KAAYrS,EAAZqS,QACAA,sCAEA,IAAMuB,EAAOtB,sDAAb,QASA,OARAsB,oSAIAA,sCAEAvB,iBAEA,EAqEmBwB,CAAnBpB,IACAA,cAAmBW,EAAkBpT,EAArCyS,KC9VIZ,EAAS,SAAC7R,EAAD,KANC,IAACyX,EAAD,EAUd,IAHAhF,QAPegF,EAOO3D,EAAD,YAPP,EAO4BA,gBAA1CrB,YANAgF,MAAkB5H,EAAY4H,EAAD,IAAkB,CAAC,iBAAkB,WAElE,qCAA4C9D,YAAY7P,eAAxD,qBAAqG0M,mBAArG,IAOOiC,EAAP,WACEA,cAAmBA,EAAnBA,WAGF,IAAMlB,EAAgBuC,EAAtB,cAEA,OAAIvC,OACFoG,EAAyB3X,EAAIyS,EAAQlB,EAAb,KAAiCA,EAAzDoG,QACK,OAAIpG,OACTuG,EAA0B9X,EAAIyS,EAAQlB,QAAtCuG,UAEAC,EAAyB/X,EAAIyS,EAAQlB,QAArCwG,WAeSC,EAAsB,SAAClE,GAMlC,IAAM9T,EAAK8T,MAjBM,WAIjB,IAHA,IAAME,EAAN,iEAEIC,EAAJ,GACSjW,EAAT,EAAgBA,EAAhB,EAAuBA,IACrBiW,GAAQD,SAAgBE,WAAWA,cAAgBF,EAAnDC,SAGF,iCASwBE,GAClB1B,EAASH,uBAAf,KASA,OARAwB,2BAEArB,OACAA,kBACAA,4BAEAZ,EAAO7R,EAAIyS,EAAXZ,GAEO,CACLH,OAAQ,SAAA0C,GACNvC,EAAO7R,EAAIyS,EAAXZ,IAEFD,OAAQ,WACNa,cCzDA4B,EAAsB,SAACoD,GAC3B,IAAMnD,EAAYhC,SAAlB,eACMiC,IAAYD,IAAoBA,gBAA2BA,aAA3BA,IAEhCE,EAAWlC,uBAAjB,YACAkC,YAAqB1Q,eAArB0Q,OACAA,8BACAA,4BACAA,uBAEAlC,6BACAkC,WACAlC,6BACAA,6BAEIiC,GAAJ,IACED,oBACAA,gBChBEkD,EAAuB,SAAC1D,GAkB5B,YAXA,IAAIA,uBACFA,qBAA4B,SAAAe,GAC1B,IAAME,EAAsBF,4BAA5B,WAAuEA,gBACjEG,EAAgBH,mBAAtB,YAAwDA,UAExD,OAAOE,GAAP,IAIuBjB,qBAA0BgB,UAAanB,iBAAlE,YAGSqE,EAAP,GDC+B,SAAClE,GAKlC,IAAMY,EAASpC,uBAAf,UACAwB,sBAEAA,kBAAyBjE,EAAYiE,cAAD,IAAyB,CAAC,iBAAkB,OAChFY,UAAiB,kBAAML,EAAoBP,EAA1B,c,MAEQa,YAAWD,EAAQ,CAACvW,KAAM2V,EAAP,YAA2Bc,QAASd,EAAOzC,YAAhFK,WAEP,MAAO,CACLA,OAAQ,SAAA0C,GACNA,kBAA+BvE,EAAYuE,cAAD,IAA+B,CAAC,iBAAkB,OAC5FM,UAAiB,kBAAML,EAAoBD,EAA1B,cAEjB1C,EAAO,CAACvT,KAAMiW,EAAP,YAAiCQ,QAASR,EAAa/C,aAEhEO,OATaA,UCVNqG,CAAP,K,ihBC5BJ,SAASC,IAA2Q,OAA9PA,EAAWhW,OAAOiW,QAAU,SAAUC,GAAU,IAAK,IAAIpa,EAAI,EAAGA,EAAIqa,UAAU3Z,OAAQV,IAAK,CAAE,IAAIsa,EAASD,UAAUra,GAAI,IAAK,IAAImR,KAAOmJ,EAAcpW,OAAOqW,UAAUC,eAAeC,KAAKH,EAAQnJ,KAAQiJ,EAAOjJ,GAAOmJ,EAAOnJ,IAAY,OAAOiJ,IAA2BM,MAAMhb,KAAM2a,WAEhT,SAASM,EAAyBL,EAAQM,GAAY,GAAc,MAAVN,EAAgB,MAAO,GAAI,IAAkEnJ,EAAKnR,EAAnEoa,EAEzF,SAAuCE,EAAQM,GAAY,GAAc,MAAVN,EAAgB,MAAO,GAAI,IAA2DnJ,EAAKnR,EAA5Doa,EAAS,GAAQS,EAAa3W,OAAOoO,KAAKgI,GAAqB,IAAKta,EAAI,EAAGA,EAAI6a,EAAWna,OAAQV,IAAOmR,EAAM0J,EAAW7a,GAAQ4a,EAASnF,QAAQtE,IAAQ,IAAaiJ,EAAOjJ,GAAOmJ,EAAOnJ,IAAQ,OAAOiJ,EAFxMU,CAA8BR,EAAQM,GAAuB,GAAI1W,OAAO6W,sBAAuB,CAAE,IAAIC,EAAmB9W,OAAO6W,sBAAsBT,GAAS,IAAKta,EAAI,EAAGA,EAAIgb,EAAiBta,OAAQV,IAAOmR,EAAM6J,EAAiBhb,GAAQ4a,EAASnF,QAAQtE,IAAQ,GAAkBjN,OAAOqW,UAAUU,qBAAqBR,KAAKH,EAAQnJ,KAAgBiJ,EAAOjJ,GAAOmJ,EAAOnJ,IAAU,OAAOiJ,EAMne,ICMIc,EDNA,EAEJ,IAAMC,cAAc,QAAS,KAAM,SAE/B,EAEJ,IAAMA,cAAc,IAAK,CACvBC,KAAM,WACL,IAAMD,cAAc,OAAQ,CAC7BlG,EAAG,sIACHoG,UAAW,6BACT,IAAMF,cAAc,OAAQ,CAC9BlG,EAAG,wIACHoG,UAAW,6BACT,IAAMF,cAAc,OAAQ,CAC9BlG,EAAG,wIACHoG,UAAW,6BACT,IAAMF,cAAc,OAAQ,CAC9BlG,EAAG,oIACHoG,UAAW,6BACT,IAAMF,cAAc,OAAQ,CAC9BlG,EAAG,s0BACHoG,UAAW,8BAGT,EAAU,SAAiBC,GAC7B,IAAIC,EAASD,EAAKC,OACdC,EAAQF,EAAKE,MACbzI,EAAQ4H,EAAyBW,EAAM,CAAC,SAAU,UAEtD,OAAO,IAAMH,cAAc,MAAOjB,EAAS,CACzCuB,QAAS,mBACTtG,OAAQ,GACRnB,IAAKuH,GACJxI,QAAkB2I,IAAVF,EAAsB,EAAQA,EAAQ,IAAML,cAAc,QAAS,KAAMK,GAAS,KAAM,IAGjGG,EAAa,IAAMC,YAAW,SAAU7I,EAAOiB,GACjD,OAAO,IAAMmH,cAAc,EAASjB,EAAS,CAC3CqB,OAAQvH,GACPjB,OC1CC8I,GD4CS,IC5CD,WACZ,IAAMC,EAAuC,cAA7BnG,OAAOoG,SAASC,SAE1BC,EAAOH,EAAU,OAAS,MAEhC,MAAM,GAAN,OAHiBA,EAAU,KAAO,MAGlC,cAAwBnG,OAAOoG,SAASC,SAAxC,YAAoDC,EAApD,cALY,IAURC,EAAiC,GAEjCC,EAAwB,YAC5BjB,EAAS,IAAIkB,UAAUP,IAEhBQ,UAAY,SAACrN,GAClB,IACE,IAAMsN,EAAUxW,KAAKmM,MAAMjD,EAAE7O,MAC7B,GAAImc,aAAmBlb,MAAO,CAC5B,IAAMmb,EAAYL,EAAeI,EAAQ,IACrCC,GAAWA,EAAU/D,SAAQ,SAAAgE,GAAQ,OAAIA,EAAS1W,KAAKmM,MAAMqK,EAAQ,SAE3E,MAAOtN,GACPyN,QAAQC,IAAI,8BAA+B1N,KAI/CkM,EAAOyB,QAAU,SAAC3N,MAKpBmN,IAEAS,aAAY,WACVH,QAAQC,IAAI,gBAAiBxB,GAAUA,EAAO2B,cAC7C,KAEHD,aAAY,WACL1B,GAAgC,IAAtBA,EAAO2B,aAChB3B,GACFA,EAAO4B,QAETX,OAED,KAEH,IAAMY,EAAW,SAACzU,EAAckU,GACM,qBAAzBN,EAAe5T,KACxB4T,EAAe5T,GAAQ,IAGzB4T,EAAe5T,GAAMuQ,KAAK2D,IAGtBQ,EAAY,SAAC1U,EAAckU,GAC/B,GAAoC,qBAAzBN,EAAe5T,MACtB4T,EAAe5T,GAAM5H,QAAU,GAEnC,GAAK8b,EAEE,CACL,IAAM3b,EAAQqb,EAAe5T,GAAMmN,QAAQ+G,GAEvC3b,GAAS,GACXqb,EAAe5T,GAAM8P,OAAOvX,EAAO,QALrCqb,EAAe5T,GAAM5H,OAAS,GClErBuc,EACL,IADKA,EAEJ,SAACjb,GAAD,uBAA0BA,IAFtBib,EAGJ,SAACjb,GAAD,uBAA0BA,IAHtBib,EAIJ,SAJIA,EAKF,WCMLC,G,OAAyB,SAACC,GCPA,IAAC3B,IDQd2B,EAAW,mCAA+BA,GAAgB,yBCP3EC,qBAAU,WACR,IAAMC,EAAY/I,SAASkH,MAG3B,OAFAlH,SAASkH,MAAQA,EAEV,WACLlH,SAASkH,MAAQ6B,KAElB,CAAC7B,MDOO8B,EAA+B,SAAAvK,GAC1CmK,EAAuBnK,EAAMoK,aADsB,MAEvBI,oBAAS,GAFc,mBAE5CC,EAF4C,KAEpCC,EAFoC,KAInD,OACE,yBAAKC,UAAU,SACb,yBAAKA,UAAU,+BACb,yBAAKA,UAAU,aACb,yBAAKA,UAAU,gBACb,kBAAC,IAAD,CAAMrF,GAAI4E,EAAcS,UAAU,eAChC,kBAAC,EAAD,OAEF,yBAAKA,UAAWC,YAAK,gBAAiB,SAAU,CAAC,YAAaH,IAAUI,QAAS,kBAAMH,GAAWD,KAChG,+BACA,+BACA,iCAGJ,yBAAKE,UAAWC,YAAK,cAAe,CAAC,YAAaH,KAChD,kBAAC,IAAD,CAASnF,GAAI4E,EAAeS,UAAU,cAAcG,gBAAgB,aAApE,oBAGA,kBAAC,IAAD,CAASxF,GAAI4E,EAAiBS,UAAU,cAAcG,gBAAgB,aAAtE,0BAMN,0BAAMH,UAAU,eACd,yBAAKA,UAAU,aACb,yBAAKA,UAAU,eAAe3K,EAAMoG,cEzCxC2E,G,OAA6C,SAAA/K,GAAK,OACtD,yCAASA,EAAT,CAAgB2K,UAAWC,YAAK,yBAA0B5K,EAAM2K,aAC9D,yBAAKA,UAAU,kCAAkCxI,MAAM,KAAKC,OAAO,KAAKsG,QAAQ,YAAYsC,MAAM,8BAChG,4BAAQL,UAAU,+BAA+BM,GAAG,IAAIC,GAAG,KAAKvS,EAAE,MAClE,4BAAQgS,UAAU,+BAA+BM,GAAG,KAAKC,GAAG,KAAKvS,EAAE,MACnE,4BAAQgS,UAAU,+BAA+BM,GAAG,KAAKC,GAAG,KAAKvS,EAAE,UCPnEwS,EAA6B,SAAAnL,GACjC,OACE,yCAASA,EAAT,CAAgB2K,UAAWC,YAAK,OAAQ5K,EAAM2K,aAC3C3K,EAAMoG,WAOPgF,EAAyC,SAAApL,GAC7C,OACE,yCAASA,EAAT,CAAgB2K,UAAWC,YAAK,cAAe5K,EAAM2K,aAClD3K,EAAMoG,WASPiF,EAAmD,SAAArL,GACvD,IAAMsL,EAAKtL,EAAMuL,IAAM,MAEvB,OACE,kBAACD,EAAD,iBAAQtL,EAAR,CAAe2K,UAAWC,YAAK,oBAAqB5K,EAAM2K,aACvD3K,EAAMoG,WAqBPoF,EAA2C,SAAAxL,GAC/C,OACE,yCAASA,EAAT,CAAgB2K,UAAWC,YAAK,eAAgB5K,EAAM2K,aACnD3K,EAAMoG,WAOPqF,EAA4C,SAAAzL,GAChD,OACE,4CAAYA,EAAZ,CAAmB2K,UAAWC,YAAK,cAAe5K,EAAM2K,aACrD3K,EAAMoG,WASPsF,EAAiD,SAAA1L,GACrD,IAAMsL,EAAKtL,EAAMuL,IAAM,MAEvB,OACE,kBAACD,EAAD,iBAAQtL,EAAR,CAAe2K,UAAWC,YAAK,mBAAoB5K,EAAM2K,aACtD3K,EAAMoG,W,iBCvEPuF,EAA0D,CAC9DC,QAAS,CAACjB,UAAW,IACrBkB,KAAM,CAAClB,UAAW,WAClBmB,QAAS,CAACnB,UAAW,cACrBjU,KAAM,CAACiU,UAAW,WAClBoB,KAAM,CAACpB,UAAW,WAClBqB,QAAS,CAACrB,UAAW,cACrBsB,QAAS,CAACtB,UAAW,cACrBuB,OAAQ,CAACvB,UAAW,cAOhBwB,EAAuC,SAAAC,GAC3C,IAAMpM,EAAK,aAAIqM,KAAMV,EAAYC,SAAYQ,GAE7C,OACE,6CAAapL,YAAahB,EAAO,QAAjC,CAA0C2K,UAAWC,YAAK,UAAW5K,EAAMqM,KAAK1B,UAAW3K,EAAM2K,aAC9F3K,EAAMoG,WAOPkG,EAA+C,SAAAtM,GAAK,OACxD,yCAASA,EAAT,CAAgB2K,UAAWC,YAAK,iBAAkB5K,EAAM2K,aACrD3K,EAAMoG,WAMLmG,EAA2C,SAAAvM,GAAK,OACpD,yCAASA,EAAT,CAAgB2K,UAAWC,YAAK,eAAgB5K,EAAM2K,aACnD3K,EAAMoG,W,SC7CLoG,GAAG,uCAAG,sBAAAzS,EAAA,+EACHgM,cAASG,QAAQ,CACtBC,YAAa,cACb,eAAgB,sBAHR,2CAAH,qDAOHsG,GAAO,uCAAG,WAAUC,EAAqDC,GAA/D,mCAAA5S,EAAA,6DAAiF6S,EAAjF,+BAA4G,GACpH9Q,EAAa,IAAI+Q,gBADT,SAEUL,KAFV,YAEwB1Q,EAFxB,KAEwC6Q,EAAhDG,EAFQ,OAEiBC,OAFjB,MAEoC3P,IAFpC,WAKNsP,EALM,OAMP,QANO,QAOP,WAPO,QAUP,SAVO,QAWP,QAXO,QAYP,UAZO,gCAQVM,EAAOF,EAASJ,KARN,oCAaVM,EAAOF,EAASJ,GAAQE,GAbd,mCAgBJvZ,MAAM,uBAAD,OAAwBqZ,IAhBzB,eAoBRO,EAAUD,EAAK/G,QACpB,OAA6BnK,EAAWoR,MArB3B,kBAuBPD,GAvBO,4CAAH,wDA0BAjH,GAAI,uCAAG,WAAU2G,GAAV,2BAAA5S,EAAA,6DAA4B6S,EAA5B,+BAAuD,GAAvD,kBAA8DH,GAAW,OAAQE,EAAUC,IAA3F,2CAAH,sDAEJO,GAAG,uCAAG,WAAUR,GAAV,SAAA5S,EAAA,+EAA+B0S,GAAW,MAAOE,IAAjD,2CAAH,sDClCHS,GAAS,SAAC,GAAD,IAAE7X,EAAF,EAAEA,KAAMnI,EAAR,EAAQA,KAAR,OAA4CigB,GAAwB,sBAAuB,CAAC9X,OAAMnI,UAE3GkgB,GAAY,SAAC,GAAD,IAAEre,EAAF,EAAEA,GAAF,OAAwBoe,GAAA,uBAA+Cpe,EAA/C,iBAEpCse,GAAe,SAAC,GAAD,IAAEte,EAAF,EAAEA,GAAF,OAAwBoe,GAAA,uBAA2Cpe,EAA3C,qBCLvCme,GAAS,SAAC,GAAD,IAAE5V,EAAF,EAAEA,MAAOgW,EAAT,EAASA,gBAAT,OACpBH,GAAwB,uBAAwB,CAAC7V,QAAOgW,qBAE7CF,GAAY,SAAC,GAAD,IAAEre,EAAF,EAAEA,GAAF,OAAwBoe,GAAA,wBAA2Epe,EAA3E,iBAEpCwe,GAAgB,SAAC,GAAD,IAAExe,EAAF,EAAEA,GAAF,OAAwBoe,GAAA,wBAAsDpe,EAAtD,sBCJxCud,GAAM,CAACkB,OAAMC,S,SCmBbC,GAAuD,CAClEhC,QAAS,CAACjB,UAAW,IACrBkD,MAAO,CAAClD,UAAW,YACnBmD,MAAO,CAACnD,UAAW,YACnBkB,KAAM,CAAClB,UAAW,WAClBoD,MAAO,CAACpD,UAAW,YACnBpI,KAAM,CAACoI,UAAW,WAClBmB,QAAS,CAACnB,UAAW,cACrBjU,KAAM,CAACiU,UAAW,WAClBoB,KAAM,CAACpB,UAAW,WAClBqB,QAAS,CAACrB,UAAW,cACrBsB,QAAS,CAACtB,UAAW,cACrBuB,OAAQ,CAACvB,UAAW,cAiCTqD,GAAoC,SAAA5B,GAC/C,IAAMpM,EAAK,aAAIqM,KAAMuB,GAAWhC,QAASqC,KAAML,GAAWhC,SAAYQ,GAEtE,OACE,4CACMpL,YACFhB,EACA,OACA,OACA,UACA,cACA,aACA,aACA,YACA,YACA,YACA,WACA,YACA,WACA,cAfJ,CAiBE2K,UAAWC,YACT,SACA5K,EAAMqM,KAAK1B,UACX3K,EAAMiO,KAAKtD,UACX,CACE,WAAY3K,EAAMkO,QAClB,eAAgBlO,EAAMmO,YACtB,cAAenO,EAAMoO,WACrB,cAAepO,EAAMqO,WACrB,aAAcrO,EAAMsO,UACpB,aAActO,EAAMuO,UACpB,aAAcvO,EAAMwO,UACpB,YAAaxO,EAAMyO,SACnB,aAAczO,EAAM0O,UACpB,YAAa1O,EAAM2O,UAErB3O,EAAM2K,WAERiE,SAAU5O,EAAM6O,aAEf7O,EAAMoG,WClGA0I,GAAuD,CAClElD,QAAS,CAACjB,UAAW,IACrBoE,MAAO,CAACpE,UAAW,YACnBqE,OAAQ,CAACrE,UAAW,aACpBsE,MAAO,CAACtE,UAAW,aAORuE,GAAoC,SAAA9C,GAC/C,IAAMpM,EAAK,aAAIiO,KAAMa,GAAWlD,SAAYQ,GAE5C,OACE,4CAAYpL,YAAahB,EAAO,QAAhC,CAAyC2K,UAAWC,YAAK,SAAU5K,EAAMiO,KAAKtD,UAAW3K,EAAM2K,aAC5F3K,EAAMoG,W,oDCVA+I,I,cAAyC,SAAAnP,GACpD,IAAMoP,EAAMC,mBAAQ,WAClB,OAAO,IAAIC,KAAI,CAACC,WAAW,EAAMC,SAAS,MACzC,IAEH,OAAO,kBAAC,KAAD,CAAgBC,IAAKA,KAAKL,IAAKA,EAAK1c,MAAOsN,EAAMtN,MAAOgd,SAAU1P,EAAM0P,SAAUC,KAAM3P,EAAM2P,KAAMC,OAAQ5P,EAAM4P,WC8C9GC,I,OAA8B,SAAA7P,GACzC,IC/DkF8P,EAAWjM,ED+DvFkM,EAAsE,WAA3DC,IAAO9Q,MAAM0D,OAAOqN,UAAUC,WAAWC,SAAS5a,KACxDmI,EAAS0S,cAAbnhB,GAF2C,GC9DgC6gB,EDiE3C,CAAC7gB,GAAIyO,GChErC2S,YAASP,GAAa,CAAC,iBAAkBA,GAAYtD,GAAIkB,KAAKJ,UAAWzJ,IDgEzEzW,EAH2C,EAG3CA,KAAMuG,EAHqC,EAGrCA,MACP2c,EAhDmB,SAACC,GAAoB,IAAD,EACX/F,qBADW,mBACtC8F,EADsC,KAC3BE,EAD2B,KAuC7C,OApCAnG,qBAAU,WACR,IAAIoG,GAAU,EAiBd,OAfS,uCAAG,gCAAA1W,EAAA,2DACJ2D,EAAQ,IAAIgT,gBAAgB9N,OAAOoG,SAASrJ,QAAQwN,IAAI,UADpD,0CAKaX,GAAIkB,KAAKH,aAAa,CAACte,GAAIyO,IALxC,gBAKCkI,EALD,EAKCA,GACH6K,GAASD,EAAa5K,GANpB,kDAQF6K,GAASD,EAAa,MARpB,0DAAH,oDAaJrD,GAEE,WACLsD,GAAU,KAEX,IAEHpG,qBAAU,WACR,IAAMsG,EAAiB,SAAC/K,GAAD,OAAa4K,EAAa5K,IAOjD,OALI2K,IACFnH,IACAY,EAAS,qBAAsB2G,IAG1B,WACL1G,EAAU,qBAAsB0G,MAEjC,CAACJ,IAEGD,EASWM,CAA4B,OAATxjB,GAC9ByX,EAAWwB,eAAXxB,QAL2C,EAMV2F,qBANU,mBAM3CqG,EAN2C,KAM7BC,EAN6B,KAQlD,IAAKC,iBAAOrT,GAAQ,OAAO,kBAAC,IAAD,CAAU4H,GAAG,eAExC,IAEIc,EAFE0C,EAAOkI,8CAAYC,sBAAZ,UAAuCrO,OAAOoG,SAASkI,SAAvD,aAAoEtO,OAAOoG,SAASF,MAIjG,GAAIwH,EACFlK,EACE,kBAAC,EAAD,CAASiG,KAAMV,EAAYK,SACzB,kBAAC,EAAD,KACE,+DAEF,kBAAC,EAAD,KACE,yBAAKrB,UAAU,+BACb,kBAAC,GAAD,CAAYjY,MAAO4d,EAAWX,KAAK,iBAKtC,GAAIhc,EACTyS,EACE,kBAAC,EAAD,CAASiG,KAAMV,EAAYM,SACzB,kBAAC,EAAD,KACE,uDAEF,kBAAC,EAAD,oDAGC,CACL,IAAIkF,EACAC,EAEJ,GAAIhkB,EAAM,CACR,IAAMuf,EAAQ,uBAAmBjP,EAAnB,kBAAkCtQ,EAAKikB,cAErDF,EACE,kBAAC,eAAD,CACExG,UAAU,sBACVpK,mBAAoBwP,EACpB1P,UAAW,CACTvI,QAAS,EACT4F,QACAN,IAAI,GAAD,OAAK0L,GAAL,OAAY6D,IAEjBrM,UAAW,CAAC2N,KAAM,KAClBzN,cAAe,CACb8Q,YAAY,GAAD,OAAK1O,OAAOoG,SAASuI,QAArB,OAA8BrH,EAAcxM,GAA5C,kBAA4DA,MAK7E0T,EACE,kBAAC,GAAD,CACEjD,aAAW,EACXtD,QAAO,sBAAE,4BAAA9Q,EAAA,sEACgB8K,EAAQ8H,GADxB,OAGe,WAFhB6E,EADC,QAGM5d,MACXkd,EAAgBU,EAAS3d,SAJpB,4CAFX,gCAcFsd,EAAc,kBAAC,EAAD,MAGhB/K,EACE,kBAAC,IAAMqL,SAAP,KACE,kBAAC,EAAD,KACE,kBAAC,EAAD,KACGN,EACAC,GACC,kBAAC,IAAMK,SAAP,KACE,yBAAK9G,UAAU,aAAa+G,eAAa,OACxCN,GAGJP,GACC,kBAAC,EAAD,CAASlG,UAAU,uBAAuB0B,KAAMV,EAAYO,QAC1D,kBAAC,EAAD,KACE,mEACA,kBAAC,GAAD,CAAQrB,QAAS,kBAAMiG,OAAgBnI,IAAYgJ,aAAW,mBAEhE,kBAAC,EAAD,KAAcd,OAS5B,IAAMe,GAAYxkB,IAASkjB,EAE3B,OACE,kBAAC,EAAD,CAAOlG,YAAY,SACjB,wBAAIO,UAAU,qDAAd,oBACA,uBAAGA,UAAU,8BAAb,6BAAqEoF,EAAW,oBAAsB,oBAAtG,KACA,yBAAKpF,UAAU,iCACb,yBACEA,UAAWC,YAAK,6CAA8C,CAC5D,YAAagH,EACb,UAAWtB,IAEb3O,MAAO,CAACQ,MAAOyP,IAAatB,EAAY,YAAS3H,IAEhDvC,OE5KEyL,I,OAA4B,SAAA7R,GAAU,IAAD,EACTqG,eAAhC7I,EADyC,EACzCA,OAAQgH,EADiC,EACjCA,IAAKE,EAD4B,EAC5BA,MAAOC,EADqB,EACrBA,SAE3B,OACE,kBAAC,EAAD,KACE,wBAAIgG,UAAU,qDAAd,2BACA,uBAAGA,UAAU,8BAAb,gDACA,yBAAKA,UAAU,iCACb,yBAAKA,UAAU,yBACb,wBAAIA,UAAU,cAAd,iBACA,yBAAKA,UAAU,iBAAiBnN,EAAOM,oBACvC,kBAAC,GAAD,CAAQ6M,UAAU,kBAAkBE,QAAS,kBAAMnG,MAAnD,qBAGA,yBAAKiG,UAAU,eACf,wBAAIA,UAAU,cAAd,uBACCnG,EAAI7W,OAAS,EACZ,kBAAC,IAAM8jB,SAAP,KACGjN,EAAIhF,KAAI,SAACoG,EAAI3Y,GAAL,OACP,yBAAK0d,UAAU,mBAAmBvM,IAAKnR,GACrC,yBAAK0d,UAAU,mCACb,kBAAC,GAAD,CAAQA,UAAU,uBAAuBE,QAAS,kBAAMlG,EAAS1X,IAAI0kB,aAAW,eAElF,yBAAKhH,UAAU,yBACb,kBAAC,GAAD,CAAYjY,MAAOkT,EAAI+J,KAAK,eAMpC,4E,krBChBZ,IAAMmC,GAAmD,SAAA9R,GACvD,IAAM/Q,EAAK8iB,aAAM/R,EAAM/Q,IAEvB,OACE,6BACE,yBAAK0b,UAAU,SACb,2BAAOqH,QAAO,UAAK/iB,EAAL,SAAgB0b,UAAU,SAAxC,QAGA,yBAAKA,UAAU,WACb,2BACEzX,UAAQ,EACRR,MAAOsN,EAAMzK,KACbma,SAAU,SAAAzT,GAAC,OAAI+D,EAAMiS,aAAahW,EAAEoL,OAAO3U,MAAMwf,SACjDjjB,GAAE,UAAKA,EAAL,SACF0b,UAAU,QACVpV,KAAK,OACL4c,YAAY,WAIlB,yBAAKxH,UAAU,SACb,2BAAOqH,QAAO,UAAK/iB,EAAL,SAAgB0b,UAAU,SAAxC,QAGA,yBAAKA,UAAU,WACb,kBAAC,GAAD,CACEgF,KAAK,OACL1gB,GAAE,UAAKA,EAAL,SACFyD,MAAOsN,EAAM5S,KACbsiB,SAAU1P,EAAMoS,aAChBxC,OAAQyC,KAAEC,SACPC,KAAK,QAASF,KAAEG,UAChBtf,SAAS,CAAC,UACVuf,gBAUFC,GAA8B,SAAA1S,GAAU,IAAD,EAChBwK,qBADgB,mBAC3CmI,EAD2C,KAChCC,EADgC,OAE1BpI,mBAAS,IAFiB,mBAE3CjV,EAF2C,KAErCsd,EAFqC,OAG1BrI,mBAA6B,CAAC,QAAS,KAHb,mBAG3Cpd,EAH2C,KAGrC0lB,EAHqC,KAK5CjE,EAA6B,KAAhBtZ,EAAK2c,QAA0B,OAAT9kB,EAEzC,OACE,kBAAC,EAAD,CAAOgd,YAAY,SACjB,wBAAIO,UAAU,qDAAd,oBACA,uBAAGA,UAAU,8BAAb,wCACCgI,GACC,kBAAC,EAAD,CAAStG,KAAMV,EAAYK,SACzB,kBAAC,EAAD,KACE,2DACA,kBAAC,GAAD,CAAQnB,QAAS,kBAAM+H,OAAajK,IAAYgJ,aAAW,mBAE7D,kBAAC,EAAD,6CACuC,kBAAC,IAAD,CAAMrM,GAAI4E,EAAcyI,IAAazI,EAAcyI,IAD1F,MAKJ,yBAAKhI,UAAU,WACb,yBAAKA,UAAU,kBACb,kBAAC,EAAD,KACE,kBAAC,EAAD,KACE,kBAAC,EAAD,uBAEF,kBAAC,EAAD,KACE,kBAAC,GAAD,CAAiBpV,KAAMA,EAAMnI,KAAMA,EAAM6kB,aAAcY,EAAST,aAAcU,OAIpF,yBAAKnI,UAAU,kBACb,kBAAC,EAAD,KACE,kBAAC,EAAD,KACE,kBAAC,EAAD,sCAEF,kBAAC,EAAD,KACE,6BACE,8BACGoI,aADH,KAGchgB,KAAKigB,UAAU5lB,GAKbmI,EACFxC,KAAKigB,UAAU5lB,OAUjC,kBAAC,EAAD,KACE,kBAAC,EAAD,KACE,kBAAC,GAAD,CACE+gB,aAAW,EACX9B,KAAMuB,GAAW7B,KACjBlB,QAAO,sBAAE,8BAAA9Q,EAAA,sEACYyS,GAAIkB,KAAKN,OAAO,CAAC7X,OAAMnI,KAAMA,IADzC,gBACA6B,EADA,EACAA,GACP2jB,EAAa3jB,GACb4jB,EAAQ,IACRC,EAAQ,CAAC,QAAS,KAJX,2CAMTjE,WAAYA,GATd,mB,ilBCnHhB,IAAMoE,GAAyB,SAAC1d,GAE9B,OADiBxG,KAAiBwG,GACnB,UAAMxG,KAAiBwG,GAAapG,aAApC,aAAqDoG,EAArD,KAA+DA,GAO1E2d,GAA6C,SAAAlT,GACjD,OACE,6BAAS2K,UAAU,wBACjB,6BAASA,UAAU,kCAAkCsI,GAAuBjT,EAAMzK,OAClF,yBAAKoV,UAAU,iCACb,yBAAKA,UAAU,8CACb,yBAAKA,UAAU,gFAAf,gBAEF,yBAAKA,UAAU,WACb,yBAAKA,UAAU,UACb,yBAAKA,UAAU,SACb,yBAAKA,UAAU,WACb,2BAAOA,UAAU,YACf,2BAAOpV,KAAK,aADd,iBAOR,yBAAKoV,UAAU,WACb,yBAAKA,UAAU,UACb,yBAAKA,UAAU,SACb,2BAAOqH,QAAO,UAAKhS,EAAMzK,KAAX,qBAAoCoV,UAAU,SAA5D,oBAGA,yBAAKA,UAAU,WACb,2BAAO1b,GAAE,UAAK+Q,EAAMzK,KAAX,qBAAoCoV,UAAU,QAAQpV,KAAK,OAAO4c,YAAY,wBAI7F,yBAAKxH,UAAU,UACb,yBAAKA,UAAU,SACb,2BAAOqH,QAAO,UAAKhS,EAAMzK,KAAX,oBAAmCoV,UAAU,SAA3D,mBAGA,yBAAKA,UAAU,WACb,2BAAO1b,GAAE,UAAK+Q,EAAMzK,KAAX,oBAAmCoV,UAAU,QAAQpV,KAAK,OAAO4c,YAAY,wBAK9F,yBAAKxH,UAAU,WACb,yBAAKA,UAAU,UACb,yBAAKA,UAAU,SACb,2BAAOqH,QAAO,UAAKhS,EAAMzK,KAAX,uBAAsCoV,UAAU,SAA9D,sBAGA,yBAAKA,UAAU,WACb,2BAAO1b,GAAE,UAAK+Q,EAAMzK,KAAX,uBAAsCoV,UAAU,QAAQpV,KAAK,OAAO4c,YAAY,0BAI/F,yBAAKxH,UAAU,UACb,yBAAKA,UAAU,SACb,2BAAOqH,QAAO,UAAKhS,EAAMzK,KAAX,uBAAsCoV,UAAU,SAA9D,sBAGA,yBAAKA,UAAU,WACb,2BAAO1b,GAAE,UAAK+Q,EAAMzK,KAAX,uBAAsCoV,UAAU,QAAQpV,KAAK,OAAO4c,YAAY,2BAKjG,yBAAKxH,UAAU,WACb,yBAAKA,UAAU,UACb,yBAAKA,UAAU,SACb,2BAAOqH,QAAO,UAAKhS,EAAMzK,KAAX,uBAAsCoV,UAAU,SAA9D,sBAGA,yBAAKA,UAAU,WACb,2BAAO1b,GAAE,UAAK+Q,EAAMzK,KAAX,uBAAsCoV,UAAU,QAAQpV,KAAK,OAAO4c,YAAY,0BAI/F,yBAAKxH,UAAU,UACb,yBAAKA,UAAU,SACb,2BAAOqH,QAAO,UAAKhS,EAAMzK,KAAX,uBAAsCoV,UAAU,SAA9D,sBAGA,yBAAKA,UAAU,WACb,2BAAO1b,GAAE,UAAK+Q,EAAMzK,KAAX,uBAAsCoV,UAAU,QAAQpV,KAAK,OAAO4c,YAAY,8BAY5FgB,GAAkC,SAAAnT,GAAU,IAAD,EACZwK,mBAAsB,IAAI4I,KADd,mBAC/CC,EAD+C,KAChCC,EADgC,OAEhB9I,mBAAsB,IAAI4I,KAFV,mBAE/CG,EAF+C,KAElCC,EAFkC,OAGZhJ,mBAAS,IAHG,mBAG/CiJ,EAH+C,KAGhCC,EAHgC,OAIRlJ,mBAAS,MAJD,mBAI/CgD,EAJ+C,KAI9BmG,EAJ8B,OAMlBnJ,qBANkB,mBAM/CoJ,EAN+C,KAMnCC,EANmC,KAQhDC,EAA0E,SAAA7X,GAC9E,OAAQA,EAAEoL,OAAO3U,OACf,IAAK,KACHihB,EAAmB,MACnB,MACF,IAAK,KACHA,EAAmB,MACnB,MACF,QACE,MAAM,IAAItgB,MAAJ,yBAA4B4I,EAAEoL,OAAO3U,UAI3CqhB,EAAiB,uBAAO1lB,MAAMiQ,KAAKiV,IAAlB,aAAmCllB,MAAMiQ,KAAK+U,KAErE,OACE,kBAAC,EAAD,CAAOjJ,YAAY,WACjB,wBAAIO,UAAU,qDAAd,uBACA,uBAAGA,UAAU,8BAAb,2FACCiJ,GACC,kBAAC,EAAD,CAASvH,KAAMV,EAAYK,SACzB,kBAAC,EAAD,KACE,2DACA,kBAAC,GAAD,CAAQnB,QAAS,kBAAMgJ,OAAclL,IAAYgJ,aAAW,mBAE9D,kBAAC,EAAD,mDAC6C,kBAAC,IAAD,CAAMrM,GAAI4E,EAAc0J,IAAc1J,EAAc0J,IADjG,MAKJ,6BACE,yBAAKjJ,UAAU,cAAf,qBACA,yBAAKA,UAAU,WACb,yBAAKA,UAAU,UACb,kBAAC,EAAD,KACE,kBAAC,EAAD,KACE,kBAAC,EAAD,eAEF,kBAAC,EAAD,KACE,yBAAKA,UAAU,sBACb,yBAAKA,UAAU,yBACb,0BACEqJ,SAAU,SAAA/X,GACRA,EAAEgY,iBAEF,IAAMC,EAAiB,IAAId,IAAIG,GAC/BW,EAAeC,IAAIV,GAEnBD,EAAeU,GACfR,EAAiB,KAEnB/I,UAAU,mCAEV,yBAAKA,UAAU,oBACb,yBAAKA,UAAU,uBACb,2BACEjY,MAAO+gB,EACP/D,SAAU,SAAAzT,GAAC,OAAIyX,EAAiBzX,EAAEoL,OAAO3U,MAAMwf,SAC/CvH,UAAU,QACVpV,KAAK,OACL4c,YAAY,iBAGhB,yBAAKxH,UAAU,WACb,kBAAC,GAAD,eAIN,6BACGtc,MAAMiQ,KAAKiV,GAAa/T,KAAI,SAAA4U,GAC3B,OACE,yBAAKzJ,UAAU,uBAAuBvM,IAAKgW,GACzC,kBAAC,GAAD,CACEzJ,UAAU,+BACVE,QAAS,WACP,IAAMqJ,EAAiB,IAAId,IAAIG,GAC/BW,EAAeG,OAAOD,GAEtBZ,EAAeU,IAEjBvC,aAAW,uBAEZyC,QAMX,yBAAKzJ,UAAU,4BACZzZ,KAAqBsO,KAAI,SAAAjK,GACxB,OACE,2BAAO6I,IAAK7I,EAAMoV,UAAU,mCAC1B,2BACE2J,QAASjB,EAAckB,IAAIhf,GAC3Bma,SAAU,WACR,IAAM8E,EAAmB,IAAIpB,IAAIC,GAE5BmB,EAAiBH,OAAO9e,IAC3Bif,EAAiBL,IAAI5e,GAGvB+d,EAAiBkB,IAEnBjf,KAAK,WACLmC,KAAK,qBAbT,WAeOub,GAAuB1d,aAS5C,yBAAKoV,UAAU,UACb,kBAAC,EAAD,KACE,kBAAC,EAAD,KACE,kBAAC,EAAD,uBAEF,kBAAC,EAAD,KACE,yBAAKA,UAAU,yBACZoJ,EAAkBvU,KAAI,SAAAjK,GAAI,OACzB,kBAAC,GAAD,CAAY6I,IAAK7I,EAAMA,KAAMA,YAOzC,yBAAKoV,UAAU,cAAf,qBACoB,0BAAMA,UAAU,2BAAhB,kBAEpB,yBAAKA,UAAU,SACb,yBAAKA,UAAU,WACb,2BAAOA,UAAU,SACf,2BACE2J,QAA6B,OAApB9G,EACTjY,KAAK,QACLmC,KAAK,mBACLhF,MAAM,KACNgd,SAAUoE,IAEX,OAEH,2BAAOnJ,UAAU,SACf,2BACE2J,QAA6B,OAApB9G,EACTjY,KAAK,QACLmC,KAAK,mBACLhF,MAAM,KACNgd,SAAUoE,IAEX,SAIP,kBAAC,GAAD,CACEjF,WAAyC,IAA7BkF,EAAkBpmB,OAC9B0e,KAAMuB,GAAWlX,KACjBmU,QAAO,sBAAE,8BAAA9Q,EAAA,sEACYyS,GAAImB,MAAMP,OAAO,CAAC5V,MAAOuc,EAAmBvG,oBADxD,gBACAve,EADA,EACAA,GACP4kB,EAAc5kB,GACdqkB,EAAiB,IAAIF,KACrBI,EAAe,IAAIJ,KAJZ,4CAHX,YAaF,yBAAKzI,UAAU,mBACb,yBAAKA,UAAU,cAAf,WACA,6BACE,8BACG8J,aADH,KAUgBV,EAAkBvU,KAAI,SAAAjK,GAAI,iBAAQA,EAAR,QAAiBmK,KAAK,Y,UC/O7DgV,I,OAA8B,SAAA1U,GACzC,ICjE8G8P,EAAWjM,EDiEnHkM,EAAsE,WAA3DC,IAAO9Q,MAAM0D,OAAOqN,UAAUC,WAAWC,SAAS5a,KACxDmI,EAAS0S,cAAbnhB,GAF2C,GChE4D6gB,EDmEtE,CAAC7gB,GAAIyO,GClEtC2S,YAASP,GAAa,CAAC,kBAAmBA,GAAYtD,GAAImB,MAAML,UAAWzJ,IDkE3EzW,EAH2C,EAG3CA,KAAMuG,EAHqC,EAGrCA,MACPghB,EAlDkB,SAACpE,GAAoB,IAAD,EACR/F,qBADQ,mBACrCmK,EADqC,KACzBC,EADyB,KAyC5C,OAtCAvK,qBAAU,WACR,IAAIoG,GAAU,EAiBd,OAfS,uCAAG,gCAAA1W,EAAA,2DACJ2D,EAAQ,IAAIgT,gBAAgB9N,OAAOoG,SAASrJ,QAAQwN,IAAI,UADpD,0CAK+BX,GAAImB,MAAMF,cAAc,CAACxe,GAAIyO,IAL5D,gBAKCE,EALD,EAKCA,qBACH6S,GAASmE,EAAchX,GANrB,kDAQF6S,GAASmE,EAAc,MARrB,0DAAH,oDAaJzH,GAEE,WACLsD,GAAU,KAEX,IAEHpG,qBAAU,WACR,IAAMsG,EAAc,uCAAG,WAAO/S,GAAP,SAAA7D,EAAA,sDACrB6a,EAAchX,GADO,2CAAH,sDASpB,OALI2S,IACFnH,IACAY,EAAS,uBAAwB2G,IAG5B,WACL1G,EAAU,uBAAwB0G,MAEnC,CAACJ,IAEGoE,EASYE,CAA2B,OAATznB,GAC9BwX,EAAYyB,eAAZzB,SAL2C,EAMV4F,qBANU,mBAM3CqG,EAN2C,KAM7BC,EAN6B,KAQlD,IAAKC,iBAAOrT,GAAQ,OAAO,kBAAC,IAAD,CAAU4H,GAAG,eAExC,IAEIc,EAFE0C,EAAOkI,8CAAYC,sBAAZ,UAAuCrO,OAAOoG,SAASkI,SAAvD,aAAoEtO,OAAOoG,SAASF,MAIjG,GAAI6L,EACFvO,EACE,kBAAC,EAAD,CAASiG,KAAMV,EAAYK,SACzB,kBAAC,EAAD,KACE,+DAEF,kBAAC,EAAD,KACE,yBAAKrB,UAAU,gCACb,kBAAC,GAAD,CAAYjY,MAAOiiB,EAAYhF,KAAK,iBAKvC,GAAIhc,EACTyS,EACE,kBAAC,EAAD,CAASiG,KAAMV,EAAYM,SACzB,kBAAC,EAAD,KACE,uDAEF,kBAAC,EAAD,oDAGC,CACL,IAAIkF,EACAC,EAEJ,GAAIhkB,EAAM,CACR,IAAMuf,EAAQ,gCAA4Bvf,EAAKogB,iBAE/C2D,EACE,kBAAC,kBAAD,CACExG,UAAU,sBACVpK,mBAAoB,kBAAMwP,GAC1BrJ,YAAa,CACXoO,OAAQnO,UAAOvQ,YACfsH,QACAN,IAAI,GAAD,OAAK0L,GAAL,OAAY6D,GACfoI,SAAU,yBACVC,aAAc,+CACdC,qBAAsB,+BACtBC,uBAAwB,iCAExB1d,MAAOpK,EAAKoK,OAEd8I,UAAW,CAAC2N,KAAM,KAClBzN,cAAe,CACb8Q,YAAY,GAAD,OAAK1O,OAAOoG,SAASuI,QAArB,OAA8BrH,EAAcxM,GAA5C,kBAA4DA,MAKhD,OAAzBtQ,EAAKogB,kBACP4D,EACE,kBAAC,GAAD,CACEjD,aAAW,EACXtD,QAAO,sBAAE,4BAAA9Q,EAAA,sEACgB6K,EAASxX,EAAKoK,MAAOkG,EAAOiP,GAD5C,OAGe,WAFhB6E,EADC,QAGM5d,MACXkd,EAAgBU,EAAS3d,SAJpB,4CAFX,iCAeJsd,EAAc,kBAAC,EAAD,MAGhB/K,EACE,kBAAC,IAAMqL,SAAP,KACE,kBAAC,EAAD,KACE,kBAAC,EAAD,KACGN,EACAC,GACC,kBAAC,IAAMK,SAAP,KACE,yBAAK9G,UAAU,aAAa+G,eAAa,OACxCN,GAGJP,GACC,kBAAC,EAAD,CAASlG,UAAU,uBAAuB0B,KAAMV,EAAYO,QAC1D,kBAAC,EAAD,KACE,+DACA,kBAAC,GAAD,CAAQrB,QAAS,kBAAMiG,OAAgBnI,IAAYgJ,aAAW,mBAEhE,kBAAC,EAAD,KAAcd,OAS5B,IAAMe,IAAaxkB,GAAiC,OAAzBA,EAAKogB,mBAA8BmH,EAE9D,OACE,kBAAC,EAAD,CAAOvK,YAAY,SACjB,wBAAIO,UAAU,qDAAd,qBACA,uBAAGA,UAAU,8BAAb,sCACsCoF,EAAW,oBAAsB,oBADvE,KAGA,yBAAKpF,UAAU,iCACb,yBACEA,UAAWC,YAAK,6CAA8C,CAC5D,YAAagH,EACb,UAAW+C,IAEbhT,MAAO,CAACQ,MAAOyP,IAAa+C,EAAa,YAAShM,IAEjDvC,OEvKI+O,GAvBO,kBACpB,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOC,OAAK,EAAC5T,KAAM0I,GACjB,kBAAC,GAAD,OAEF,kBAAC,IAAD,CAAOkL,OAAK,EAAC5T,KAAM0I,GACjB,kBAAC,GAAD,OAEF,kBAAC,IAAD,CAAOkL,OAAK,EAAC5T,KAAM0I,GACjB,kBAAC,GAAD,OAEF,kBAAC,IAAD,CAAOkL,OAAK,EAAC5T,KAAM0I,EAAc,QAC/B,kBAAC,GAAD,OAEF,kBAAC,IAAD,CAAOkL,OAAK,EAAC5T,KAAM0I,EAAc,QAC/B,kBAAC,GAAD,OAEF,kBAAC,IAAD,CAAO1I,KAAK,KAAZ,gBCZc6T,QACW,cAA7BzS,OAAOoG,SAASC,UAEe,UAA7BrG,OAAOoG,SAASC,UAEhBrG,OAAOoG,SAASC,SAASqM,MACvB,2D,OCLNC,IAASzU,OACP,kBAACgE,GAAA,EAAD,KACE,kBAAC,IAAD,CAA0B/B,OAAQ,CAACyS,yBAAyB,EAAOC,MAAO,IACxE,kBAAC,GAAD,QAGJlU,SAASmU,eAAe,SDwHpB,kBAAmBzF,WACrBA,UAAU0F,cAAcpF,MAAMqF,MAAK,SAAAC,GACjCA,EAAaC,kB","file":"static/js/main.4f218d09.chunk.js","sourcesContent":["import {TAttestationTypeNames} from '../../attestation'\nimport {Stage, IMerkleProofShare} from '../../misc'\nimport {ISignedClaimNode, IDataNodeLegacy} from '../shared/v0'\n\nexport interface IAuthorization {\n  /** Address of keypair granting authorization */\n  subject: string\n  /** Address of keypair receiving authorization */\n  recipient: string\n  /** Hex string to identify this authorization in the event of revocation */\n  revocation: string\n}\n\nexport interface ISignedAuthorization {\n  /** Hash of IAuthorization */\n  authorization: IAuthorization\n  /** Signed hashed authorization */\n  signature: string\n}\n\nexport enum DataVersions {\n  legacy = 'legacy',\n  onChain = 'onChain',\n  batch = 'batch',\n  batchProof = 'batchProof',\n}\n\nexport interface IVerifiedDataLegacy {\n  version: DataVersions.legacy\n  /** Blockchain transaction hash which emits the layer2Hash property */\n  tx: string\n  /** Attestation hash that lives on chain and is formed by hashing the merkle tree root hash with a nonce.  */\n  layer2Hash: string\n  /** Merkle tree root hash */\n  rootHash: string\n  /** Nonce used to hash the `rootHash` to create the `layer2Hash` */\n  rootHashNonce: string\n  /** Merkle tree leaf proof */\n  proof: IMerkleProofShare[]\n  /** The Ethereum network name on which the tx can be found */\n  stage: Stage\n  /** Data node containing the raw verified data that was requested */\n  target: IDataNodeLegacy\n  /** Ethereum address of the attester that performed the attestation */\n  attester: string\n}\n\nexport interface IVerifiedDataOnChain {\n  version: DataVersions.onChain\n  /** Blockchain transaction hash which emits the layer2Hash property */\n  tx: string\n  /** Attestation hash that lives on chain and is formed by hashing the merkle tree root hash with a nonce.  */\n  layer2Hash: string\n  /** Merkle tree root hash */\n  rootHash: string\n  /** Nonce used to hash the `rootHash` to create the `layer2Hash` */\n  rootHashNonce: string\n  /** Merkle tree leaf proof */\n  proof: IMerkleProofShare[]\n  /** The Ethereum network name on which the tx can be found */\n  stage: Stage\n  /** Data node containing the raw verified data that was requested */\n  target: ISignedClaimNode\n  /** Ethereum address of the attester that performed the attestation */\n  attester: string\n}\n\nexport interface IVerifiedDataBatch {\n  version: DataVersions.batch\n  /** Attestation hash formed by hashing subject sig with attester sig */\n  batchLayer2Hash: string\n  /** Attester signature of layer2Hash and subject address */\n  batchAttesterSig: string\n  /** Subject signature of attestation agreement */\n  subjectSig: string\n  /** Nonce used in subject sig */\n  requestNonce: string\n  /** Hash of rootHash and rootHashNonce */\n  layer2Hash: string\n  /** Merkle tree root hash */\n  rootHash: string\n  /** Nonce used to hash the `rootHash` to create the `layer2Hash` */\n  rootHashNonce: string\n  /** Merkle tree leaf proof */\n  proof: IMerkleProofShare[]\n  /** The Ethereum network name on which the tx can be found */\n  stage: Stage\n  /** Data node containing the raw verified data that was requested */\n  target: ISignedClaimNode\n  /** Ethereum address of the attester that performed the attestation */\n  attester: string\n  /** Subject of attestation */\n  subject: string\n}\n\nexport type VerifiedData = IVerifiedDataLegacy | IVerifiedDataOnChain | IVerifiedDataBatch\n\nexport interface ICredentialProof {\n  // type string describing share kit style proof\n  type: string\n  // issuance date of the proof\n  created: string\n\n  // TODO link within issuer document\n  // for now just attester address\n  creator: string\n  data: VerifiedData\n}\n\nexport interface IVerifiableCredential {\n  // TODO link to docs describing type strings\n  id: string\n  type: TAttestationTypeNames\n\n  // TODO link to Bloom hosted json doc describing the attester key used to sign creds\n  // for now just attester address\n  issuer: string\n\n  issuanceDate: string\n\n  credentialSubject: {\n    /** original subject of attestation */\n    subject: string\n    data: string\n    /** Array of signed authorization objects.  Only included if subject is different from sharer, otherwise empty array */\n    authorization: ISignedAuthorization[]\n  }\n\n  proof: ICredentialProof\n}\n\nexport interface IPresentationProof {\n  /** type string describing share kit style proof */\n  type: string\n  /** recent timestamp in RFC3339 format */\n  created: string\n  /** The Ethereum address of the user sharing their data TODO DID */\n  creator: string\n  /** token challenge from recipient */\n  nonce: string\n  /** host of recipient endpoint */\n  domain: string\n  /** hash of ordered array of layer2Hashes from each credential proof */\n  credentialHash: string\n}\n\nexport interface IVerifiablePresentation {\n  /** TODO context document */\n  context: string[]\n  type: 'VerifiablePresentation'\n  verifiableCredential: IVerifiableCredential[]\n  proof: IPresentationProof\n  /** Hex string representation of the `proof` being keccak256 hashed */\n  packedData: string\n  /** Signature of `packedData` by the user with their pk.  */\n  signature: string\n  /** Token that should match the one provided to the share-kit QR code.  same as nonce in proof */\n  token: string\n}\n","export type AttestationType = {\n  id: number\n  scoreWeight: number\n  nameFriendly: string\n  name?: string\n}\n\nexport enum AttestationTypeID {\n  'phone' = 0,\n  'email' = 1,\n  'facebook' = 2,\n  'sanction-screen' = 3,\n  'pep-screen' = 4,\n  'id-document' = 5,\n  'google' = 6,\n  'linkedin' = 7,\n  'twitter' = 8,\n  'payroll' = 9,\n  'ssn' = 10,\n  'criminal' = 11,\n  'offense' = 12,\n  'driving' = 13,\n  'employment' = 14,\n  'education' = 15,\n  'drug' = 16,\n  'bank' = 17,\n  'utility' = 18,\n  'income' = 19,\n  'assets' = 20,\n  'full-name' = 21,\n  'birth-date' = 22,\n  'gender' = 23,\n  'group' = 24,\n  'meta' = 25,\n  'office' = 26,\n  'credential' = 27,\n  'medical' = 28,\n  'biometric' = 29,\n  'supplemental' = 30,\n  'vouch' = 31,\n  'audit' = 32,\n  'address' = 33,\n  'correction' = 34,\n  'account' = 35,\n}\n\nexport type AttestationTypeManifest = {[P in keyof typeof AttestationTypeID]: AttestationType}\n\nexport const AttestationTypes: AttestationTypeManifest = {\n  phone: {\n    id: AttestationTypeID.phone,\n    scoreWeight: 5,\n    nameFriendly: 'Phone',\n  },\n  email: {\n    id: 1,\n    scoreWeight: 5,\n    nameFriendly: 'Email',\n  },\n  facebook: {\n    id: AttestationTypeID.facebook,\n    scoreWeight: 5,\n    nameFriendly: 'Facebook',\n  },\n  'sanction-screen': {\n    id: AttestationTypeID['sanction-screen'],\n    scoreWeight: 10,\n    nameFriendly: 'Sanction Screen',\n  },\n  'pep-screen': {\n    id: AttestationTypeID['pep-screen'],\n    scoreWeight: 10,\n    nameFriendly: 'PEP Screen',\n  },\n  'id-document': {\n    id: AttestationTypeID['id-document'],\n    scoreWeight: 20,\n    nameFriendly: 'ID Document',\n  },\n  google: {\n    id: AttestationTypeID.google,\n    scoreWeight: 5,\n    nameFriendly: 'Google',\n  },\n  linkedin: {\n    id: AttestationTypeID.linkedin,\n    scoreWeight: 5,\n    nameFriendly: 'LinkedIn',\n  },\n  twitter: {\n    id: AttestationTypeID.twitter,\n    scoreWeight: 5,\n    nameFriendly: 'Twitter',\n  },\n  payroll: {\n    id: AttestationTypeID.payroll,\n    scoreWeight: 15,\n    nameFriendly: 'Payroll',\n  },\n  ssn: {\n    id: AttestationTypeID.ssn,\n    scoreWeight: 15,\n    nameFriendly: 'Social Security Number',\n  },\n  criminal: {\n    id: AttestationTypeID.criminal,\n    scoreWeight: 15,\n    nameFriendly: 'Criminal Records',\n  },\n  offense: {\n    id: AttestationTypeID.offense,\n    scoreWeight: 10,\n    nameFriendly: 'Offense Records',\n  },\n  driving: {\n    id: AttestationTypeID.driving,\n    scoreWeight: 15,\n    nameFriendly: 'Driving Records',\n  },\n  employment: {\n    id: AttestationTypeID.employment,\n    scoreWeight: 15,\n    nameFriendly: 'Employment',\n  },\n  education: {\n    id: AttestationTypeID.education,\n    scoreWeight: 10,\n    nameFriendly: 'Education',\n  },\n  drug: {\n    id: AttestationTypeID.drug,\n    scoreWeight: 5,\n    nameFriendly: 'Drug Screen',\n  },\n  bank: {\n    id: AttestationTypeID.bank,\n    scoreWeight: 15,\n    nameFriendly: 'Bank Statement',\n  },\n  utility: {\n    id: AttestationTypeID.utility,\n    scoreWeight: 10,\n    nameFriendly: 'Utility Statements',\n  },\n  income: {\n    id: AttestationTypeID.income,\n    scoreWeight: 15,\n    nameFriendly: 'Income Verification',\n  },\n  assets: {\n    id: AttestationTypeID.assets,\n    scoreWeight: 15,\n    nameFriendly: 'Assets Verification',\n  },\n  'full-name': {\n    id: AttestationTypeID['full-name'],\n    scoreWeight: 5,\n    nameFriendly: 'Full Name',\n  },\n  'birth-date': {\n    id: AttestationTypeID['birth-date'],\n    scoreWeight: 5,\n    nameFriendly: 'Date of Birth',\n  },\n  gender: {\n    id: AttestationTypeID['gender'],\n    scoreWeight: 5,\n    nameFriendly: 'Gender',\n  },\n  group: {\n    id: AttestationTypeID['group'],\n    scoreWeight: 5,\n    nameFriendly: 'Group',\n  },\n  meta: {\n    id: AttestationTypeID['meta'],\n    scoreWeight: 20,\n    nameFriendly: 'Meta-attestation',\n  },\n  office: {\n    id: AttestationTypeID['office'],\n    scoreWeight: 5,\n    nameFriendly: 'Office/Position',\n  },\n  credential: {\n    id: AttestationTypeID['credential'],\n    scoreWeight: 5,\n    nameFriendly: 'Credential',\n  },\n  medical: {\n    id: AttestationTypeID['medical'],\n    scoreWeight: 0,\n    nameFriendly: 'Medical Information',\n  },\n  biometric: {\n    id: AttestationTypeID['biometric'],\n    scoreWeight: 20,\n    nameFriendly: 'Biometric Information',\n  },\n  supplemental: {\n    id: AttestationTypeID['supplemental'],\n    scoreWeight: 0,\n    nameFriendly: 'Supplemental Information',\n  },\n  vouch: {\n    id: AttestationTypeID['vouch'],\n    scoreWeight: 0,\n    nameFriendly: 'Vouching',\n  },\n  audit: {\n    id: AttestationTypeID['audit'],\n    scoreWeight: 0,\n    nameFriendly: 'Audit',\n  },\n  address: {\n    id: AttestationTypeID['address'],\n    scoreWeight: 5,\n    nameFriendly: 'Address',\n  },\n  correction: {\n    id: AttestationTypeID['correction'],\n    scoreWeight: 0,\n    nameFriendly: 'Correction',\n  },\n  account: {\n    id: AttestationTypeID['account'],\n    scoreWeight: 5,\n    nameFriendly: 'Account',\n  },\n}\n\nexport const AttestationTypesByID: {[key in AttestationTypeID]: AttestationType & {name: string}} = Object.keys(AttestationTypes).reduce(\n  (acc: any, key: string) => {\n    const def = Object.assign({}, AttestationTypes[key as keyof typeof AttestationTypeID], {\n      name: key,\n    })\n    return Object.assign(acc, {[def.id]: def})\n  },\n  {},\n)\n\nexport type TAttestationTypeNames = keyof typeof AttestationTypeID\nexport const AttestationTypeNames = Object.keys(AttestationTypes)\n\nexport const AttestationTypeIDs: AttestationTypeID[] = Object.keys(AttestationTypes).map(\n  k => AttestationTypes[k as keyof typeof AttestationTypeID].id,\n)\n\n// Type accessors\n\nexport const getAttestationTypeAttrib = <T extends keyof AttestationType>(typeId: AttestationTypeID, attrib: T): AttestationType[T] => {\n  const val = AttestationTypesByID[typeId][attrib]\n  if (val === undefined || val === null) {\n    throw new Error(`AttestationTypeID ${typeId} not supported`)\n  }\n  return val\n}\n\nconst attestationTypeAccessor = <T extends keyof AttestationType>(attrib: T) => (typeId: AttestationTypeID) =>\n  getAttestationTypeAttrib<T>(typeId, attrib)\n\nexport const getAttestationTypeStr = attestationTypeAccessor('name')\n\nexport const getBloomIDStrength = attestationTypeAccessor('scoreWeight')\n\nexport const getFormattedName = attestationTypeAccessor('nameFriendly')\n\nexport enum AttestationStatus {\n  initial = 'initial', // initial state\n  ready = 'ready', // ready for attestation\n  complete = 'complete', // attestation complete\n  rejected = 'rejected', // attestation rejected\n}\n","// MIT license\n//\n// Copyright (C) 2015 Miguel Mota\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy of\n// this software and associated documentation files (the \"Software\"), to deal in\n// the Software without restriction, including without limitation the rights to\n// use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\n// of the Software, and to permit persons to whom the Software is furnished to do\n// so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n\nimport CryptoJS from 'crypto-js'\n\nimport {IProof} from './types'\n\nexport class MerkleTree {\n  hashAlgo: (x: any) => Buffer\n  leaves: Buffer[]\n  layers: Buffer[][]\n\n  /**\n   * @desc Constructs a Merkle Tree.\n   * All nodes and leaves are stored as Buffers.\n   * Lonely leaf nodes are promoted to the next level up without being hashed again.\n   * @param {Buffer[]} leaves - Array of hashed leaves. Each leaf must be a Buffer.\n   * @param {Function} hashAlgorithm - Algorithm used for hashing leaves and nodes\n   */\n  constructor(leaves: Buffer[], hashAlgorithm: (input: Buffer) => Buffer) {\n    this.hashAlgo = bufferify(hashAlgorithm)\n    this.leaves = leaves\n    this.layers = [leaves]\n\n    this.createHashes(this.leaves)\n  }\n\n  createHashes(nodes: Buffer[]) {\n    while (nodes.length !== 1) {\n      const layerIndex = this.layers.length\n\n      this.layers.push([])\n\n      for (let i = 0; i < nodes.length - 1; i += 2) {\n        const left = nodes[i]\n        const right = nodes[i + 1]\n        const data = Buffer.concat([left, right])\n        const hash = this.hashAlgo(data)\n        this.layers[layerIndex].push(hash)\n      }\n\n      // is odd number of nodes\n      if (nodes.length % 2 === 1) {\n        const data = nodes[nodes.length - 1]\n        const hash = data\n\n        this.layers[layerIndex].push(hash)\n      }\n\n      nodes = this.layers[layerIndex]\n    }\n  }\n\n  /**\n   * getLeaves\n   * @desc Returns array of leaves of Merkle Tree.\n   * @return {Buffer[]}\n   * @example\n   * const leaves = tree.getLeaves()\n   */\n  getLeaves() {\n    return this.leaves\n  }\n\n  /**\n   * getLayers\n   * @desc Returns array of all layers of Merkle Tree, including leaves and root.\n   * @return {Buffer[]}\n   * @example\n   * const layers = tree.getLayers()\n   */\n  getLayers() {\n    return this.layers\n  }\n\n  /**\n   * getRoot\n   * @desc Returns the Merkle root hash as a Buffer.\n   * @return {Buffer}\n   * @example\n   * const root = tree.getRoot()\n   */\n  getRoot() {\n    return this.layers[this.layers.length - 1][0]\n  }\n\n  /**\n   * getProof\n   * @desc Returns the proof for a target leaf.\n   * @param {Buffer} leaf - Target leaf\n   * @param {Number} [index] - Target leaf index in leaves array.\n   * Use if there are leaves containing duplicate data in order to distinguish it.\n   * @return {Object[]} - Array of objects containing a position property of type string\n   * with values of 'left' or 'right' and a data property of type Buffer.\n   * @example\n   * const proof = tree.getProof(leaves[2])\n   *\n   * @example\n   * const leaves = ['a', 'b', 'a'].map(x => sha3(x))\n   * const tree = new MerkleTree(leaves, sha3)\n   * const proof = tree.getProof(leaves[2], 2)\n   */\n  getProof(leaf: Buffer, index?: number) {\n    const proof: IProof[] = []\n\n    if (typeof index !== 'number') {\n      index = -1\n\n      for (let i = 0; i < this.leaves.length; i++) {\n        if (Buffer.compare(leaf, this.leaves[i]) === 0) {\n          index = i\n        }\n      }\n    }\n\n    if (index <= -1) {\n      return []\n    }\n\n    for (let i = 0; i < this.layers.length; i++) {\n      const layer = this.layers[i]\n      const isRightNode = index % 2\n      const pairIndex = isRightNode ? index - 1 : index + 1\n\n      if (pairIndex < layer.length) {\n        proof.push({\n          position: isRightNode ? 'left' : 'right',\n          data: layer[pairIndex],\n        })\n      }\n\n      // set index to parent index\n      index = (index / 2) | 0\n    }\n\n    return proof\n  }\n\n  /**\n   * verify\n   * @desc Returns true if the proof path (array of hashes) can connect the target node\n   * to the Merkle root.\n   * @param {Object[]} proof - Array of proof objects that should connect\n   * target node to Merkle root.\n   * @param {Buffer} targetNode - Target node Buffer\n   * @param {Buffer} root - Merkle root Buffer\n   * @return {Boolean}\n   * @example\n   * const root = tree.getRoot()\n   * const proof = tree.getProof(leaves[2])\n   * const verified = tree.verify(proof, leaves[2], root)\n   *\n   */\n  verify(proof: IProof[], targetNode: Buffer, root: Buffer) {\n    let hash = targetNode\n\n    if (!Array.isArray(proof) || !proof.length || !targetNode || !root) {\n      return false\n    }\n\n    for (let i = 0; i < proof.length; i++) {\n      const node = proof[i]\n      const isLeftNode = node.position === 'left'\n      const buffers = []\n      buffers.push(hash)\n      buffers[isLeftNode ? 'unshift' : 'push'](node.data)\n\n      hash = this.hashAlgo(Buffer.concat(buffers))\n    }\n\n    return Buffer.compare(hash, root) === 0\n  }\n}\n\nconst bufferify = (f: (input: any) => any) => {\n  return (x: any) => {\n    const v = f(x)\n    if (Buffer.isBuffer(v)) {\n      return v\n    }\n\n    // crypto-js support\n    return Buffer.from(f(CryptoJS.enc.Hex.parse(x.toString('hex'))).toString(CryptoJS.enc.Hex), 'hex')\n  }\n}\n","export interface IMerkleProofShare {\n  position: 'left' | 'right'\n  data: string\n}\n\nexport interface IProof {\n  position: 'left' | 'right'\n  data: Buffer\n}\n\nexport type Stage = 'mainnet' | 'rinkeby' | 'ropsten' | 'local'\n\nexport enum ChainId {\n  Main = 1,\n  Rinkeby = 4,\n}\n\nexport interface ITypedDataParam {\n  name: string\n  type: string\n}\n\nexport interface IFormattedTypedData {\n  types: {\n    EIP712Domain: ITypedDataParam[]\n    [key: string]: ITypedDataParam[]\n  }\n  primaryType: string\n  domain: {\n    name: string\n    version: string\n    chainId: number\n    verifyingContract: string\n  }\n  message: {[key: string]: string}\n}\n","// A type of promise-like that resolves synchronously and supports only one observer\nexport const _Pact = /*#__PURE__*/(function() {\n\tfunction _Pact() {}\n\t_Pact.prototype.then = function(onFulfilled, onRejected) {\n\t\tconst result = new _Pact();\n\t\tconst state = this.s;\n\t\tif (state) {\n\t\t\tconst callback = state & 1 ? onFulfilled : onRejected;\n\t\t\tif (callback) {\n\t\t\t\ttry {\n\t\t\t\t\t_settle(result, 1, callback(this.v));\n\t\t\t\t} catch (e) {\n\t\t\t\t\t_settle(result, 2, e);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\tthis.o = function(_this) {\n\t\t\ttry {\n\t\t\t\tconst value = _this.v;\n\t\t\t\tif (_this.s & 1) {\n\t\t\t\t\t_settle(result, 1, onFulfilled ? onFulfilled(value) : value);\n\t\t\t\t} else if (onRejected) {\n\t\t\t\t\t_settle(result, 1, onRejected(value));\n\t\t\t\t} else {\n\t\t\t\t\t_settle(result, 2, value);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(result, 2, e);\n\t\t\t}\n\t\t};\n\t\treturn result;\n\t}\n\treturn _Pact;\n})();\n\n// Settles a pact synchronously\nexport function _settle(pact, state, value) {\n\tif (!pact.s) {\n\t\tif (value instanceof _Pact) {\n\t\t\tif (value.s) {\n\t\t\t\tif (state & 1) {\n\t\t\t\t\tstate = value.s;\n\t\t\t\t}\n\t\t\t\tvalue = value.v;\n\t\t\t} else {\n\t\t\t\tvalue.o = _settle.bind(null, pact, state);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (value && value.then) {\n\t\t\tvalue.then(_settle.bind(null, pact, state), _settle.bind(null, pact, 2));\n\t\t\treturn;\n\t\t}\n\t\tpact.s = state;\n\t\tpact.v = value;\n\t\tconst observer = pact.o;\n\t\tif (observer) {\n\t\t\tobserver(pact);\n\t\t}\n\t}\n}\n\nexport function _isSettledPact(thenable) {\n\treturn thenable instanceof _Pact && thenable.s & 1;\n}\n\n// Converts argument to a function that always returns a Promise\nexport function _async(f) {\n\treturn function() {\n\t\tfor (var args = [], i = 0; i < arguments.length; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\t\ttry {\n\t\t\treturn Promise.resolve(f.apply(this, args));\n\t\t} catch(e) {\n\t\t\treturn Promise.reject(e);\n\t\t}\n\t}\n}\n\n// Awaits on a value that may or may not be a Promise (equivalent to the await keyword in ES2015, with continuations passed explicitly)\nexport function _await(value, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(value) : value;\n\t}\n\tif (!value || !value.then) {\n\t\tvalue = Promise.resolve(value);\n\t}\n\treturn then ? value.then(then) : value;\n}\n\n// Awaits on a value that may or may not be a Promise, then ignores it\nexport function _awaitIgnored(value, direct) {\n\tif (!direct) {\n\t\treturn value && value.then ? value.then(_empty) : Promise.resolve();\n\t}\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continue(value, then) {\n\treturn value && value.then ? value.then(then) : then(value);\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continueIgnored(value) {\n\tif (value && value.then) {\n\t\treturn value.then(_empty);\n\t}\n}\n\n// Asynchronously iterate through an object that has a length property, passing the index as the first argument to the callback (even as the length property changes)\nexport function _forTo(array, body, check) {\n\tvar i = -1, pact, reject;\n\tfunction _cycle(result) {\n\t\ttry {\n\t\t\twhile (++i < array.length && (!check || !check())) {\n\t\t\t\tresult = body(i);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pact) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t} else {\n\t\t\t\tpact = result;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t}\n\t}\n\t_cycle();\n\treturn pact;\n}\n\n// Asynchronously iterate through an object's properties (including properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forIn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tkeys.push(key);\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\n// Asynchronously iterate through an object's own properties (excluding properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forOwn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tif (Object.prototype.hasOwnProperty.call(target, key)) {\n\t\t\tkeys.push(key);\n\t\t}\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\nexport const _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\n// Asynchronously iterate through an object's values\n// Uses for...of if the runtime supports it, otherwise iterates until length on a copy\nexport function _forOf(target, body, check) {\n\tif (typeof target[_iteratorSymbol] === \"function\") {\n\t\tvar iterator = target[_iteratorSymbol](), step, pact, reject;\n\t\tfunction _cycle(result) {\n\t\t\ttry {\n\t\t\t\twhile (!(step = iterator.next()).done && (!check || !check())) {\n\t\t\t\t\tresult = body(step.value);\n\t\t\t\t\tif (result && result.then) {\n\t\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pact) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t} else {\n\t\t\t\t\tpact = result;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t\t}\n\t\t}\n\t\t_cycle();\n\t\tif (iterator.return) {\n\t\t\tvar _fixup = function(value) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!step.done) {\n\t\t\t\t\t\titerator.return();\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tif (pact && pact.then) {\n\t\t\t\treturn pact.then(_fixup, function(e) {\n\t\t\t\t\tthrow _fixup(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\t_fixup();\n\t\t}\n\t\treturn pact;\n\t}\n\t// No support for Symbol.iterator\n\tif (!(\"length\" in target)) {\n\t\tthrow new TypeError(\"Object is not iterable\");\n\t}\n\t// Handle live collections properly\n\tvar values = [];\n\tfor (var i = 0; i < target.length; i++) {\n\t\tvalues.push(target[i]);\n\t}\n\treturn _forTo(values, function(i) { return body(values[i]); }, check);\n}\n\nexport const _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously iterate on a value using it's async iterator if present, or its synchronous iterator if missing\nexport function _forAwaitOf(target, body, check) {\n\tif (typeof target[_asyncIteratorSymbol] === \"function\") {\n\t\tvar pact = new _Pact();\n\t\tvar iterator = target[_asyncIteratorSymbol]();\n\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\treturn pact;\n\t\tfunction _resumeAfterBody(result) {\n\t\t\tif (check && check()) {\n\t\t\t\treturn _settle(pact, 1, iterator.return ? iterator.return().then(function() { return result; }) : result);\n\t\t\t}\n\t\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\t}\n\t\tfunction _resumeAfterNext(step) {\n\t\t\tif (step.done) {\n\t\t\t\t_settle(pact, 1);\n\t\t\t} else {\n\t\t\t\tPromise.resolve(body(step.value)).then(_resumeAfterBody).then(void 0, _reject);\n\t\t\t}\n\t\t}\n\t\tfunction _reject(error) {\n\t\t\t_settle(pact, 2, iterator.return ? iterator.return().then(function() { return error; }) : error);\n\t\t}\n\t}\n\treturn Promise.resolve(_forOf(target, function(value) { return Promise.resolve(value).then(body); }, check));\n}\n\n// Asynchronously implement a generic for loop\nexport function _for(test, update, body) {\n\tvar stage;\n\tfor (;;) {\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t\tif (shouldContinue.then) {\n\t\t\tstage = 0;\n\t\t\tbreak;\n\t\t}\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.s;\n\t\t\t} else {\n\t\t\t\tstage = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tvar updateValue = update();\n\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\tstage = 2;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tvar pact = new _Pact();\n\tvar reject = _settle.bind(null, pact, 2);\n\t(stage === 0 ? shouldContinue.then(_resumeAfterTest) : stage === 1 ? result.then(_resumeAfterBody) : updateValue.then(_resumeAfterUpdate)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tdo {\n\t\t\tif (update) {\n\t\t\t\tupdateValue = update();\n\t\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\t\tupdateValue.then(_resumeAfterUpdate).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tshouldContinue = test();\n\t\t\tif (!shouldContinue || (_isSettledPact(shouldContinue) && !shouldContinue.v)) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t}\n\t\t} while (!result || !result.then);\n\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterBody(result);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n\tfunction _resumeAfterUpdate() {\n\t\tif (shouldContinue = test()) {\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterTest(shouldContinue);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a do ... while loop\nexport function _do(body, test) {\n\tvar awaitBody;\n\tdo {\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t} else {\n\t\t\t\tawaitBody = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t} while (!shouldContinue.then);\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : shouldContinue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tfor (;;) {\n\t\t\tshouldContinue = test();\n\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t}\n\t\t\tif (!shouldContinue) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\tresult = result.v;\n\t\t\t\t} else {\n\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tdo {\n\t\t\t\tresult = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshouldContinue = test();\n\t\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t\t}\n\t\t\t\tif (!shouldContinue) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} while (!shouldContinue.then);\n\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a switch statement\nexport function _switch(discriminant, cases) {\n\tvar dispatchIndex = -1;\n\tvar awaitBody;\n\touter: {\n\t\tfor (var i = 0; i < cases.length; i++) {\n\t\t\tvar test = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvar testValue = test();\n\t\t\t\tif (testValue && testValue.then) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tif (testValue === discriminant) {\n\t\t\t\t\tdispatchIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Found the default case, set it as the pending dispatch case\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tif (dispatchIndex !== -1) {\n\t\t\tdo {\n\t\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\t\twhile (!body) {\n\t\t\t\t\tdispatchIndex++;\n\t\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t\t}\n\t\t\t\tvar result = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tawaitBody = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\t\tdispatchIndex++;\n\t\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t\treturn result;\n\t\t}\n\t}\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : testValue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterTest(value) {\n\t\tfor (;;) {\n\t\t\tif (value === discriminant) {\n\t\t\t\tdispatchIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (++i === cases.length) {\n\t\t\t\tif (dispatchIndex !== -1) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvalue = test();\n\t\t\t\tif (value && value.then) {\n\t\t\t\t\tvalue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tdo {\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tvar result = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tdispatchIndex++;\n\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterBody(result) {\n\t\tfor (;;) {\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tif (!fallthroughCheck || fallthroughCheck()) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdispatchIndex++;\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _call(body, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(body()) : body();\n\t}\n\ttry {\n\t\tvar result = Promise.resolve(body());\n\t\treturn then ? result.then(then) : result;\n\t} catch (e) {\n\t\treturn Promise.reject(e);\n\t}\n}\n\n// Asynchronously call a function and swallow the result\nexport function _callIgnored(body, direct) {\n\treturn _call(body, _empty, direct);\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _invoke(body, then) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(then);\n\t}\n\treturn then(result);\n}\n\n// Asynchronously call a function and swallow the result\nexport function _invokeIgnored(body) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(_empty);\n\t}\n}\n\n// Asynchronously call a function and send errors to recovery continuation\nexport function _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\n// Asynchronously await a promise and pass the result to a finally continuation\nexport function _finallyRethrows(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer(true, e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer.bind(null, false), finalizer.bind(null, true));\n\t}\n\treturn finalizer(false, result);\n}\n\n// Asynchronously await a promise and invoke a finally continuation that always overrides the result\nexport function _finally(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer();\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer, finalizer);\n\t}\n\treturn finalizer();\n}\n\n// Rethrow or return a value from a finally continuation\nexport function _rethrow(thrown, value) {\n\tif (thrown)\n\t\tthrow value;\n\treturn value;\n}\n\n// Empty function to implement break and other control flow that ignores asynchronous results\nexport function _empty() {\n}\n\n// Sentinel value for early returns in generators \nexport const _earlyReturn = /*#__PURE__*/ {};\n\n// Asynchronously call a function and send errors to recovery continuation, skipping early returns\nexport function _catchInGenerator(body, recover) {\n\treturn _catch(body, function(e) {\n\t\tif (e === _earlyReturn) {\n\t\t\tthrow e;\n\t\t}\n\t\treturn recover(e);\n\t});\n}\n\n// Asynchronous generator class; accepts the entrypoint of the generator, to which it passes itself when the generator should start\nexport const _AsyncGenerator = /*#__PURE__*/(function() {\n\tfunction _AsyncGenerator(entry) {\n\t\tthis._entry = entry;\n\t\tthis._pact = null;\n\t\tthis._resolve = null;\n\t\tthis._return = null;\n\t\tthis._promise = null;\n\t}\n\n\tfunction _wrapReturnedValue(value) {\n\t\treturn { value: value, done: true };\n\t}\n\tfunction _wrapYieldedValue(value) {\n\t\treturn { value: value, done: false };\n\t}\n\n\t_AsyncGenerator.prototype._yield = function(value) {\n\t\t// Yield the value to the pending next call\n\t\tthis._resolve(value && value.then ? value.then(_wrapYieldedValue) : _wrapYieldedValue(value));\n\t\t// Return a pact for an upcoming next/return/throw call\n\t\treturn this._pact = new _Pact();\n\t};\n\t_AsyncGenerator.prototype.next = function(value) {\n\t\t// Advance the generator, starting it if it has yet to be started\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tconst _entry = _this._entry;\n\t\t\t\tif (_entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the next call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Start the generator\n\t\t\t\t_this._entry = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\tfunction returnValue(value) {\n\t\t\t\t\t_this._resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t_this._resolve = null;\n\t\t\t\t}\n\t\t\t\tvar result = _entry(_this);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tresult.then(returnValue, function(error) {\n\t\t\t\t\t\tif (error === _earlyReturn) {\n\t\t\t\t\t\t\treturnValue(_this._return);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst pact = new _Pact();\n\t\t\t\t\t\t\t_this._resolve(pact);\n\t\t\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t\t\t_this._resolve = null;\n\t\t\t\t\t\t\t_resolve(pact, 2, error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturnValue(result);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Generator is started and a yield expression is pending, settle it\n\t\t\t\t_this._pact = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\t_settle(_pact, 1, value);\n\t\t\t}\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.return = function(value) {\n\t\t// Early return from the generator if started, otherwise abandons the generator\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the return call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return the specified value\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t}\n\t\t\t// Settle the yield expression with a rejected \"early return\" value\n\t\t\t_this._return = value;\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, _earlyReturn);\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.throw = function(error) {\n\t\t// Inject an exception into the pending yield expression\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve, reject) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the throw call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return a rejected Promise containing the error\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn reject(error);\n\t\t\t}\n\t\t\t// Settle the yield expression with the value as a rejection\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, error);\n\t\t});\n\t};\n\n\t_AsyncGenerator.prototype[_asyncIteratorSymbol] = function() {\n\t\treturn this;\n\t};\n\t\n\treturn _AsyncGenerator;\n})();\n","/**\n * Copyright (c) 2017, Dirk-Jan Rutten\n * All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree:\n * https://github.com/excitement-engineer/graphql-iso-date\n *\n */\n\n// Check whether a certain year is a leap year.\n//\n// Every year that is exactly divisible by four\n// is a leap year, except for years that are exactly\n// divisible by 100, but these centurial years are\n// leap years if they are exactly divisible by 400.\n// For example, the years 1700, 1800, and 1900 are not leap years,\n// but the years 1600 and 2000 are.\n//\nconst leapYear = (year: number): boolean => {\n  return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0\n}\n\n// Function that checks whether a time-string is RFC 3339 compliant.\n//\n// It checks whether the time-string is structured in one of the\n// following formats:\n//\n// - hh:mm:ssZ\n// - hh:mm:ss±hh:mm\n// - hh:mm:ss.*sZ\n// - hh:mm:ss.*s±hh:mm\n//\n// Where *s is a fraction of seconds with at least 1 digit.\n//\n// Note, this validator assumes that all minutes have\n// 59 seconds. This assumption does not follow RFC 3339\n// which includes leap seconds (in which case it is possible that\n// there are 60 seconds in a minute).\n//\n// Leap seconds are ignored because it adds complexity in\n// the following areas:\n// - The native Javascript Date ignores them; i.e. Date.parse('1972-12-31T23:59:60Z')\n//   equals NaN.\n// - Leap seconds cannot be known in advance.\n//\nexport const validateTime = (time: string): boolean => {\n  // tslint:disable-next-line:max-line-length\n  const TIME_REGEX = /^([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])(\\.\\d{1,})?(([Z])|([+|-]([01][0-9]|2[0-3]):[0-5][0-9]))$/\n  return TIME_REGEX.test(time)\n}\n\n// Function that checks whether a date-string is RFC 3339 compliant.\n//\n// It checks whether the date-string is a valid date in the YYYY-MM-DD.\n//\n// Note, the number of days in each date are determined according to the\n// following lookup table:\n//\n// Month Number  Month/Year           Maximum value of date-mday\n// ------------  ----------           --------------------------\n// 01            January              31\n// 02            February, normal     28\n// 02            February, leap year  29\n// 03            March                31\n// 04            April                30\n// 05            May                  31\n// 06            June                 30\n// 07            July                 31\n// 08            August               31\n// 09            September            30\n// 10            October              31\n// 11            November             30\n// 12            December             31\n//\nexport const validateDate = (datestring: string): boolean => {\n  const RFC_3339_REGEX = /^(\\d{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01]))$/\n\n  if (!RFC_3339_REGEX.test(datestring)) {\n    return false\n  }\n\n  // Verify the correct number of days for\n  // the month contained in the date-string.\n  const year = Number(datestring.substr(0, 4))\n  const month = Number(datestring.substr(5, 2))\n  const day = Number(datestring.substr(8, 2))\n\n  switch (month) {\n    case 2: // February\n      if (leapYear(year) && day > 29) {\n        return false\n      } else if (!leapYear(year) && day > 28) {\n        return false\n      }\n      return true\n    case 4: // April\n    case 6: // June\n    case 9: // September\n    case 11: // November\n      if (day > 30) {\n        return false\n      }\n      break\n    default:\n      break\n  }\n\n  return true\n}\n\n// Function that checks whether a date-time-string is RFC 3339 compliant.\n//\n// It checks whether the time-string is structured in one of the\n//\n// - YYYY-MM-DDThh:mm:ssZ\n// - YYYY-MM-DDThh:mm:ss±hh:mm\n// - YYYY-MM-DDThh:mm:ss.*sZ\n// - YYYY-MM-DDThh:mm:ss.*s±hh:mm\n//\n// Where *s is a fraction of seconds with at least 1 digit.\n//\nexport const validateDateTime = (dateTimeString: string): boolean => {\n  // tslint:disable-next-line:max-line-length\n  const RFC_3339_REGEX = /^(\\d{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60))(\\.\\d{1,})?(([Z])|([+|-]([01][0-9]|2[0-3]):[0-5][0-9]))$/\n\n  // Validate the structure of the date-string\n  if (!RFC_3339_REGEX.test(dateTimeString)) {\n    return false\n  }\n\n  // Check if it is a correct date using the javascript Date parse() method.\n  const time = Date.parse(dateTimeString)\n  // eslint-disable-next-line\n  if (time !== time) {\n    return false\n  }\n  // Split the date-time-string up into the string-date and time-string part.\n  // and check whether these parts are RFC 3339 compliant.\n  const index = dateTimeString.indexOf('T')\n  const dateString = dateTimeString.substr(0, index)\n  const timeString = dateTimeString.substr(index + 1)\n  return validateDate(dateString) && validateTime(timeString)\n}\n","import {validateDateTime} from './RFC3339DateTime'\nimport {Validator, ValidateFn, AsyncValidateFn, AsyncValidator, Unvalidated} from './validation'\n\nexport const isValid = <T>(valideFn: ValidateFn<T>) => (data: Unvalidated<T>): data is T => {\n  const outcome = valideFn(data)\n\n  if (outcome.kind === 'validated') {\n    return true\n  } else {\n    console.log(outcome.message, data)\n    return false\n  }\n}\n\nexport const isAsyncValid = <T>(valideFn: AsyncValidateFn<T>) => async (data: Unvalidated<T>): Promise<boolean> => {\n  const outcome = await valideFn(data)\n\n  if (outcome.kind === 'validated') {\n    return true\n  } else {\n    console.log(outcome.message, data)\n    return false\n  }\n}\n\nexport const isUndefinedOr = (validator: Validator) => (value: any, data: any) => {\n  if (typeof value === 'undefined') return true\n  return validator(value, data)\n}\n\nexport const isArrayOf = (validator: Validator, rejectEmpty = true): Validator => (value: any, data: any) => {\n  if (!Array.isArray(value)) return false\n  if (value.length === 0 && rejectEmpty) return false\n  return value.every(value => validator(value, data))\n}\n\nexport const isAsyncArrayOf = (validator: AsyncValidator, rejectEmpty = true): AsyncValidator => async (value: any, data: any) => {\n  if (!Array.isArray(value)) return false\n  if (value.length === 0 && rejectEmpty) return false\n\n  let outcome = true\n\n  for (const v of value) {\n    outcome = await validator(v, data)\n    if (!outcome) break\n  }\n\n  return outcome\n}\n\nexport const isNotEmptyString: Validator = (value: any) => typeof value === 'string' && value.trim() !== ''\n\nexport const isArrayOfNonEmptyStrings: Validator = isArrayOf(isNotEmptyString)\n\n/**\n * Returns the value of `JSON.stringify` of a new object argument `obj`,\n * which is a copy of `obj`, but its properties are sorted using\n * `Array<string>.sort`.\n */\nexport const orderedStringify = (obj: {[i: string]: any}) => {\n  const orderedObj: {[i: string]: any} = {}\n  Object.keys(obj)\n    .sort()\n    .map(o => (orderedObj[o] = obj[o]))\n  return JSON.stringify(orderedObj)\n}\n\nexport const isValidRFC3339DateTime: Validator = (value: any) => validateDateTime(value)\n","export type Unvalidated<T> = {[key in keyof T]?: any}\n\nexport type ValidationSuccessResponse<T> = {\n  kind: 'validated'\n  data: T\n}\n\nexport type ValidationInvalidParamResponse = {\n  kind: 'invalid_param'\n  message: string\n}\n\nexport type ValidationResponse<T> = ValidationSuccessResponse<T> | ValidationInvalidParamResponse\n\nexport type Validator = ((value: any) => boolean) | ((value: any, data: any) => boolean)\n\nexport type AsyncValidator = Validator | (((value: any) => Promise<boolean>) | ((value: any, data: any) => Promise<boolean>))\n\ntype OneOrMore<T> = T | T[]\n\nexport type Validations<T> = {\n  [k in keyof T]: OneOrMore<Validator>\n}\n\nexport type AsyncValidations<T> = {\n  [k in keyof T]: OneOrMore<AsyncValidator>\n}\n\nexport type ValidateFn<T> = (data: Unvalidated<T>) => ValidationResponse<T>\n\nexport type AsyncValidateFn<T> = (data: Unvalidated<T>) => Promise<ValidationResponse<T>>\n\nexport const genAsyncValidateFn = <T>(\n  validations: AsyncValidations<T>,\n  {required: _required}: {required?: (keyof T)[]} = {},\n): AsyncValidateFn<T> => async data => {\n  const required = _required || []\n\n  try {\n    for (let i = 0; i < Object.keys(validations).length; i++) {\n      const fieldName = Object.keys(validations)[i] as keyof T\n\n      if (required.includes(fieldName) && typeof data[fieldName] === 'undefined') {\n        throw new Error(`Missing ${fieldName}`)\n      }\n\n      const validator: AsyncValidator | AsyncValidator[] = validations[fieldName]\n      const validators: AsyncValidator[] = validator instanceof Array ? validator : [validator]\n\n      for (let i = 0; i < validators.length; i++) {\n        const fn = validators[i]\n\n        let outcome: boolean\n        try {\n          outcome = await fn(data[fieldName], data)\n        } catch {\n          throw new Error(`Error while validating ${fieldName}: ${JSON.stringify(data[fieldName])}`)\n        }\n\n        if (!outcome) {\n          throw new Error(`Invalid ${fieldName}: ${JSON.stringify(data[fieldName])}`)\n        }\n      }\n    }\n\n    return {\n      kind: 'validated',\n      data: data as T,\n    }\n  } catch (error) {\n    return {\n      kind: 'invalid_param',\n      message: error.message,\n    }\n  }\n}\n\nexport const genValidateFn = <T>(\n  validations: Validations<T>,\n  {required: _required}: {required?: (keyof T)[]} = {},\n): ValidateFn<T> => data => {\n  const required = _required || []\n\n  try {\n    Object.keys(validations).forEach(_fieldName => {\n      const fieldName = _fieldName as keyof T\n\n      if (required.includes(fieldName) && typeof data[fieldName] === 'undefined') {\n        throw new Error(`Missing ${fieldName}`)\n      }\n\n      const validator: Validator | Validator[] = validations[fieldName]\n      const validators: Validator[] = validator instanceof Array ? validator : [validator]\n\n      let outcome: boolean\n\n      try {\n        outcome = validators.every(fn => fn(data[fieldName], data))\n      } catch {\n        throw new Error(`Error while validating ${fieldName}: ${JSON.stringify(data[fieldName])}`)\n      }\n\n      if (!outcome) throw new Error(`Invalid ${fieldName}: ${JSON.stringify(data[fieldName])}`)\n    })\n  } catch (error) {\n    return {\n      kind: 'invalid_param',\n      message: error.message,\n    }\n  }\n\n  return {\n    kind: 'validated',\n    data: data as T,\n  }\n}\n","import {keccak256} from 'js-sha3'\nimport * as ethUtil from 'ethereumjs-util'\nimport randomBytes from 'randombytes'\nimport * as ethSigUtil from 'eth-sig-util'\nimport EthWallet from 'ethereumjs-wallet'\nimport {\n  IDidResolver,\n  IDidResolveResult,\n  DidDocument,\n  IDidDocument,\n  IDidDocumentPublicKey,\n} from '@decentralized-identity/did-common-typescript'\n\nimport {MerkleTree} from './merkletreejs'\nimport {\n  IIssuedClaimNode,\n  ISignedClaimNode,\n  IAttestationNode,\n  IAttestationLegacy,\n  IClaimNode,\n  IBloomMerkleTreeComponentsLegacy,\n  IBloomMerkleTreeComponents,\n  IBloomBatchMerkleTreeComponents,\n  IDataNodeLegacy,\n  IFormattedTypedData,\n  IProof,\n  AttestationTypeID,\n} from './types'\nimport {orderedStringify, isNotEmptyString} from './utils'\nimport {validateDateTime} from './RFC3339DateTime'\nimport {genValidateFn} from './validation'\n\nexport const hashMessage = (message: string): string => ethUtil.addHexPrefix(keccak256(message))\n\n/**\n * Generate a random hex string with 0x prefix\n */\nexport const generateNonce = () => hashMessage(randomBytes(20).toString())\n\nexport const getMerkleTreeFromLeaves = (leaves: string[]) => {\n  const leavesSorted = leaves.sort().map(hexStr => ethUtil.toBuffer(hexStr))\n  return new MerkleTree(leavesSorted, x => Buffer.from(keccak256(x), 'hex'))\n}\n\n/**\n *\n * @param attestation Given the contents of an attestation node, return a\n * Merkle tree\n */\nexport const getClaimTree = (claim: IIssuedClaimNode): MerkleTree => {\n  const dataHash = hashMessage(orderedStringify(claim.data))\n  const typeHash = hashMessage(orderedStringify(claim.type))\n  const issuanceHash = hashMessage(orderedStringify(claim.issuance))\n  const auxHash = hashMessage(claim.aux)\n  return getMerkleTreeFromLeaves([dataHash, typeHash, issuanceHash, auxHash])\n}\n\n/**\n * Given the contents of an attestation node, return the root hash of the Merkle tree\n */\nexport const hashClaimTree = (claim: IIssuedClaimNode): Buffer => {\n  const dataTree = getClaimTree(claim)\n  return dataTree.getRoot()\n}\n\n/**\n * Sign a buffer with a given private key and return a hex string of the signature\n * @param hash Any message buffer\n * @param privKey A private key buffer\n */\nexport const signHash = (hash: Buffer, privKey: Buffer): string => {\n  const sig = ethUtil.ecsign(hash, privKey)\n  return ethSigUtil.concatSig(sig.v, sig.r, sig.s)\n}\n\n/**\n * Recover the address of the signer of a given message hash\n * @param hash Buffer of the message that was signed\n * @param sig Hex string of the signature\n */\nexport const recoverHashSigner = (hash: Buffer, signature: string) => {\n  const sigParams = ethUtil.fromRpcSig(signature)\n  const pubKey = ethUtil.ecrecover(hash, sigParams.v, sigParams.r, sigParams.s)\n  const sender = ethUtil.publicToAddress(ethUtil.toBuffer(pubKey))\n  return ethUtil.bufferToHex(sender)\n}\n/**\n * Sign a complete attestation node and return an object containing the datanode and the signature\n * @param dataNode - Complete attestation data node\n * @param globalRevocationLink - Hex string referencing revocation of the whole attestation\n * @param privKey - Private key of signer\n */\nexport const getSignedClaimNode = (\n  claimNode: IClaimNode,\n  globalRevocationLink: string,\n  privKey: Buffer,\n  issuanceDate: string,\n  expirationDate: string,\n  localRevocationLink?: string,\n): ISignedClaimNode => {\n  // validateDates\n  if (!validateDateTime(issuanceDate)) throw new Error('Invalid issuance date')\n  if (!validateDateTime(expirationDate)) {\n    throw new Error('Invalid expiration date')\n  }\n  const issuedClaimNode: IIssuedClaimNode = {\n    data: claimNode.data,\n    type: claimNode.type,\n    aux: claimNode.aux,\n    issuance: {\n      localRevocationToken: localRevocationLink || generateNonce(),\n      globalRevocationToken: globalRevocationLink,\n      dataHash: hashMessage(orderedStringify(claimNode.data)),\n      typeHash: hashMessage(orderedStringify(claimNode.type)),\n      issuanceDate: issuanceDate,\n      expirationDate: expirationDate,\n    },\n  }\n  const claimHash = hashClaimTree(issuedClaimNode)\n  const attesterSig = signHash(claimHash, privKey)\n  const attester = EthWallet.fromPrivateKey(privKey)\n  return {\n    claimNode: issuedClaimNode,\n    attester: attester.getAddressString(),\n    attesterSig: attesterSig,\n  }\n}\n\n/**\n *\n * @param attestation Given the contents of an attestation node, return a\n * Merkle tree\n */\nexport const getDataTree = (attestation: IAttestationNode): MerkleTree => {\n  const dataHash = hashMessage(orderedStringify(attestation.data))\n  const typeHash = hashMessage(orderedStringify(attestation.type))\n  const linkHash = hashMessage(orderedStringify(attestation.link))\n  const auxHash = hashMessage(attestation.aux)\n  return getMerkleTreeFromLeaves([dataHash, typeHash, linkHash, auxHash])\n}\n\n/**\n * Given the contents of an attestation node, return the root hash of the Merkle tree\n */\nexport const hashAttestationNode = (attestation: IAttestationNode): Buffer => {\n  const dataTree = getDataTree(attestation)\n  return dataTree.getRoot()\n}\n\n/**\n * Sign a complete attestation node and return an object containing the datanode and the signature\n * @param dataNode - Complete attestation data node\n * @param globalRevocationLink - Hex string referencing revocation of the whole attestation\n * @param privKey - Private key of signer\n */\nexport const getSignedDataNode = (dataNode: IAttestationLegacy, globalRevocationLink: string, privKey: Buffer): IDataNodeLegacy => {\n  const attestationNode: IAttestationNode = {\n    data: dataNode.data,\n    type: dataNode.type,\n    aux: dataNode.aux,\n    link: {\n      local: generateNonce(),\n      global: globalRevocationLink,\n      dataHash: hashMessage(orderedStringify(dataNode.data)),\n      typeHash: hashMessage(orderedStringify(dataNode.type)),\n    },\n  }\n  const attestationHash = hashAttestationNode(attestationNode)\n  const attestationSig = signHash(attestationHash, privKey)\n  return {\n    attestationNode: attestationNode,\n    signedAttestation: attestationSig,\n  }\n}\n\n/**\n *\n * Methods supporting both current and legacy data structures\n */\n\n/**\n * Given an array of hashed dataNode signatures and a hashed checksum signature, creates a new MerkleTree\n * after padding, and sorting.\n *\n */\nexport const getBloomMerkleTree = (claimHashes: string[], paddingNodes: string[], checksumHash: string): MerkleTree => {\n  let leaves = claimHashes\n  leaves.push(checksumHash)\n  leaves = leaves.concat(paddingNodes)\n  return getMerkleTreeFromLeaves(leaves)\n}\n\n/**\n * Given an array of root hashes, sort and hash them into a checksum buffer\n * @param {string[]} dataHashes - array of dataHashes as hex strings\n */\nexport const getChecksum = (dataHashes: string[]): Buffer => {\n  return ethUtil.toBuffer(hashMessage(JSON.stringify(dataHashes.sort())))\n}\n\n/**\n * Given an array of root hashes, get and sign the checksum\n * @param dataHashes - array of dataHashes as hex strings\n * @param privKey - private key of signer\n */\nexport const signChecksum = (dataHashes: string[], privKey: Buffer): string => {\n  return signHash(getChecksum(dataHashes), privKey)\n}\n\n/**\n * Given the number of data nodes return an array of padding nodes\n * @param {number} dataCount - number of data nodes in tree\n *\n * A Bloom Merkle tree will contain at minimum one data node and one checksum node\n * In order to obscure the amount of data in the tree, the number of nodes are padded to\n * a set threshold\n *\n * The Depth of the tree increments in steps of 5\n * The number of terminal nodes in a filled binary tree is 2 ^ (n - 1) where n is the depth\n *\n * dataCount 1 -> 15: paddingCount: 14 -> 0 (remeber + 1 for checksum node)\n * dataCount 16 -> 511: paddingCount 495 -> 0\n * dataCount 512 -> ...: paddingCount 15871 -> ...\n * ...\n */\nexport const getPadding = (dataCount: number): string[] => {\n  if (dataCount < 1) return []\n  let i = 5\n  while (dataCount + 1 > 2 ** (i - 1)) {\n    i += 5\n  }\n  const paddingCount = 2 ** (i - 1) - (dataCount + 1)\n\n  return Array(paddingCount)\n    .fill('')\n    .map(() => hashMessage(randomBytes(20).toString()))\n}\n/**\n * Given attestation data and the attester's private key, construct the entire Bloom Merkle tree\n * and return the components needed to generate proofs\n * @param claimNodes - Complete attestation nodes\n * @param privKey - Attester private key\n */\nexport const getSignedMerkleTreeComponents = (\n  claimNodes: IClaimNode[],\n  issuanceDate: string,\n  expirationDate: string,\n  privKey: Buffer,\n  opts?: {\n    paddingNodes?: string[]\n    localRevocationLinks?: string[]\n    globalRevocationLink?: string\n    rootHashNonce?: string\n  },\n): IBloomMerkleTreeComponents => {\n  const globalRevocationLink = (opts && opts.globalRevocationLink) || generateNonce()\n  const signedClaimNodes: ISignedClaimNode[] = claimNodes.map((a, i) => {\n    return getSignedClaimNode(\n      a,\n      globalRevocationLink,\n      privKey,\n      issuanceDate,\n      expirationDate,\n      opts && opts.localRevocationLinks ? opts.localRevocationLinks[i] : undefined,\n    )\n  })\n  const attesterClaimSigHashes = signedClaimNodes.map(a => hashMessage(a.attesterSig))\n\n  const paddingNodes = (opts && opts.paddingNodes) || getPadding(attesterClaimSigHashes.length)\n  const signedChecksum = signChecksum(attesterClaimSigHashes, privKey)\n  const signedChecksumHash = hashMessage(signedChecksum)\n  const rootHash = getBloomMerkleTree(attesterClaimSigHashes, paddingNodes, signedChecksumHash).getRoot()\n  const signedRootHash = signHash(rootHash, privKey)\n  const rootHashNonce = (opts && opts.rootHashNonce) || generateNonce()\n  const layer2Hash = hashMessage(\n    orderedStringify({\n      rootHash: ethUtil.bufferToHex(rootHash),\n      nonce: rootHashNonce,\n    }),\n  )\n  const attester = EthWallet.fromPrivateKey(privKey)\n  return {\n    attester: attester.getAddressString(),\n    layer2Hash: layer2Hash,\n    attesterSig: signedRootHash,\n    rootHashNonce: rootHashNonce,\n    rootHash: ethUtil.bufferToHex(rootHash),\n    claimNodes: signedClaimNodes,\n    checksumSig: signedChecksum,\n    paddingNodes: paddingNodes,\n    version: 'Attestation-Tree-2.0.0',\n  }\n}\n\n/**\n * Given attestation data and the attester's private key, construct the entire Bloom Merkle tree\n * and return the components needed to generate proofs\n * @param claimNodes - Complete attestation nodes\n * @param privKey - Attester private key\n */\n/**\n * Given attestation data and the attester's private key, construct the entire Bloom Merkle tree\n * and return the components needed to generate proofs\n * @param dataNodes - Complete attestation nodes\n * @param privKey - Attester private key\n */\nexport const getSignedMerkleTreeComponentsLegacy = (dataNodes: IAttestationLegacy[], privKey: Buffer): IBloomMerkleTreeComponentsLegacy => {\n  const globalRevocationLink = generateNonce()\n  const signedDataNodes: IDataNodeLegacy[] = dataNodes.map(a => {\n    return getSignedDataNode(a, globalRevocationLink, privKey)\n  })\n  const signedDataHashes = signedDataNodes.map(a => hashMessage(a.signedAttestation))\n\n  const paddingNodes = getPadding(signedDataHashes.length)\n  const signedChecksum = signChecksum(signedDataHashes, privKey)\n  const signedChecksumHash = hashMessage(signedChecksum)\n  const rootHash = getBloomMerkleTree(signedDataHashes, paddingNodes, signedChecksumHash).getRoot()\n  const signedRootHash = signHash(rootHash, privKey)\n  const rootHashNonce = generateNonce()\n  const layer2Hash = hashMessage(\n    orderedStringify({\n      rootHash: ethUtil.bufferToHex(rootHash),\n      nonce: rootHashNonce,\n    }),\n  )\n  return {\n    layer2Hash: layer2Hash,\n    signedRootHash: signedRootHash,\n    rootHashNonce: rootHashNonce,\n    rootHash: ethUtil.bufferToHex(rootHash),\n    dataNodes: signedDataNodes,\n    checksumSig: signedChecksum,\n    paddingNodes: paddingNodes,\n  }\n}\n\nexport const getMerkleTreeFromComponentsLegacy = (components: IBloomMerkleTreeComponentsLegacy): MerkleTree => {\n  const signedDataHashes = components.dataNodes.map(a => hashMessage(a.signedAttestation))\n  return getBloomMerkleTree(signedDataHashes, components.paddingNodes, hashMessage(components.checksumSig))\n}\n\nexport const getMerkleTreeFromComponents = (components: IBloomMerkleTreeComponents | IBloomBatchMerkleTreeComponents): MerkleTree => {\n  const signedDataHashes = components.claimNodes.map(a => hashMessage(a.attesterSig))\n  return getBloomMerkleTree(signedDataHashes, components.paddingNodes, hashMessage(components.checksumSig))\n}\n\n/**\n * verify\n * @desc Returns true if the proof path (array of hashes) can connect the target node\n * to the Merkle root.\n * @param {Object[]} proof - Array of proof objects that should connect\n * target node to Merkle root.\n * @param {Buffer} targetNode - Target node Buffer\n * @param {Buffer} root - Merkle root Buffer\n * @return {Boolean}\n * @example\n * const root = tree.getRoot()\n * const proof = tree.getProof(leaves[2])\n * const verified = tree.verify(proof, leaves[2], root)\n *\n * standalone verify function taken from https://github.com/miguelmota/merkletreejs\n */\nexport const verifyMerkleProof = (proof: IProof[], targetNode: Buffer, root: Buffer): boolean => {\n  // Should not succeed with all empty arguments\n  // Proof can be empty if single leaf tree\n  if (targetNode.toString() === '' || root.toString() === '') {\n    return false\n  }\n\n  // Initialize hash with only targetNode data\n  let hash = targetNode\n\n  // Build hash using each component of proof until the root node\n  proof.forEach(node => {\n    const isLeftNode = node.position === 'left'\n    const buffers = [hash]\n    buffers[isLeftNode ? 'unshift' : 'push'](node.data)\n    hash = Buffer.from(keccak256(Buffer.concat(buffers)), 'hex')\n  })\n\n  return Buffer.compare(hash, root) === 0\n}\n\nexport const getAttestationAgreement = (\n  contractAddress: string,\n  chainId: number,\n  dataHash: string,\n  requestNonce: string,\n): IFormattedTypedData => {\n  return {\n    types: {\n      EIP712Domain: [\n        {name: 'name', type: 'string'},\n        {name: 'version', type: 'string'},\n        {name: 'chainId', type: 'uint256'},\n        {name: 'verifyingContract', type: 'address'},\n      ],\n      AttestationRequest: [\n        {name: 'dataHash', type: 'bytes32'},\n        {name: 'nonce', type: 'bytes32'},\n      ],\n    },\n    primaryType: 'AttestationRequest',\n    domain: {\n      name: 'Bloom Attestation Logic',\n      version: '2',\n      chainId: chainId,\n      verifyingContract: contractAddress,\n    },\n    message: {\n      dataHash: dataHash,\n      nonce: requestNonce,\n    },\n  }\n}\n\nexport const validateSignedAgreement = (subjectSig: string, contractAddress: string, dataHash: string, nonce: string, subject: string) => {\n  const recoveredEthAddress = ethSigUtil.recoverTypedSignature({\n    data: getAttestationAgreement(contractAddress, 1, dataHash, nonce),\n    sig: subjectSig,\n  })\n  return recoveredEthAddress.toLowerCase() === subject.toLowerCase()\n}\n\nexport const getSignedBatchMerkleTreeComponents = (\n  components: IBloomMerkleTreeComponents,\n  contractAddress: string,\n  subjectSig: string,\n  subject: string,\n  requestNonce: string,\n  privKey: Buffer,\n): IBloomBatchMerkleTreeComponents => {\n  if (!validateSignedAgreement(subjectSig, contractAddress, components.layer2Hash, requestNonce, subject)) {\n    throw new Error('Invalid subject sig')\n  }\n  const batchAttesterSig = signHash(\n    ethUtil.toBuffer(\n      hashMessage(\n        orderedStringify({\n          subject: subject,\n          rootHash: components.layer2Hash,\n        }),\n      ),\n    ),\n    privKey,\n  )\n  const batchLayer2Hash = hashMessage(\n    orderedStringify({\n      attesterSig: batchAttesterSig,\n      subjectSig: subjectSig,\n    }),\n  )\n  const attester = EthWallet.fromPrivateKey(privKey)\n  return {\n    attesterSig: components.attesterSig,\n    batchAttesterSig: batchAttesterSig,\n    batchLayer2Hash: batchLayer2Hash,\n    checksumSig: components.checksumSig,\n    claimNodes: components.claimNodes,\n    contractAddress: contractAddress,\n    layer2Hash: components.layer2Hash,\n    paddingNodes: components.paddingNodes,\n    requestNonce: requestNonce,\n    rootHash: components.rootHash,\n    rootHashNonce: components.rootHashNonce,\n    attester: attester.getAddressString(),\n    subject: subject,\n    subjectSig: subjectSig,\n    version: 'Batch-Attestation-Tree-1.0.0',\n  }\n}\n\n/**\n * Validate a hex encoded signature string\n *\n * @param signatureString A signature string like \"0x123456...\"\n */\nexport const isValidSignatureString = (signatureString: string): boolean => {\n  let signature: ethUtil.ECDSASignature\n  try {\n    signature = ethUtil.fromRpcSig(signatureString)\n  } catch {\n    return false\n  }\n  const {v, r, s} = signature\n  return ethUtil.isValidSignature(v, r, s, true)\n}\n\nexport const isValidEthHexString = (hexString: string): boolean => {\n  return hexString.slice(0, 2) === '0x'\n}\n\nexport const isValidHash = (value: string) => isValidEthHexString(value) && value.length === 66\n\nexport const isArrayOfPaddingNodes = (value: any): boolean => {\n  if (!Array.isArray(value)) {\n    return false\n  }\n  if (value.length === 0) return false\n  return value.every(v => v.length === 66)\n}\n\nexport const isValidTypeString = (value: any): boolean => Object.values(AttestationTypeID).includes(value)\n\nexport const isValidRFC3339DateTime = (value: any): boolean => validateDateTime(value)\n\nexport const validateAttesterClaimSig = (attesterSig: any, params: any) => {\n  const claimHash = hashClaimTree(params.claimNode)\n  const recoveredSigner = recoverHashSigner(claimHash, attesterSig)\n  return recoveredSigner.toLowerCase() === params.attester.toLowerCase()\n}\n\nexport const validateAttesterRootSig = (attesterSig: any, params: any) => {\n  const recoveredSigner = recoverHashSigner(ethUtil.toBuffer(params.rootHash), attesterSig)\n  return recoveredSigner.toLowerCase() === params.attester.toLowerCase()\n}\n\nexport const validateBatchAttesterSig = (batchAttesterSig: any, params: any) => {\n  const recoveredSigner = recoverHashSigner(\n    ethUtil.toBuffer(\n      hashMessage(\n        orderedStringify({\n          subject: params.subject,\n          rootHash: params.layer2Hash,\n        }),\n      ),\n    ),\n    batchAttesterSig,\n  )\n  return recoveredSigner.toLowerCase() === params.attester.toLowerCase()\n}\n\nexport const validateSubjectSig = (subjectSig: string, params: any) => {\n  const recoveredSigner = ethSigUtil.recoverTypedSignature({\n    data: getAttestationAgreement(params.contractAddress, 1, params.layer2Hash, params.requestNonce),\n    sig: subjectSig,\n  })\n  return recoveredSigner.toLowerCase() === params.subject.toLowerCase()\n}\n\nexport const validateChecksumSig = (checksumSig: string, params: any) => {\n  const checksum = getChecksum(params.claimNodes.map((a: ISignedClaimNode) => hashMessage(a.attesterSig)))\n  const recoveredSigner = recoverHashSigner(checksum, checksumSig)\n  return recoveredSigner.toLowerCase() === params.attester.toLowerCase()\n}\n\nexport const validateAttestationDataNode = genValidateFn({\n  data: isNotEmptyString,\n  nonce: isNotEmptyString,\n  version: isNotEmptyString,\n})\n\nexport const validateAttestationTypeNode = genValidateFn({\n  type: [isNotEmptyString, isValidTypeString],\n  nonce: isNotEmptyString,\n})\n\nexport const validateLinkNode = genValidateFn({\n  local: isValidHash,\n  global: isValidHash,\n  dataHash: isValidHash,\n  typeHash: isValidHash,\n})\n\nexport const validateAttestationIssuanceNode = genValidateFn({\n  localRevocationToken: [isValidHash, isValidEthHexString],\n  globalRevocationToken: [isValidHash, isValidEthHexString],\n  dataHash: [isValidHash, isValidEthHexString],\n  typeHash: [isValidHash, isValidEthHexString],\n  issuanceDate: [isNotEmptyString, isValidRFC3339DateTime],\n  expirationDate: [isNotEmptyString, isValidRFC3339DateTime],\n})\n\nexport const isValidAttestationDataNode = (value: any): boolean => validateAttestationDataNode(value).kind === 'validated'\n\nexport const isValidAttestationTypeNode = (value: any): boolean => validateAttestationTypeNode(value).kind === 'validated'\n\nexport const isValidAttestationIssuanceNode = (value: any): boolean => validateAttestationIssuanceNode(value).kind === 'validated'\n\nexport const isValidLinkNode = (value: any): boolean => validateLinkNode(value).kind === 'validated'\n\nexport const validateLegacyAttestationNode = genValidateFn({\n  data: isValidAttestationDataNode,\n  type: isValidAttestationTypeNode,\n  link: isValidLinkNode,\n  aux: [isValidEthHexString, isValidHash],\n})\n\nexport const isValidLegacyAttestationNode = (value: any): boolean => validateLegacyAttestationNode(value).kind === 'validated'\n\nexport const validateIssueClaimNode = genValidateFn({\n  data: isValidAttestationDataNode,\n  type: isValidAttestationTypeNode,\n  issuance: isValidAttestationIssuanceNode,\n  aux: [isValidEthHexString, isValidHash],\n})\n\nexport const isValidIssuedClaimNode = (value: any): boolean => validateIssueClaimNode(value).kind === 'validated'\n\nexport const validateClaimNode = genValidateFn({\n  attesterSig: [isValidSignatureString, validateAttesterClaimSig],\n  claimNode: isValidIssuedClaimNode,\n})\n\nexport const isValidArrayOfClaimNodes = (value: any): boolean => {\n  if (!Array.isArray(value)) return false\n  if (value.length === 0) return false\n  return value.every(v => validateClaimNode(v).kind === 'validated')\n}\n\nexport const validateDataNodeLegacy = genValidateFn({\n  signedAttestation: isValidSignatureString,\n  // cannot validate attestation sig matches attester here. missing in data structure\n  attestationNode: isValidLegacyAttestationNode,\n})\n\nexport const isValidArrayOfLegacyDataNodes = (value: any): boolean => {\n  if (!Array.isArray(value)) return false\n  if (value.length === 0) return false\n  return value.every(v => validateDataNodeLegacy(v).kind === 'validated')\n}\n\nexport const validateBloomLegacyMerkleTreeComponents = genValidateFn({\n  layer2Hash: isValidHash,\n  signedRootHash: isValidSignatureString,\n  rootHashNonce: isValidHash,\n  rootHash: isValidHash,\n  dataNodes: isValidArrayOfLegacyDataNodes,\n  checksumSig: isValidSignatureString,\n  paddingNodes: isArrayOfPaddingNodes,\n})\n\nexport const validateBloomMerkleTreeComponents = genValidateFn({\n  attesterSig: [isValidSignatureString, validateAttesterRootSig],\n  checksumSig: [isValidSignatureString, validateChecksumSig],\n  claimNodes: isValidArrayOfClaimNodes,\n  layer2Hash: [isValidEthHexString, isValidHash],\n  paddingNodes: isArrayOfPaddingNodes,\n  rootHash: [isValidEthHexString, isValidHash],\n  rootHashNonce: [isValidHash, isValidEthHexString],\n  version: isNotEmptyString,\n})\n\nexport const validateBloomBatchMerkleTreeComponents = genValidateFn({\n  attesterSig: [isValidSignatureString, validateAttesterRootSig],\n  checksumSig: [isValidSignatureString, validateChecksumSig],\n  claimNodes: isValidArrayOfClaimNodes,\n  layer2Hash: [isValidEthHexString, isValidHash],\n  paddingNodes: isArrayOfPaddingNodes,\n  rootHash: [isValidEthHexString, isValidHash],\n  rootHashNonce: [isValidHash, isValidEthHexString],\n  version: isNotEmptyString,\n  batchAttesterSig: [isValidSignatureString, validateBatchAttesterSig],\n  contractAddress: ethUtil.isValidAddress,\n  requestNonce: [isValidHash, isValidEthHexString],\n  subject: ethUtil.isValidAddress,\n  subjectSig: [isValidSignatureString, validateSubjectSig],\n})\n\ninterface IEthDidDocumentPublicKey extends IDidDocumentPublicKey {\n  ethereumAddress: string\n}\ninterface IEthDidDocument extends IDidDocument {\n  publicKey?: IEthDidDocumentPublicKey[]\n}\n\nconst ethrDidDocumentTmpl = (ethAddress: string): IEthDidDocument => ({\n  '@context': 'https://w3id.org/did/v1',\n  id: `did:ethr:${ethAddress}`,\n  publicKey: [\n    {\n      id: `did:ethr:${ethAddress}#owner`,\n      type: 'Secp256k1VerificationKey2018',\n      controller: `did:ethr:${ethAddress}`,\n      ethereumAddress: ethAddress,\n    },\n  ],\n  authentication: [\n    {\n      type: 'Secp256k1SignatureAuthentication2018',\n      publicKey: `did:ethr:${ethAddress}#owner`,\n    },\n  ],\n})\n\n/**\n * Simplified \"resolver\", that just uses a template to avoid unnecessary performance issues.\n */\nexport class EthereumDIDResolver implements IDidResolver {\n  public async resolve(did: string): Promise<IDidResolveResult> {\n    if (!isValidDID(did)) {\n      throw Error(`unable to resolve did document: ${did}`)\n    }\n\n    const didDocument = ethrDidDocumentTmpl(did.replace('did:ethr:', ''))\n    return {\n      didDocument: new DidDocument(didDocument),\n    }\n  }\n}\n\nexport const isValidDID = (value: any): value is string => {\n  if (typeof value !== 'string') return false\n\n  return value.startsWith('did:ethr:') && ethUtil.isValidAddress(value.replace('did:ethr:', ''))\n}\n","import {EthUtils, VPV1, AtomicVCV1} from '@bloomprotocol/attestations-common'\nimport EthWallet from 'ethereumjs-wallet'\nimport extend from 'extend'\n\nconst {EcdsaSecp256k1KeyClass2019, EcdsaSecp256k1Signature2019, defaultDocumentLoader} = require('@transmute/lds-ecdsa-secp256k1-2019')\nconst keyto = require('@trust/keyto')\nconst jsigs = require('jsonld-signatures')\nconst url = require('url')\n\nconst {AuthenticationProofPurpose} = jsigs.purposes\n\nexport const buildVPV1 = async ({\n  wallet,\n  atomicVCs,\n  token,\n  domain,\n}: {\n  atomicVCs: AtomicVCV1[]\n  token: string\n  domain: string\n  wallet: EthWallet\n}): Promise<VPV1> => {\n  const unsignedVP: Omit<VPV1<AtomicVCV1>, 'proof'> = {\n    '@context': ['https://www.w3.org/2018/credentials/v1'],\n    type: ['VerifiablePresentation'],\n    verifiableCredential: atomicVCs,\n    holder: `did:ethr:${wallet.getAddressString()}`,\n  }\n\n  const {didDocument} = await new EthUtils.EthereumDIDResolver().resolve(`did:ethr:${wallet.getAddressString()}`)\n\n  const vp: VPV1<AtomicVCV1> = jsigs.sign(unsignedVP, {\n    suite: new EcdsaSecp256k1Signature2019({\n      key: new EcdsaSecp256k1KeyClass2019({\n        id: didDocument.publicKey[0].id,\n        controller: didDocument.publicKey[0].controller,\n        privateKeyJwk: keyto.from(wallet.getPrivateKeyString().replace('0x', ''), 'blk').toJwk('private'),\n      }),\n    }),\n    documentLoader: defaultDocumentLoader,\n    purpose: new AuthenticationProofPurpose({\n      challenge: token,\n      domain: domain,\n    }),\n    expansionMap: false, // TODO: remove this\n  })\n\n  return vp\n}\n\nexport const appendQuery = (uri: string, queryToAppend: {[key: string]: string | null}) => {\n  const parts = url.parse(uri, true)\n  const parsedQuery = extend(true, {}, parts.query, queryToAppend)\n\n  const queryString = Object.keys(parsedQuery)\n    .map(key => {\n      const value = parsedQuery[key]\n      return value === null ? encodeURIComponent(key) : encodeURIComponent(key) + '=' + encodeURIComponent(value)\n    })\n    .join('&')\n\n  parts.query = null\n  parts.search = queryString ? '?' + queryString : null\n\n  return url.format(parts)\n}\n","\n'use strict'\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./share-kit-react.cjs.production.min.js')\n} else {\n  module.exports = require('./share-kit-react.cjs.development.js')\n}\n","\n'use strict'\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./claim-kit-react.cjs.production.min.js')\n} else {\n  module.exports = require('./claim-kit-react.cjs.development.js')\n}\n","import * as React from 'react'\nimport {\n  renderClaimElement,\n  ClaimData,\n  QROptions,\n  ButtonOptions,\n  ShouldRenderButton,\n  ClaimElementResult,\n} from '@bloomprotocol/claim-kit'\nimport {Component, forwardProps} from 'react-forward-props'\n\nexport type ClaimElementProps = {\n  claimData: ClaimData\n  qrOptions?: Partial<QROptions>\n  shouldRenderButton?: ShouldRenderButton\n  buttonOptions: ButtonOptions\n}\n\nexport class ClaimElement extends Component<'div', ClaimElementProps> {\n  private container: HTMLDivElement | null\n  private claimElementResult: ClaimElementResult | null\n\n  constructor(props: ClaimElementProps) {\n    super(props)\n\n    this.container = null\n    this.claimElementResult = null\n  }\n\n  componentDidMount() {\n    if (!this.container) return\n\n    const {claimData, shouldRenderButton, qrOptions, buttonOptions} = this.props\n    this.claimElementResult = renderClaimElement({\n      container: this.container,\n      claimData,\n      qrOptions,\n      shouldRenderButton,\n      buttonOptions,\n    })\n  }\n\n  componentDidUpdate(prevProps: ClaimElementProps) {\n    if (!this.claimElementResult) return\n\n    const {claimData: prevclaimData, qrOptions: prevQROptions, buttonOptions: prevButtonOptions} = prevProps\n    const {claimData, qrOptions, buttonOptions} = this.props\n\n    if (prevclaimData !== claimData || prevQROptions !== qrOptions || prevButtonOptions !== buttonOptions) {\n      this.claimElementResult.update({claimData, qrOptions, buttonOptions})\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.claimElementResult) {\n      this.claimElementResult.remove()\n    }\n  }\n\n  render() {\n    return (\n      <div\n        {...forwardProps(this.props, 'claimData', 'shouldRenderButton', 'qrOptions', 'buttonOptions')}\n        ref={element => {\n          this.container = element\n        }}\n      />\n    )\n  }\n}\n","import extend from 'extend'\n\nconst url = require('url')\n\nexport const appendQuery = (uri: string, queryToAppend: {[key: string]: string | null}) => {\n  const parts = url.parse(uri, true)\n  const parsedQuery = extend(true, {}, parts.query, queryToAppend)\n\n  const queryString = Object.keys(parsedQuery)\n    .map(key => {\n      const value = parsedQuery[key]\n      return value === null ? encodeURIComponent(key) : encodeURIComponent(key) + '=' + encodeURIComponent(value)\n    })\n    .join('&')\n\n  parts.query = null\n  parts.search = queryString ? '?' + queryString : null\n\n  return url.format(parts)\n}\n","/* tslint:disable:max-line-length */\nexport const renderBloomLogo = (id: string) => {\n  const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n  svg.id = `${id}-logo`\n  svg.setAttribute('viewBox', '0 0 33.85 35.57')\n\n  const path = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n  path.setAttribute(\n    'd',\n    'M22.44 8.69a5.39 5.39 0 0 1-10.77 0s-.19-1 .84-3.23A13.21 13.21 0 0 1 16.98 0a14.29 14.29 0 0 1 4.68 5.46 6.56 6.56 0 0 1 .78 3.23zm0 18.2a5.39 5.39 0 0 0-10.77 0s-.19 1 .84 3.23a13.21 13.21 0 0 0 4.47 5.46 14.29 14.29 0 0 0 4.68-5.46 6.56 6.56 0 0 0 .78-3.23zm2.73-14.47a5.39 5.39 0 0 0 0 10.77s1 .19 3.23-.84a13.21 13.21 0 0 0 5.46-4.47 14.2 14.2 0 0 0-5.46-4.68 6.56 6.56 0 0 0-3.23-.78zm-16.48-.05a5.38 5.38 0 0 1 0 10.76s-1 .2-3.23-.84A13.21 13.21 0 0 1 0 17.79a14.29 14.29 0 0 1 5.46-4.68 6.61 6.61 0 0 1 3.23-.77z',\n  )\n  path.setAttribute('fill', 'currentColor')\n\n  svg.appendChild(path)\n\n  return svg\n}\n/* tslint:enable:max-line-length */\n","import {oneLine, stripIndents} from 'common-tags'\n\nimport {renderBloomLogo} from './renderBloomLogo'\nimport {SmallButtonType} from '../../types'\n\nconst renderStyle = (id: string, type: SmallButtonType, invert?: boolean) => {\n  const style = document.createElement('style')\n\n  let borderRadius: string\n\n  switch (type) {\n    case 'circle':\n      borderRadius = '100%'\n      break\n    case 'squircle':\n      borderRadius = '8px'\n      break\n    case 'rounded-square':\n      borderRadius = '4px'\n      break\n    case 'square':\n      borderRadius = '0'\n      break\n    default:\n      throw new Error(`Unsupported type: ${type}`)\n  }\n\n  const styleText = stripIndents(oneLine)`\n    #${id} {\n      background-color: ${invert ? '#fff' : '#6262F6'};\n      color: ${invert ? '#6262F6' : '#fff'};\n      border-radius: ${borderRadius};\n      text-decoration: none;\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      box-sizing: border-box;\n      height: 34px;\n      width: 34px;\n    }\n\n    #${id}-logo {\n      width: 20px;\n    }\n  `\n\n  style.append(styleText)\n\n  return style\n}\n\nexport const renderSmallClaimButton = (id: string, anchor: HTMLAnchorElement, type: SmallButtonType, invert?: boolean) => {\n  anchor.append(renderStyle(id, type, invert))\n  anchor.append(renderBloomLogo(id))\n}\n","import {oneLine, stripIndents} from 'common-tags'\nimport {renderBloomLogo} from './renderBloomLogo'\nimport {MediumButtonType} from '../../types'\n\nconst renderStyle = (id: string, type: MediumButtonType) => {\n  const style = document.createElement('style')\n\n  let styleText = stripIndents(oneLine)`\n    #${id} {\n      background-color: #6262F6;\n      color: #fff;\n      text-decoration: none;\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      border-radius: 4px;\n      padding: 7px 17px;\n      box-sizing: border-box;\n    }\n\n    #${id}-text-and-logo {\n      display: flex;\n      width: 100%;\n      align-items: center;\n      justify-content: center;\n    }\n\n    #${id}-logo {\n      margin-right: 4px;\n      height: 16px;\n    }\n  `\n\n  if (['sign-up', 'log-in', 'verify'].indexOf(type) >= 0) {\n    styleText += stripIndents(oneLine)`\n      #${id}-text {\n        margin-top: 2px;\n      }\n    `\n  }\n\n  style.append(styleText)\n\n  return style\n}\n\nconst renderText = (id: string, d: string, width: string, height: string) => {\n  const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n  svg.id = `${id}-text`\n  svg.setAttribute('width', width)\n  svg.setAttribute('height', height)\n\n  const text = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n  text.setAttribute('d', d)\n  text.setAttribute('fill', 'currentColor')\n  text.setAttribute('fill-rulle', 'evenodd')\n\n  svg.appendChild(text)\n\n  return svg\n}\n\n/* tslint:disable:max-line-length */\nconst texts: {[k in MediumButtonType]: {d: string; width: string; height: string}} = {\n  claim: {\n    d:\n      'M6.5 3.073c0 .617-.31 1.399-1.272 1.77 1.232.315 1.76 1.385 1.76 2.153 0 1.564-1.124 2.894-2.98 2.894H0V.44h3.738C5.418.439 6.5 1.454 6.5 3.073zM1.99 4.17h1.558c.515 0 .867-.411.867-.974 0-.59-.298-.987-.88-.987H1.99V4.17zm1.87 1.66H1.99v2.29H3.9c.664 0 1.003-.603 1.003-1.165 0-.535-.339-1.125-1.043-1.125zM8.397 0h1.882v9.89H8.397V0zm6.514 8.134c.786 0 1.436-.576 1.436-1.467 0-.865-.65-1.454-1.436-1.454-.772 0-1.422.59-1.422 1.454 0 .891.65 1.467 1.422 1.467zm0 1.866c-1.788 0-3.277-1.317-3.277-3.333 0-2.017 1.49-3.32 3.277-3.32 1.788 0 3.291 1.303 3.291 3.32 0 2.016-1.503 3.333-3.29 3.333zm7.544-1.866c.785 0 1.435-.576 1.435-1.467 0-.865-.65-1.454-1.435-1.454-.772 0-1.422.59-1.422 1.454 0 .891.65 1.467 1.422 1.467zm0 1.866c-1.788 0-3.278-1.317-3.278-3.333 0-2.017 1.49-3.32 3.278-3.32 1.787 0 3.29 1.303 3.29 3.32 0 2.016-1.503 3.333-3.29 3.333zm11.633-4.801c-.596 0-1.083.37-1.083 1.303V9.89h-1.883V6.433c-.013-.809-.5-1.234-1.043-1.234-.568 0-1.097.33-1.097 1.303V9.89H27.1V3.484h1.882v.933c.298-.672.976-1.056 1.653-1.056 1.002 0 1.68.384 2.031 1.125.61-1.002 1.45-1.139 1.896-1.139 1.504 0 2.438.974 2.438 2.908V9.89h-1.869V6.475c0-.837-.488-1.276-1.043-1.276z',\n    width: '37',\n    height: '10',\n  },\n}\n/* tslint:enable:max-line-length */\n\nconst renderTextAndLogo = (id: string, type: MediumButtonType) => {\n  const textAndLogo = document.createElement('span')\n  textAndLogo.id = `${id}-text-and-logo`\n  textAndLogo.appendChild(renderBloomLogo(id))\n\n  const text = texts[type]\n\n  textAndLogo.appendChild(renderText(id, text.d, text.width, text.height))\n\n  return textAndLogo\n}\n\nexport const renderMediumClaimButton = (id: string, anchor: HTMLAnchorElement, type: MediumButtonType) => {\n  anchor.append(renderStyle(id, type))\n  anchor.append(renderTextAndLogo(id, type))\n}\n","import {oneLine, stripIndents} from 'common-tags'\n\nimport {renderBloomLogo} from './renderBloomLogo'\nimport {LargeButtonType} from './../../types'\n\nconst backgroundPattern = `\n  <svg width=\"281\" height=\"48\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n    <defs>\n      <rect id=\"a\" width=\"335\" height=\"48\" rx=\"4\"/>\n      <path d=\"M0 0h281c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"c\"/>\n      <linearGradient x1=\"83.3806005%\" y1=\"6.01770792%\" x2=\"130.86599%\" y2=\"100%\" id=\"d\">\n        <stop stop-color=\"#7A7CF3\" offset=\"0%\"/>\n        <stop stop-color=\"#6262F6\" offset=\"100%\"/>\n      </linearGradient>\n      <path d=\"M0 0h281c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"f\"/>\n      <path d=\"M0 0h281c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"h\"/>\n      <path d=\"M0 0h281c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"j\"/>\n      <path d=\"M0 0h281c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"l\"/>\n      <path d=\"M0 0h281c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"n\"/>\n      <path d=\"M0 0h281c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"p\"/>\n      <path d=\"M0 0h281c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"r\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"t\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"v\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"x\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"z\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"B\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"D\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"F\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"H\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"J\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"L\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"N\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"P\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"R\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"T\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"V\"/>\n      <path d=\"M0 0h144.64C153.123094 0 160 10.745166 160 24s-6.876906 24-15.36 24H0V0z\" id=\"X\"/>\n    </defs>\n    <g transform=\"translate(-41)\" fill=\"none\" fill-rule=\"evenodd\">\n      <mask id=\"b\" fill=\"#fff\">\n        <use xlink:href=\"#a\"/>\n      </mask>\n      <g mask=\"url(#b)\">\n        <g transform=\"translate(41)\">\n          <mask id=\"e\" fill=\"#fff\">\n            <use xlink:href=\"#c\"/>\n          </mask>\n          <circle stroke=\"url(#d)\" stroke-width=\"2\" mask=\"url(#e)\" cx=\"-3\" cy=\"24\" r=\"25\"/>\n        </g>\n        <g transform=\"translate(41)\">\n          <mask id=\"g\" fill=\"#fff\">\n            <use xlink:href=\"#f\"/>\n          </mask>\n          <circle stroke=\"url(#d)\" stroke-width=\"2\" mask=\"url(#g)\" cx=\"1\" cy=\"24\" r=\"27\"/>\n        </g>\n        <g transform=\"translate(41)\">\n          <mask id=\"i\" fill=\"#fff\">\n            <use xlink:href=\"#h\"/>\n          </mask>\n          <circle stroke=\"url(#d)\" stroke-width=\"2\" mask=\"url(#i)\" cx=\"5\" cy=\"24\" r=\"29\"/>\n        </g>\n        <g transform=\"translate(41)\">\n          <mask id=\"k\" fill=\"#fff\">\n            <use xlink:href=\"#j\"/>\n          </mask>\n          <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".8\" mask=\"url(#k)\" cx=\"9\" cy=\"24\" r=\"31\"/>\n        </g>\n        <g transform=\"translate(41)\">\n          <mask id=\"m\" fill=\"#fff\">\n            <use xlink:href=\"#l\"/>\n          </mask>\n          <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".8\" mask=\"url(#m)\" cx=\"13\" cy=\"24\" r=\"33\"/>\n        </g>\n        <g transform=\"translate(41)\">\n          <mask id=\"o\" fill=\"#fff\">\n            <use xlink:href=\"#n\"/>\n          </mask>\n          <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".7\" mask=\"url(#o)\" cx=\"18\" cy=\"24\" r=\"34\"/>\n        </g>\n        <g transform=\"translate(41)\">\n          <mask id=\"q\" fill=\"#fff\">\n            <use xlink:href=\"#p\"/>\n          </mask>\n          <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".7\" mask=\"url(#q)\" cx=\"23\" cy=\"24\" r=\"35\"/>\n        </g>\n        <g transform=\"translate(41)\">\n          <mask id=\"s\" fill=\"#fff\">\n            <use xlink:href=\"#r\"/>\n          </mask>\n          <g mask=\"url(#s)\">\n            <g transform=\"translate(55)\">\n              <mask id=\"u\" fill=\"#fff\">\n                <use xlink:href=\"#t\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".6\" mask=\"url(#u)\" cx=\"-27\" cy=\"24\" r=\"36\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"w\" fill=\"#fff\">\n                <use xlink:href=\"#v\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".6\" mask=\"url(#w)\" cx=\"-22\" cy=\"24\" r=\"37\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"y\" fill=\"#fff\">\n                <use xlink:href=\"#x\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".6\" mask=\"url(#y)\" cx=\"-17\" cy=\"24\" r=\"38\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"A\" fill=\"#fff\">\n                <use xlink:href=\"#z\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".55\" mask=\"url(#A)\" cx=\"-12\" cy=\"24\" r=\"39\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"C\" fill=\"#fff\">\n                <use xlink:href=\"#B\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".55\" mask=\"url(#C)\" cx=\"-7\" cy=\"24\" r=\"40\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"E\" fill=\"#fff\">\n                <use xlink:href=\"#D\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".55\" mask=\"url(#E)\" cx=\"-2\" cy=\"24\" r=\"41\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"G\" fill=\"#fff\">\n                <use xlink:href=\"#F\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".55\" mask=\"url(#G)\" cx=\"3\" cy=\"24\" r=\"42\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"I\" fill=\"#fff\">\n                <use xlink:href=\"#H\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".55\" mask=\"url(#I)\" cx=\"8\" cy=\"24\" r=\"43\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"K\" fill=\"#fff\">\n                <use xlink:href=\"#J\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".5\" mask=\"url(#K)\" cx=\"13\" cy=\"24\" r=\"44\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"M\" fill=\"#fff\">\n                <use xlink:href=\"#L\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".5\" mask=\"url(#M)\" cx=\"18\" cy=\"24\" r=\"45\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"O\" fill=\"#fff\">\n                <use xlink:href=\"#N\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".5\" mask=\"url(#O)\" cx=\"23\" cy=\"24\" r=\"46\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"Q\" fill=\"#fff\">\n                <use xlink:href=\"#P\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".5\" mask=\"url(#Q)\" cx=\"28\" cy=\"24\" r=\"47\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"S\" fill=\"#fff\">\n                <use xlink:href=\"#R\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".5\" mask=\"url(#S)\" cx=\"33\" cy=\"24\" r=\"48\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"U\" fill=\"#fff\">\n                <use xlink:href=\"#T\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".45\" mask=\"url(#U)\" cx=\"38\" cy=\"24\" r=\"49\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"W\" fill=\"#fff\">\n                <use xlink:href=\"#V\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".45\" mask=\"url(#W)\" cx=\"43\" cy=\"24\" r=\"50\"/>\n            </g>\n            <g transform=\"translate(145)\">\n              <mask id=\"Y\" fill=\"#fff\">\n                <use xlink:href=\"#X\"/>\n              </mask>\n              <g mask=\"url(#Y)\">\n                <g stroke=\"url(#d)\" stroke-width=\"2\" transform=\"translate(-105 -66)\">\n                  <circle opacity=\".45\" transform=\"rotate(15 63 90)\" cx=\"63\" cy=\"90\" r=\"51\"/>\n                  <circle opacity=\".45\" transform=\"rotate(15 68 90)\" cx=\"68\" cy=\"90\" r=\"52\"/>\n                  <circle opacity=\".45\" transform=\"rotate(15 73 90)\" cx=\"73\" cy=\"90\" r=\"53\"/>\n                  <circle opacity=\".45\" transform=\"rotate(15 78 90)\" cx=\"78\" cy=\"90\" r=\"54\"/>\n                  <circle opacity=\".4\" transform=\"rotate(15 83 90)\" cx=\"83\" cy=\"90\" r=\"55\"/>\n                  <circle opacity=\".4\" transform=\"rotate(15 88 90)\" cx=\"88\" cy=\"90\" r=\"56\"/>\n                  <circle opacity=\".4\" transform=\"rotate(15 93 90)\" cx=\"93\" cy=\"90\" r=\"57\"/>\n                  <circle opacity=\".4\" transform=\"rotate(15 98 90)\" cx=\"98\" cy=\"90\" r=\"58\"/>\n                  <circle opacity=\".4\" transform=\"rotate(15 103 90)\" cx=\"103\" cy=\"90\" r=\"59\"/>\n                  <circle opacity=\".35\" transform=\"rotate(15 108 90)\" cx=\"108\" cy=\"90\" r=\"60\"/>\n                  <circle opacity=\".35\" transform=\"rotate(15 113 90)\" cx=\"113\" cy=\"90\" r=\"61\"/>\n                  <circle opacity=\".35\" transform=\"rotate(15 118 89)\" cx=\"118\" cy=\"89\" r=\"62\"/>\n                  <circle opacity=\".35\" transform=\"rotate(15 123 89)\" cx=\"123\" cy=\"89\" r=\"63\"/>\n                  <circle opacity=\".3\" transform=\"rotate(15 128 89)\" cx=\"128\" cy=\"89\" r=\"64\"/>\n                  <circle opacity=\".3\" transform=\"rotate(15 133 89)\" cx=\"133\" cy=\"89\" r=\"65\"/>\n                  <circle opacity=\".3\" transform=\"rotate(15 138 89)\" cx=\"138\" cy=\"89\" r=\"66\"/>\n                  <circle opacity=\".25\" transform=\"rotate(15 143 89)\" cx=\"143\" cy=\"89\" r=\"67\"/>\n                  <circle opacity=\".25\" transform=\"rotate(15 148 89)\" cx=\"148\" cy=\"89\" r=\"68\"/>\n                  <circle opacity=\".2\" transform=\"rotate(15 153 89)\" cx=\"153\" cy=\"89\" r=\"69\"/>\n                  <circle opacity=\".2\" transform=\"rotate(15 158 89)\" cx=\"158\" cy=\"89\" r=\"70\"/>\n                  <circle opacity=\".2\" transform=\"rotate(15 163 89)\" cx=\"163\" cy=\"89\" r=\"71\"/>\n                  <circle opacity=\".2\" transform=\"rotate(15 168 89)\" cx=\"168\" cy=\"89\" r=\"72\"/>\n                </g>\n              </g>\n            </g>\n          </g>\n        </g>\n      </g>\n    </g>\n  </svg>`\n\nconst renderStyle = (id: string, type: LargeButtonType) => {\n  const style = document.createElement('style')\n\n  let styleText = stripIndents(oneLine)`\n    #${id} {\n      position: relative;\n      background-image: url(data:image/svg+xml;base64,${window.btoa(backgroundPattern)}), linear-gradient(to right, #7A7CF3, #6262F6);\n      background-repeat: no-repeat;\n      background-position: left 39px center, left center;\n      background-size: 282px 100%, 100% 100%;\n      box-shadow: 0 4px 15px 0 rgba(98,98,246,0.50);\n      color: #fff;\n      text-decoration: none;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border-radius: 4px;\n      padding: 12px 39px;\n      box-sizing: border-box;\n    }\n\n    #${id}-lock {\n      position: absolute;\n      left: 19px;\n      top: 50%;\n      transform: translateY(-50%);\n      height: 20px;\n      color: #5a5de0;\n    }\n\n    #${id}-text-and-logo {\n      display: flex;\n      width: 100%;\n      align-items: center;\n      justify-content: center;\n      margin-left: 12px;\n      margin-right: 12px;\n    }\n\n    #${id}-logo {\n      margin-right: 6px;\n      height: 22px;\n    }\n  `\n\n  if (['sign-up', 'log-in', 'verify'].indexOf(type) >= 0) {\n    styleText += stripIndents(oneLine)`\n      #${id}-text {\n        margin-top: 2px;\n      }\n    `\n  }\n\n  style.append(styleText)\n\n  return style\n}\n\n/* tslint:disable:max-line-length */\nconst renderLockIcon = (id: string) => {\n  const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n  svg.id = `${id}-lock`\n  svg.setAttribute('viewBox', '0 0 24 24')\n\n  const lock = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n  lock.setAttribute(\n    'd',\n    'M19.5 9.5h-.75V6.75a6.75 6.75 0 0 0-13.5 0V9.5H4.5a2 2 0 0 0-2 2V22a2 2 0 0 0 2 2h15a2 2 0 0 0 2-2V11.5a2 2 0 0 0-2-2zm-9.5 6a2 2 0 1 1 3 1.723V19.5a1 1 0 0 1-2 0v-2.277a1.994 1.994 0 0 1-1-1.723zM7.75 6.75a4.25 4.25 0 0 1 8.5 0V9a.5.5 0 0 1-.5.5h-7.5a.5.5 0 0 1-.5-.5z',\n  )\n  lock.setAttribute('fill', 'currentColor')\n\n  svg.appendChild(lock)\n\n  return svg\n}\n/* tslint:enable:max-line-length */\n\nconst renderText = (id: string, d: string, width: string, height: string) => {\n  const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n  svg.id = `${id}-text`\n  svg.setAttribute('width', width)\n  svg.setAttribute('height', height)\n\n  const text = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n  text.setAttribute('d', d)\n  text.setAttribute('fill', 'currentColor')\n  text.setAttribute('fill-rulle', 'evenodd')\n\n  svg.appendChild(text)\n\n  return svg\n}\n\nconst texts: {[k in LargeButtonType]: {d: string; width: string; height: string}} = {\n  claim: {\n    d:\n      'M7.68 3.584c0 .72-.368 1.632-1.504 2.064 1.456.368 2.08 1.616 2.08 2.512 0 1.824-1.328 3.376-3.52 3.376H0V.512h4.416C6.4.512 7.68 1.696 7.68 3.584zm-5.328 1.28h1.84c.608 0 1.024-.48 1.024-1.136 0-.688-.352-1.152-1.04-1.152H2.352v2.288zM4.56 6.8H2.352v2.672h2.256c.784 0 1.184-.704 1.184-1.36 0-.624-.4-1.312-1.232-1.312zM9.92 0h2.224v11.536H9.92V0zm7.696 9.488c.928 0 1.696-.672 1.696-1.712 0-1.008-.768-1.696-1.696-1.696-.912 0-1.68.688-1.68 1.696 0 1.04.768 1.712 1.68 1.712zm0 2.176c-2.112 0-3.872-1.536-3.872-3.888s1.76-3.872 3.872-3.872 3.888 1.52 3.888 3.872-1.776 3.888-3.888 3.888zm8.912-2.176c.928 0 1.696-.672 1.696-1.712 0-1.008-.768-1.696-1.696-1.696-.912 0-1.68.688-1.68 1.696 0 1.04.768 1.712 1.68 1.712zm0 2.176c-2.112 0-3.872-1.536-3.872-3.888s1.76-3.872 3.872-3.872 3.888 1.52 3.888 3.872-1.776 3.888-3.888 3.888zm13.744-5.6c-.704 0-1.28.432-1.28 1.52v3.952h-2.224V7.504c-.016-.944-.592-1.44-1.232-1.44-.672 0-1.296.384-1.296 1.52v3.952h-2.224V4.064h2.224v1.088c.352-.784 1.152-1.232 1.952-1.232 1.184 0 1.984.448 2.4 1.312.72-1.168 1.712-1.328 2.24-1.328 1.776 0 2.88 1.136 2.88 3.392v4.24h-2.208V7.552c0-.976-.576-1.488-1.232-1.488z',\n    width: '44',\n    height: '12',\n  },\n}\n/* tslint:enable:max-line-length */\n\nconst renderTextAndLogo = (id: string, type: LargeButtonType) => {\n  const textAndLogo = document.createElement('span')\n  textAndLogo.id = `${id}-text-and-logo`\n  textAndLogo.appendChild(renderBloomLogo(id))\n\n  const text = texts[type]\n\n  textAndLogo.appendChild(renderText(id, text.d, text.width, text.height))\n\n  return textAndLogo\n}\n\nexport const renderLargeClaimButton = (id: string, anchor: HTMLAnchorElement, type: LargeButtonType) => {\n  anchor.appendChild(renderStyle(id, type))\n  anchor.appendChild(renderLockIcon(id))\n  anchor.appendChild(renderTextAndLogo(id, type))\n}\n","import {appendQuery} from './append'\nimport {renderSmallClaimButton} from './buttons/renderSmallClaimButton'\nimport {renderMediumClaimButton} from './buttons/renderMediumClaimButton'\nimport {renderLargeClaimButton} from './buttons/renderLargeClaimButton'\nimport {ClaimData, ClaimElementResult, ButtonOptions} from '../types'\n\nconst getLink = (claimData: ClaimData, callbackUrl: string) => {\n  claimData.url = appendQuery(claimData.url, {'share-kit-from': 'button'})\n\n  return `https://bloom.co/download?claim=${window.btoa(JSON.stringify(claimData))}&callback-url=${encodeURIComponent(callbackUrl)}`\n}\n\nconst render = (id: string, anchor: HTMLAnchorElement, config: {claimData: ClaimData; buttonOptions: ButtonOptions}) => {\n  anchor.href = getLink(config.claimData, config.buttonOptions.callbackUrl)\n\n  // Clear all children\n  while (anchor.lastChild) {\n    anchor.removeChild(anchor.lastChild)\n  }\n\n  const buttonOptions = config.buttonOptions\n\n  if (buttonOptions.size === 'sm') {\n    renderSmallClaimButton(id, anchor, buttonOptions.type, buttonOptions.invert)\n  } else if (buttonOptions.size === 'md') {\n    renderMediumClaimButton(id, anchor, buttonOptions.type || 'claim')\n  } else {\n    renderLargeClaimButton(id, anchor, buttonOptions.type || 'claim')\n  }\n}\n\nconst generateId = () => {\n  const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'\n\n  let rand = ''\n  for (let i = 0; i < 4; i++) {\n    rand += possible.charAt(Math.floor(Math.random() * possible.length))\n  }\n\n  return `bloom-claim-element-${rand}`\n}\n\nexport const renderClaimButton = (config: {\n  container: HTMLElement\n  claimData: ClaimData\n  buttonOptions: ButtonOptions\n  id?: string\n}): ClaimElementResult => {\n  const id = config.id || generateId()\n  const anchor = document.createElement('a')\n  config.container.appendChild(anchor)\n\n  anchor.id = id\n  anchor.target = '_blank'\n  anchor.rel = 'norefferer noopener'\n\n  render(id, anchor, config)\n\n  return {\n    update: updateConfig => {\n      render(id, anchor, updateConfig)\n    },\n    remove: () => {\n      anchor.remove()\n    },\n  }\n}\n","import {drawQRCode, Options} from '@bloomprotocol/qr'\n\nimport {appendQuery} from './append'\nimport {ClaimData, ClaimElementResult} from '../types'\n\n// Slightly modified from: https://hackernoon.com/copying-text-to-clipboard-with-javascript-df4d4988697f\nconst copyDataToClipboard = (claimData: ClaimData) => {\n  const selection = document.getSelection()\n  const selected = !selection ? false : selection.rangeCount > 0 ? selection.getRangeAt(0) : false\n\n  const textarea = document.createElement('textarea')\n  textarea.value = `'${JSON.stringify(claimData)}'`\n  textarea.setAttribute('readonly', '')\n  textarea.style.position = 'absolute'\n  textarea.style.left = '-9999px'\n\n  document.body.appendChild(textarea)\n  textarea.select()\n  document.execCommand('copy')\n  document.body.removeChild(textarea)\n\n  if (selected && selection) {\n    selection.removeAllRanges()\n    selection.addRange(selected)\n  }\n}\n\nexport const renderClaimQRCode = (config: {\n  container: HTMLElement\n  claimData: ClaimData\n  qrOptions?: Partial<Options>\n}): ClaimElementResult => {\n  const canvas = document.createElement('canvas')\n  config.container.append(canvas)\n\n  config.claimData.url = appendQuery(config.claimData.url, {'claim-kit-from': 'qr'})\n  canvas.onclick = () => copyDataToClipboard(config.claimData)\n\n  const {update, remove} = drawQRCode(canvas, {data: config.claimData, options: config.qrOptions})\n\n  return {\n    update: updateConfig => {\n      updateConfig.claimData.url = appendQuery(updateConfig.claimData.url, {'claim-kit-from': 'qr'})\n      canvas.onclick = () => copyDataToClipboard(updateConfig.claimData)\n\n      update({data: updateConfig.claimData, options: updateConfig.qrOptions})\n    },\n    remove,\n  }\n}\n","import Bowser from 'bowser'\nimport {Options as QROptions} from '@bloomprotocol/qr'\n\nimport {ButtonOptions, ClaimData, ShouldRenderButton, ClaimElementResult} from './types'\nimport {renderClaimButton} from './elements/renderClaimButton'\nimport {renderClaimQRCode} from './elements/renderClaimQRCode'\n\nconst renderClaimElement = (config: {\n  container: HTMLElement\n  claimData: ClaimData\n  qrOptions?: Partial<QROptions>\n  shouldRenderButton?: ShouldRenderButton\n  buttonOptions: ButtonOptions\n}): ClaimElementResult => {\n  let renderButton: boolean\n\n  if (typeof config.shouldRenderButton === 'undefined') {\n    const parsedResult = Bowser.parse(window.navigator.userAgent)\n    const isSupportedPlatform = parsedResult.platform.type === 'mobile' || parsedResult.platform.type === 'tablet'\n    const isSupportedOS = parsedResult.os.name === 'iOS' || parsedResult.os.name === 'Android'\n\n    renderButton = isSupportedPlatform && isSupportedOS\n  } else if (typeof config.shouldRenderButton === 'boolean') {\n    renderButton = config.shouldRenderButton\n  } else {\n    renderButton = config.shouldRenderButton(Bowser.parse(window.navigator.userAgent))\n  }\n\n  return (renderButton ? renderClaimButton : renderClaimQRCode)(config)\n}\n\nexport {renderClaimElement}\n","import React, {useContext} from 'react'\nimport createPersistedState from 'use-persisted-state'\nimport EthWallet from 'ethereumjs-wallet'\nimport {AtomicVCV1} from '@bloomprotocol/attestations-common'\nimport wretch from 'wretch'\n\nimport {buildVPV1, appendQuery} from './utils'\n\nconst usePrivateKeyState = createPersistedState('attestations-playground.privateKey')\nconst useSDVCsState = createPersistedState('attestations-playground.sdvcs')\n\ntype SuccessRequestResponse = {\n  kind: 'success'\n}\n\ntype ErrorRequestResponse = {\n  kind: 'error'\n  message: string\n}\n\ntype RequestResponse = SuccessRequestResponse | ErrorRequestResponse\n\ntype LocalClientContextProps = {\n  vcs: AtomicVCV1[]\n  wallet: EthWallet\n  regen: () => void\n  deleteVC: (index: number) => void\n  shareVCs: (types: string[], token: string, to: string) => Promise<RequestResponse>\n  claimVC: (from: string) => Promise<RequestResponse>\n}\n\nconst LocalClientContext = React.createContext<LocalClientContextProps>({\n  vcs: [],\n  wallet: EthWallet.generate(),\n  regen: () => {},\n  deleteVC: () => {},\n  shareVCs: async () => ({kind: 'success'}),\n  claimVC: async () => ({kind: 'success'}),\n})\n\nexport const LocalClientProvider: React.FC = props => {\n  const [privateKey, setPrivateKey] = usePrivateKeyState<string>(() => EthWallet.generate().getPrivateKeyString())\n  const [vcs, setVCs] = useSDVCsState<AtomicVCV1[]>(() => [])\n\n  const wallet = EthWallet.fromPrivateKey(Buffer.from(privateKey.replace('0x', ''), 'hex'))\n\n  return (\n    <LocalClientContext.Provider\n      value={{\n        wallet,\n        vcs,\n        regen: () => {\n          setPrivateKey(EthWallet.generate().getPrivateKeyString())\n          setVCs([])\n        },\n        deleteVC: index => {\n          const newVCs = [...vcs]\n          newVCs.splice(index, 1)\n          setVCs(newVCs)\n        },\n        shareVCs: async (types, token, to) => {\n          if (vcs.length === 0) {\n            return {\n              kind: 'error',\n              message: 'You do not have any credentials stored locally',\n            }\n          }\n\n          if (types.length === 0) {\n            return {\n              kind: 'error',\n              message: 'Must request at least one credential type to share',\n            }\n          }\n\n          const missing: string[] = []\n          const foundVCs: AtomicVCV1[] = []\n\n          types.forEach(type => {\n            // TODO: is this the way we should be checking?\n            const foundVC = vcs.find(vc => vc.type.includes(type))\n\n            if (foundVC) {\n              foundVCs.push(foundVC)\n            } else {\n              missing.push(type)\n            }\n          })\n\n          if (missing.length > 0) {\n            return {\n              kind: 'error',\n              message: `You are missing the folowing credentials:\\n${missing.join('\\n')}`,\n            }\n          }\n\n          const vp = await buildVPV1({wallet, atomicVCs: foundVCs, token, domain: to})\n\n          try {\n            await wretch()\n              .url(appendQuery(to, {'share-kit-from': 'qr'}))\n              .post(vp)\n              .json()\n          } catch {\n            return {\n              kind: 'error',\n              message: 'Something went wrong while sharing credentials',\n            }\n          }\n\n          return {kind: 'success'}\n        },\n        claimVC: async from => {\n          let vc: AtomicVCV1\n\n          try {\n            ;({vc} = await wretch()\n              .headers({credentials: 'same-origin', 'Content-Type': 'application/json'})\n              .url(appendQuery(from, {'claim-kit-from': 'qr'}))\n              .post({subject: `did:ethr:${wallet.getAddressString()}`})\n              .json<{vc: AtomicVCV1}>())\n          } catch {\n            return {\n              kind: 'error',\n              message: 'Something went wrong while fetching the VC to claim',\n            }\n          }\n\n          setVCs([...vcs, vc])\n\n          return {kind: 'success'}\n        },\n      }}\n    >\n      {props.children}\n    </LocalClientContext.Provider>\n  )\n}\n\nexport const useLocalClient = () => {\n  return useContext(LocalClientContext)\n}\n","import * as React from 'react'\nimport {\n  renderRequestElement,\n  RequestData,\n  QROptions,\n  ButtonOptions,\n  ShouldRenderButton,\n  RequestElementResult,\n} from '@bloomprotocol/share-kit'\nimport {Component, forwardProps} from 'react-forward-props'\n\nexport type RequestElementProps = {\n  requestData: RequestData\n  qrOptions?: Partial<QROptions>\n  shouldRenderButton?: ShouldRenderButton\n  buttonOptions: ButtonOptions\n}\n\nexport class RequestElement extends Component<'div', RequestElementProps> {\n  private container: HTMLDivElement | null\n  private requestElementResult: RequestElementResult | null\n\n  constructor(props: RequestElementProps) {\n    super(props)\n\n    this.container = null\n    this.requestElementResult = null\n  }\n\n  componentDidMount() {\n    if (!this.container) return\n\n    const {requestData, shouldRenderButton, qrOptions, buttonOptions} = this.props\n    this.requestElementResult = renderRequestElement({\n      container: this.container,\n      requestData,\n      qrOptions,\n      shouldRenderButton,\n      buttonOptions,\n    })\n  }\n\n  componentDidUpdate(prevProps: RequestElementProps) {\n    if (!this.requestElementResult) return\n\n    const {requestData: prevRequestData, qrOptions: prevQROptions, buttonOptions: prevButtonOptions} = prevProps\n    const {requestData, qrOptions, buttonOptions} = this.props\n\n    if (prevRequestData !== requestData || prevQROptions !== qrOptions || prevButtonOptions !== buttonOptions) {\n      this.requestElementResult.update({requestData, qrOptions, buttonOptions})\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.requestElementResult) {\n      this.requestElementResult.remove()\n    }\n  }\n\n  render() {\n    return (\n      <div\n        {...forwardProps(this.props, 'requestData', 'shouldRenderButton', 'qrOptions', 'buttonOptions')}\n        ref={element => {\n          this.container = element\n        }}\n      />\n    )\n  }\n}\n","import {TAttestationTypeNames} from '@bloomprotocol/attestations-common'\nimport {Options as QROptions} from '@bloomprotocol/qr'\nimport Bowser from 'bowser'\n\n// Request Types\n\nenum Action {\n  attestation = 'request_attestation_data',\n  authentication = 'authentication',\n}\n\ntype RequestDataBase<T extends Action> = {\n  action: T\n  token: string\n  url: string\n  org_logo_url: string\n  org_name: string\n  org_usage_policy_url: string\n  org_privacy_policy_url: string\n}\n\ntype RequestDataAttestation = RequestDataBase<Action.attestation> & {types: TAttestationTypeNames[]}\n\ntype RequestDataAuthentication = RequestDataBase<Action.authentication>\n\ntype RequestData = RequestDataAttestation | RequestDataAuthentication\n\ntype SmallButtonType = 'square' | 'rounded-square' | 'circle' | 'squircle'\n\ntype MediumButtonType = 'log-in' | 'sign-up' | 'connect' | 'bloom' | 'verify'\n\ntype LargeButtonType = 'log-in' | 'sign-up' | 'connect' | 'bloom' | 'verify'\n\ntype ButtonSize = 'sm' | 'md' | 'lg'\n\ntype BaseButtonOptions = {\n  callbackUrl: string\n  size?: ButtonSize\n}\n\ntype SmallButtonOptions = BaseButtonOptions & {\n  size: 'sm'\n  type: SmallButtonType\n  invert?: boolean\n}\n\ntype MediumButtonOptions = BaseButtonOptions & {\n  size: 'md'\n  type?: MediumButtonType\n}\n\ntype LargeButtonOptions = BaseButtonOptions & {\n  size?: 'lg'\n  type?: LargeButtonType\n}\n\ntype ButtonOptions = SmallButtonOptions | MediumButtonOptions | LargeButtonOptions\n\ntype ShouldRenderButton = (parsedResult: Bowser.Parser.ParsedResult) => boolean\n\ntype RequestElementResult = {\n  update: (config: {requestData: RequestData; buttonOptions: ButtonOptions; qrOptions?: Partial<QROptions>}) => void\n  remove: () => void\n}\n\nexport {\n  Action,\n  RequestDataAttestation,\n  RequestDataAuthentication,\n  RequestData,\n  SmallButtonType,\n  MediumButtonType,\n  LargeButtonType,\n  ButtonSize,\n  SmallButtonOptions,\n  MediumButtonOptions,\n  LargeButtonOptions,\n  ButtonOptions,\n  ShouldRenderButton,\n  RequestElementResult,\n}\n","import {oneLine, stripIndents} from 'common-tags'\n\nimport {renderBloomLogo} from './renderBloomLogo'\nimport {SmallButtonType} from '../../types'\n\nconst renderStyle = (id: string, type: SmallButtonType, invert?: boolean) => {\n  const style = document.createElement('style')\n\n  let borderRadius: string\n\n  switch (type) {\n    case 'circle':\n      borderRadius = '100%'\n      break\n    case 'squircle':\n      borderRadius = '8px'\n      break\n    case 'rounded-square':\n      borderRadius = '4px'\n      break\n    case 'square':\n      borderRadius = '0'\n      break\n    default:\n      throw new Error(`Unsupported type: ${type}`)\n  }\n\n  const styleText = stripIndents(oneLine)`\n    #${id} {\n      background-color: ${invert ? '#fff' : '#6262F6'};\n      color: ${invert ? '#6262F6' : '#fff'};\n      border-radius: ${borderRadius};\n      text-decoration: none;\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      box-sizing: border-box;\n      height: 34px;\n      width: 34px;\n    }\n\n    #${id}-logo {\n      width: 20px;\n    }\n  `\n\n  style.append(styleText)\n\n  return style\n}\n\nexport const renderSmallRequestButton = (id: string, anchor: HTMLAnchorElement, type: SmallButtonType, invert?: boolean) => {\n  anchor.append(renderStyle(id, type, invert))\n  anchor.append(renderBloomLogo(id))\n}\n","import {oneLine, stripIndents} from 'common-tags'\nimport {renderBloomLogo} from './renderBloomLogo'\nimport {MediumButtonType} from '../../types'\n\nconst renderStyle = (id: string, type: MediumButtonType) => {\n  const style = document.createElement('style')\n\n  let styleText = stripIndents(oneLine)`\n    #${id} {\n      background-color: #6262F6;\n      color: #fff;\n      text-decoration: none;\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      border-radius: 4px;\n      padding: 7px 17px;\n      box-sizing: border-box;\n    }\n\n    #${id}-text-and-logo {\n      display: flex;\n      width: 100%;\n      align-items: center;\n      justify-content: center;\n    }\n\n    #${id}-logo {\n      margin-right: 4px;\n      height: 16px;\n    }\n  `\n\n  if (['sign-up', 'log-in', 'verify'].indexOf(type) >= 0) {\n    styleText += stripIndents(oneLine)`\n      #${id}-text {\n        margin-top: 2px;\n      }\n    `\n  }\n\n  style.append(styleText)\n\n  return style\n}\n\nconst renderText = (id: string, d: string, width: string, height: string) => {\n  const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n  svg.id = `${id}-text`\n  svg.setAttribute('width', width)\n  svg.setAttribute('height', height)\n\n  const text = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n  text.setAttribute('d', d)\n  text.setAttribute('fill', 'currentColor')\n  text.setAttribute('fill-rulle', 'evenodd')\n\n  svg.appendChild(text)\n\n  return svg\n}\n\n/* tslint:disable:max-line-length */\nconst texts: {[k in MediumButtonType]: {d: string; width: string; height: string}} = {\n  'log-in': {\n    d:\n      'M0 9.806V.436h2V8.05h3.508v1.755H0zm9.629-1.741c.789 0 1.441-.571 1.441-1.455 0-.857-.652-1.442-1.441-1.442-.775 0-1.428.585-1.428 1.442 0 .884.653 1.455 1.428 1.455zm0 1.85c-1.795 0-3.291-1.306-3.291-3.305 0-2 1.496-3.292 3.29-3.292 1.796 0 3.306 1.292 3.306 3.292 0 1.999-1.51 3.304-3.305 3.304zm9.316-3.305c0-.952-.748-1.496-1.537-1.496-.802 0-1.523.598-1.523 1.496 0 .952.72 1.55 1.523 1.55.775 0 1.537-.626 1.537-1.55zm-3.319 3.644c.218.585.966 1.02 1.605 1.02 1.442 0 1.836-.992 1.755-2.257-.3.585-1.116.925-1.904.925-1.632 0-3.17-1.292-3.17-3.292 0-2.04 1.538-3.332 3.17-3.332.788 0 1.59.34 1.904.925v-.789h1.836v5.468c0 2.733-1.333 4.052-3.59 4.052-1.402 0-2.598-.788-3.129-1.972.476-.23 1.047-.516 1.523-.748zM26.112.435h1.986v9.37h-1.986V.436zm5.848 6.011v3.36h-1.89V3.454h1.89v.925c.34-.639 1.088-1.06 1.836-1.06 1.428 0 2.326.883 2.326 2.692v3.795h-1.89V6.419c0-.843-.463-1.265-1.102-1.265-.667 0-1.17.327-1.17 1.292zm18.523-2.992l-2.23 6.352h-1.578l-1.251-4.04-1.197 4.04H42.65L40.35 3.454h2.013l1.129 3.781 1.115-3.78h1.618l1.116 3.78 1.128-3.78h2.013zm2.883 0v6.352H51.49V3.454h1.876zm-2.121-2.352c0-.626.544-1.102 1.183-1.102.64 0 1.156.476 1.156 1.102 0 .625-.517 1.115-1.156 1.115-.64 0-1.183-.49-1.183-1.115zm6.337 2.352h1.333V4.95h-1.333v4.856h-1.876V4.95H54.55V3.454h1.156V1.02h1.876v2.434zm4.38 2.992v3.36h-1.89V0h1.89v4.447c.258-.789 1.183-1.129 1.781-1.129 1.673 0 2.543 1.116 2.543 3.033v3.455h-1.89V6.419c0-.83-.598-1.265-1.17-1.265-.598 0-1.264.327-1.264 1.292zm16.061-3.4c0 .612-.313 1.388-1.278 1.755 1.237.313 1.768 1.373 1.768 2.135 0 1.55-1.129 2.87-2.992 2.87h-4.026V.436h3.754c1.686 0 2.774 1.006 2.774 2.61zm-4.529 1.088h1.564c.517 0 .87-.408.87-.965 0-.585-.298-.98-.883-.98h-1.55v1.945zm1.877 1.646h-1.877v2.271h1.918c.666 0 1.006-.598 1.006-1.156 0-.53-.34-1.115-1.047-1.115zM79.927 0h1.89v9.806h-1.89V0zm6.542 8.065c.789 0 1.441-.571 1.441-1.455 0-.857-.652-1.442-1.441-1.442-.775 0-1.428.585-1.428 1.442 0 .884.653 1.455 1.428 1.455zm0 1.85c-1.795 0-3.291-1.306-3.291-3.305 0-2 1.496-3.292 3.29-3.292 1.796 0 3.306 1.292 3.306 3.292 0 1.999-1.51 3.304-3.305 3.304zm7.575-1.85c.789 0 1.442-.571 1.442-1.455 0-.857-.653-1.442-1.442-1.442-.775 0-1.428.585-1.428 1.442 0 .884.653 1.455 1.428 1.455zm0 1.85c-1.795 0-3.291-1.306-3.291-3.305 0-2 1.496-3.292 3.291-3.292s3.305 1.292 3.305 3.292c0 1.999-1.51 3.304-3.305 3.304zm11.682-4.76c-.598 0-1.088.367-1.088 1.291v3.36h-1.89V6.378c-.014-.802-.503-1.224-1.047-1.224-.571 0-1.102.327-1.102 1.292v3.36h-1.89V3.454h1.89v.925c.3-.666.98-1.047 1.66-1.047 1.006 0 1.686.38 2.04 1.115.611-.993 1.455-1.129 1.903-1.129 1.51 0 2.448.966 2.448 2.884v3.604h-1.876V6.419c0-.83-.49-1.265-1.048-1.265z',\n    width: '109',\n    height: '13',\n  },\n  'sign-up': {\n    d:\n      'M0 7.072h1.992c.027.6.501 1.131 1.396 1.131.8 0 1.355-.381 1.368-.994.014-.423-.176-.79-1.124-1.063l-1.125-.314C.447 5.192.095 3.98.095 3.134.095 1.458 1.518.327 3.306.327c1.803 0 3.158 1.077 3.158 2.875H4.485c0-.627-.42-1.063-1.206-1.063-.69 0-1.206.382-1.206.94 0 .246.095.696 1.003.955l1.111.354c2.263.654 2.588 1.935 2.561 2.834-.027 1.867-1.707 2.753-3.36 2.753C1.355 9.975 0 8.762 0 7.072zm10.027-3.61v6.363h-1.87V3.46h1.87zM7.913 1.103C7.913.477 8.455 0 9.093 0c.636 0 1.151.477 1.151 1.104 0 .627-.515 1.117-1.152 1.117-.637 0-1.179-.49-1.179-1.117zm8.483 5.519c0-.954-.745-1.5-1.531-1.5-.8 0-1.518.6-1.518 1.5 0 .954.718 1.553 1.518 1.553.772 0 1.531-.627 1.531-1.553zm-3.306 3.652c.217.586.962 1.022 1.599 1.022 1.436 0 1.829-.995 1.748-2.262-.298.586-1.111.926-1.897.926-1.626 0-3.158-1.294-3.158-3.297 0-2.045 1.532-3.34 3.158-3.34.786 0 1.585.342 1.897.928v-.79h1.829v5.477c0 2.74-1.328 4.061-3.577 4.061-1.396 0-2.588-.79-3.117-1.976.474-.232 1.043-.518 1.518-.75zm8.794-3.816v3.366H20V3.46h1.884v.927c.339-.64 1.084-1.063 1.83-1.063 1.422 0 2.316.886 2.316 2.698v3.802h-1.883V6.432c0-.845-.46-1.267-1.098-1.267-.664 0-1.165.327-1.165 1.294zM34.77 8.081c.827 0 1.613-.64 1.613-1.608V.436h1.992v6.037c0 2.126-1.694 3.488-3.605 3.488-1.924 0-3.631-1.362-3.631-3.488V.436h2.019v6.037c0 .967.772 1.608 1.612 1.608zm7.385-1.417c0 .953.692 1.512 1.464 1.512.8 0 1.463-.6 1.463-1.512 0-.94-.664-1.54-1.463-1.54-.786 0-1.464.627-1.464 1.54zm-1.91-3.203h1.87v.79c.311-.585 1.07-.926 1.856-.926 1.626 0 3.063 1.294 3.063 3.298 0 2.044-1.437 3.338-3.063 3.338-.786 0-1.545-.327-1.856-.913v3.897h-1.87V3.461zm20.8 0l-2.223 6.364h-1.571l-1.247-4.047-1.192 4.047H53.24L50.95 3.46h2.005L54.08 7.25l1.111-3.788h1.612l1.112 3.788 1.124-3.788h2.006zm2.872 0v6.364h-1.87V3.46h1.87zm-2.113-2.357c0-.627.542-1.104 1.178-1.104.637 0 1.152.477 1.152 1.104 0 .627-.515 1.117-1.152 1.117-.636 0-1.178-.49-1.178-1.117zm6.314 2.357h1.328v1.5h-1.328v4.864h-1.87V4.96h-1.152V3.461h1.152V1.022h1.87v2.44zm4.363 2.998v3.366h-1.883V0h1.883v4.456c.258-.79 1.18-1.131 1.775-1.131 1.667 0 2.534 1.117 2.534 3.039v3.46h-1.883V6.433c0-.831-.596-1.267-1.165-1.267-.597 0-1.26.327-1.26 1.294zm16.003-3.407c0 .614-.311 1.39-1.273 1.758 1.233.314 1.761 1.377 1.761 2.14 0 1.553-1.124 2.875-2.98 2.875H81.98V.436h3.74c1.68 0 2.764 1.008 2.764 2.616zm-4.512 1.09h1.558c.515 0 .868-.408.868-.967 0-.586-.298-.981-.881-.981h-1.545v1.949zm1.87 1.65h-1.87v2.275h1.91c.665 0 1.003-.6 1.003-1.158 0-.532-.338-1.118-1.043-1.118zM90.382 0h1.883v9.825h-1.884V0zm6.517 8.08c.786 0 1.437-.572 1.437-1.457 0-.859-.65-1.445-1.437-1.445-.772 0-1.423.586-1.423 1.445 0 .885.65 1.458 1.423 1.458zm0 1.854c-1.788 0-3.279-1.308-3.279-3.311 0-2.004 1.49-3.298 3.28-3.298 1.788 0 3.292 1.294 3.292 3.298 0 2.003-1.504 3.311-3.293 3.311zm7.548-1.853c.786 0 1.436-.573 1.436-1.458 0-.859-.65-1.445-1.436-1.445-.773 0-1.423.586-1.423 1.445 0 .885.65 1.458 1.423 1.458zm0 1.853c-1.789 0-3.28-1.308-3.28-3.311 0-2.004 1.491-3.298 3.28-3.298 1.788 0 3.293 1.294 3.293 3.298 0 2.003-1.505 3.311-3.293 3.311zm11.64-4.77c-.597 0-1.084.368-1.084 1.295v3.366h-1.884V6.39c-.013-.804-.501-1.226-1.043-1.226-.57 0-1.098.327-1.098 1.294v3.366h-1.883V3.46h1.883v.927c.298-.668.976-1.05 1.653-1.05 1.003 0 1.68.382 2.033 1.118.61-.995 1.45-1.131 1.897-1.131 1.504 0 2.439.967 2.439 2.889v3.61h-1.87V6.433c0-.831-.488-1.267-1.043-1.267z',\n    width: '119',\n    height: '13',\n  },\n  connect: {\n    d:\n      'M7.027 6.813l1.6 1.121C7.815 9.18 6.39 10 4.695 10 2.02 10 0 7.825 0 5.171 0 2.49 2.021.328 4.694.328c1.668 0 3.08.794 3.893 1.998L6.973 3.447c-.502-.738-1.316-1.23-2.28-1.23-1.56 0-2.699 1.312-2.699 2.954 0 1.628 1.14 2.941 2.7 2.941.977 0 1.831-.533 2.333-1.3zm5.67 1.3c.787 0 1.439-.575 1.439-1.465 0-.861-.652-1.45-1.438-1.45-.774 0-1.425.589-1.425 1.45 0 .89.651 1.464 1.425 1.464zm0 1.86c-1.79 0-3.282-1.314-3.282-3.325 0-2.01 1.492-3.31 3.283-3.31 1.79 0 3.296 1.3 3.296 3.31 0 2.011-1.506 3.325-3.296 3.325zm6.54-3.489v3.38H17.35v-6.39h1.885v.93c.34-.642 1.086-1.066 1.832-1.066 1.424 0 2.32.89 2.32 2.709v3.816h-1.886V6.457c0-.848-.461-1.272-1.099-1.272-.665 0-1.167.328-1.167 1.3zm7.705 0v3.38h-1.886v-6.39h1.886v.93c.339-.642 1.085-1.066 1.831-1.066 1.425 0 2.32.89 2.32 2.709v3.816h-1.886V6.457c0-.848-.46-1.272-1.098-1.272-.665 0-1.167.328-1.167 1.3zm10.27 1.272l1.37.944c-.638.958-1.818 1.3-2.89 1.3-1.818 0-3.31-1.34-3.31-3.352 0-2.01 1.492-3.31 3.31-3.31 1.804 0 3.242 1.354 3.242 3.365 0 .164-.013.424-.027.588h-4.64c.095.74.896 1.067 1.56 1.067.516 0 1.072-.191 1.384-.602zm-2.917-1.655h2.74c-.095-.78-.8-1.094-1.33-1.094-.529 0-1.248.287-1.41 1.094zm5.548.547c0-2.01 1.628-3.31 3.446-3.31 1.126 0 2.143.492 2.754 1.354L44.51 5.8c-.258-.41-.733-.643-1.221-.643-.8 0-1.574.575-1.574 1.491 0 .917.773 1.533 1.574 1.533.488 0 .963-.233 1.22-.643l1.534 1.094C45.446 9.494 44.428 10 43.289 10c-1.818 0-3.446-1.34-3.446-3.352zm9.971-3.173h1.33v1.504h-1.33v4.884h-1.872V4.98h-1.153V3.475h1.153V1.026h1.872v2.449zm10.35 6.388h-2.02V5.595L54.533.438h2.361l2.252 3.53 2.28-3.53h2.36l-3.622 5.184v4.241zm7.177-1.75c.787 0 1.438-.575 1.438-1.465 0-.861-.651-1.45-1.438-1.45-.773 0-1.424.589-1.424 1.45 0 .89.65 1.464 1.424 1.464zm0 1.86c-1.79 0-3.283-1.314-3.283-3.325 0-2.01 1.492-3.31 3.283-3.31 1.79 0 3.297 1.3 3.297 3.31 0 2.011-1.506 3.325-3.297 3.325zm8.737-3.12V3.476h1.885v6.388h-1.885v-.875C75.738 9.63 75.047 10 74.436 10c-1.424 0-2.51-.89-2.51-2.709V3.475h1.886V6.88c0 1.012.692 1.272 1.126 1.272.583 0 1.14-.328 1.14-1.3zm5.507.78v2.23H79.7V3.475h1.885V5.02c.326-1.19 1.14-1.683 1.791-1.683.448 0 .787.082 1.085.232l-.339 1.71c-.34-.164-.665-.191-.963-.191-1.085 0-1.574.862-1.574 2.544zM95.49 3.064c0 .616-.312 1.396-1.275 1.765 1.235.315 1.764 1.382 1.764 2.148 0 1.56-1.126 2.886-2.985 2.886H88.98V.438h3.744c1.682 0 2.767 1.012 2.767 2.626zM90.973 4.16h1.56c.515 0 .868-.41.868-.972 0-.588-.298-.985-.882-.985h-1.546V4.16zm1.872 1.655h-1.872v2.284h1.913c.664 0 1.004-.601 1.004-1.162 0-.534-.34-1.122-1.045-1.122zM97.39 0h1.885v9.863H97.39V0zm6.525 8.112c.787 0 1.438-.574 1.438-1.464 0-.861-.651-1.45-1.438-1.45-.774 0-1.425.589-1.425 1.45 0 .89.651 1.464 1.425 1.464zm0 1.86c-1.791 0-3.283-1.313-3.283-3.324 0-2.01 1.492-3.31 3.283-3.31 1.79 0 3.296 1.3 3.296 3.31 0 2.011-1.506 3.325-3.296 3.325zm7.556-1.86c.787 0 1.438-.574 1.438-1.464 0-.861-.651-1.45-1.438-1.45-.773 0-1.424.589-1.424 1.45 0 .89.65 1.464 1.424 1.464zm0 1.86c-1.79 0-3.283-1.313-3.283-3.324 0-2.01 1.492-3.31 3.283-3.31 1.79 0 3.296 1.3 3.296 3.31 0 2.011-1.505 3.325-3.296 3.325zm11.653-4.787c-.597 0-1.085.369-1.085 1.3v3.378h-1.886V6.416c-.013-.807-.502-1.231-1.044-1.231-.57 0-1.1.328-1.1 1.3v3.378h-1.885V3.475h1.886v.93c.298-.67.976-1.053 1.655-1.053 1.004 0 1.682.383 2.035 1.121.61-.998 1.451-1.135 1.899-1.135 1.506 0 2.442.971 2.442 2.9v3.625h-1.872V6.457c0-.835-.489-1.272-1.045-1.272zM127.94.438h1.98v9.425h-1.98V.438zm6.159 1.82v5.786h1.682c1.492 0 2.238-1.327 2.238-2.873 0-1.56-.746-2.914-2.238-2.914h-1.682zm1.682 7.605h-3.663V.438h3.663C138.467.438 140 2.49 140 5.17c0 2.668-1.533 4.692-4.219 4.692z',\n    width: '140',\n    height: '10',\n  },\n  bloom: {\n    d:\n      'M6.5 3.073c0 .617-.31 1.399-1.272 1.77 1.232.315 1.76 1.385 1.76 2.153 0 1.564-1.124 2.894-2.98 2.894H0V.44h3.738C5.418.439 6.5 1.454 6.5 3.073zM1.99 4.17h1.558c.515 0 .867-.411.867-.974 0-.59-.298-.987-.88-.987H1.99V4.17zm1.87 1.66H1.99v2.29H3.9c.664 0 1.003-.603 1.003-1.165 0-.535-.339-1.125-1.043-1.125zM8.397 0h1.882v9.89H8.397V0zm6.514 8.134c.786 0 1.436-.576 1.436-1.467 0-.865-.65-1.454-1.436-1.454-.772 0-1.422.59-1.422 1.454 0 .891.65 1.467 1.422 1.467zm0 1.866c-1.788 0-3.277-1.317-3.277-3.333 0-2.017 1.49-3.32 3.277-3.32 1.788 0 3.291 1.303 3.291 3.32 0 2.016-1.503 3.333-3.29 3.333zm7.544-1.866c.785 0 1.435-.576 1.435-1.467 0-.865-.65-1.454-1.435-1.454-.772 0-1.422.59-1.422 1.454 0 .891.65 1.467 1.422 1.467zm0 1.866c-1.788 0-3.278-1.317-3.278-3.333 0-2.017 1.49-3.32 3.278-3.32 1.787 0 3.29 1.303 3.29 3.32 0 2.016-1.503 3.333-3.29 3.333zm11.633-4.801c-.596 0-1.083.37-1.083 1.303V9.89h-1.883V6.433c-.013-.809-.5-1.234-1.043-1.234-.568 0-1.097.33-1.097 1.303V9.89H27.1V3.484h1.882v.933c.298-.672.976-1.056 1.653-1.056 1.002 0 1.68.384 2.031 1.125.61-1.002 1.45-1.139 1.896-1.139 1.504 0 2.438.974 2.438 2.908V9.89h-1.869V6.475c0-.837-.488-1.276-1.043-1.276z',\n    width: '37',\n    height: '10',\n  },\n  verify: {\n    d:\n      'M.744.974h2.063l1.67 6.185L6.133.974H8.21l-2.85 9.428H3.594L.744.974zm13.005 7.32l1.37.945c-.637.958-1.818 1.3-2.89 1.3-1.82 0-3.313-1.34-3.313-3.352 0-2.012 1.493-3.312 3.312-3.312 1.806 0 3.245 1.355 3.245 3.366 0 .164-.014.424-.028.589h-4.642c.095.739.896 1.067 1.56 1.067.517 0 1.073-.192 1.386-.602zM10.83 6.64h2.742c-.095-.78-.8-1.095-1.33-1.095s-1.25.288-1.412 1.095zm7.819 1.533v2.23h-1.887v-6.39h1.887v1.546c.326-1.19 1.14-1.683 1.792-1.683.448 0 .787.082 1.086.233l-.34 1.71c-.339-.164-.665-.191-.963-.191-1.086 0-1.575.862-1.575 2.545zm5.728-4.16v6.39h-1.873v-6.39h1.873zM22.26 1.644c0-.63.543-1.108 1.18-1.108.639 0 1.155.479 1.155 1.108 0 .63-.516 1.123-1.154 1.123-.638 0-1.181-.493-1.181-1.123zM30.31.536v1.82h-.693c-.651 0-.963.465-.963 1.218v.438h1.276v1.505h-1.276v4.885h-1.9V5.517h-1.196V4.012h1.195v-.438c0-1.957 1.045-3.038 2.864-3.038h.693zm6.787 3.476l-3.91 9.524h-1.995l1.52-3.79-2.443-5.734h2.009l1.398 3.626 1.412-3.626h2.009zm13.588 0l-2.226 6.39h-1.575l-1.249-4.064-1.194 4.064h-1.575l-2.294-6.39h2.01l1.126 3.804 1.113-3.804h1.615l1.113 3.804 1.127-3.804h2.01zm2.878 0v6.39H51.69v-6.39h1.873zm-2.118-2.368c0-.63.543-1.108 1.181-1.108s1.154.479 1.154 1.108c0 .63-.516 1.123-1.154 1.123-.638 0-1.18-.493-1.18-1.123zm6.326 2.368h1.33v1.505h-1.33v4.885h-1.873V5.517h-1.154V4.012h1.154v-2.45h1.873v2.45zm4.371 3.01v3.38h-1.887V.536h1.887v4.475c.258-.794 1.181-1.136 1.778-1.136 1.67 0 2.539 1.122 2.539 3.052v3.475h-1.887V6.995c0-.835-.597-1.273-1.167-1.273-.598 0-1.263.329-1.263 1.3zm16.032-3.42c0 .615-.312 1.395-1.276 1.765 1.235.314 1.765 1.382 1.765 2.148 0 1.56-1.127 2.887-2.987 2.887h-4.018V.974h3.747c1.683 0 2.769 1.013 2.769 2.627zm-4.52 1.094h1.56c.516 0 .87-.41.87-.972 0-.588-.3-.985-.883-.985h-1.547v1.957zm1.873 1.656h-1.873v2.285h1.914c.665 0 1.004-.602 1.004-1.163 0-.534-.34-1.122-1.045-1.122zM80.074.536h1.887v9.866h-1.887V.536zm6.53 8.115c.787 0 1.439-.575 1.439-1.464 0-.863-.652-1.451-1.44-1.451-.773 0-1.425.588-1.425 1.45 0 .89.652 1.465 1.426 1.465zm0 1.86c-1.792 0-3.285-1.313-3.285-3.324 0-2.012 1.493-3.312 3.285-3.312s3.298 1.3 3.298 3.312c0 2.011-1.506 3.325-3.298 3.325zm7.56-1.86c.788 0 1.44-.575 1.44-1.464 0-.863-.652-1.451-1.44-1.451-.773 0-1.425.588-1.425 1.45 0 .89.652 1.465 1.426 1.465zm0 1.86c-1.791 0-3.284-1.313-3.284-3.324 0-2.012 1.493-3.312 3.285-3.312s3.298 1.3 3.298 3.312c0 2.011-1.506 3.325-3.298 3.325zm11.661-4.789c-.597 0-1.086.37-1.086 1.3v3.38h-1.886V6.954c-.014-.807-.503-1.232-1.046-1.232-.57 0-1.1.329-1.1 1.3v3.38h-1.886v-6.39h1.887v.93c.298-.67.977-1.053 1.656-1.053 1.004 0 1.683.383 2.036 1.122.611-1 1.453-1.136 1.9-1.136 1.507 0 2.444.972 2.444 2.901v3.626h-1.873V6.995c0-.835-.489-1.273-1.046-1.273z',\n    width: '109',\n    height: '14',\n  },\n}\n/* tslint:enable:max-line-length */\n\nconst renderTextAndLogo = (id: string, type: MediumButtonType) => {\n  const textAndLogo = document.createElement('span')\n  textAndLogo.id = `${id}-text-and-logo`\n  textAndLogo.appendChild(renderBloomLogo(id))\n\n  const text = texts[type]\n\n  textAndLogo.appendChild(renderText(id, text.d, text.width, text.height))\n\n  return textAndLogo\n}\n\nexport const renderMediumRequestButton = (id: string, anchor: HTMLAnchorElement, type: MediumButtonType) => {\n  anchor.append(renderStyle(id, type))\n  anchor.append(renderTextAndLogo(id, type))\n}\n","import {oneLine, stripIndents} from 'common-tags'\n\nimport {renderBloomLogo} from './renderBloomLogo'\nimport {LargeButtonType} from './../../types'\n\nconst backgroundPattern = `\n  <svg width=\"281\" height=\"48\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n    <defs>\n      <rect id=\"a\" width=\"335\" height=\"48\" rx=\"4\"/>\n      <path d=\"M0 0h281c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"c\"/>\n      <linearGradient x1=\"83.3806005%\" y1=\"6.01770792%\" x2=\"130.86599%\" y2=\"100%\" id=\"d\">\n        <stop stop-color=\"#7A7CF3\" offset=\"0%\"/>\n        <stop stop-color=\"#6262F6\" offset=\"100%\"/>\n      </linearGradient>\n      <path d=\"M0 0h281c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"f\"/>\n      <path d=\"M0 0h281c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"h\"/>\n      <path d=\"M0 0h281c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"j\"/>\n      <path d=\"M0 0h281c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"l\"/>\n      <path d=\"M0 0h281c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"n\"/>\n      <path d=\"M0 0h281c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"p\"/>\n      <path d=\"M0 0h281c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"r\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"t\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"v\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"x\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"z\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"B\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"D\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"F\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"H\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"J\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"L\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"N\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"P\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"R\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"T\"/>\n      <path d=\"M0 0h226c13.254834 0 24 10.745166 24 24s-10.745166 24-24 24H0V0z\" id=\"V\"/>\n      <path d=\"M0 0h144.64C153.123094 0 160 10.745166 160 24s-6.876906 24-15.36 24H0V0z\" id=\"X\"/>\n    </defs>\n    <g transform=\"translate(-41)\" fill=\"none\" fill-rule=\"evenodd\">\n      <mask id=\"b\" fill=\"#fff\">\n        <use xlink:href=\"#a\"/>\n      </mask>\n      <g mask=\"url(#b)\">\n        <g transform=\"translate(41)\">\n          <mask id=\"e\" fill=\"#fff\">\n            <use xlink:href=\"#c\"/>\n          </mask>\n          <circle stroke=\"url(#d)\" stroke-width=\"2\" mask=\"url(#e)\" cx=\"-3\" cy=\"24\" r=\"25\"/>\n        </g>\n        <g transform=\"translate(41)\">\n          <mask id=\"g\" fill=\"#fff\">\n            <use xlink:href=\"#f\"/>\n          </mask>\n          <circle stroke=\"url(#d)\" stroke-width=\"2\" mask=\"url(#g)\" cx=\"1\" cy=\"24\" r=\"27\"/>\n        </g>\n        <g transform=\"translate(41)\">\n          <mask id=\"i\" fill=\"#fff\">\n            <use xlink:href=\"#h\"/>\n          </mask>\n          <circle stroke=\"url(#d)\" stroke-width=\"2\" mask=\"url(#i)\" cx=\"5\" cy=\"24\" r=\"29\"/>\n        </g>\n        <g transform=\"translate(41)\">\n          <mask id=\"k\" fill=\"#fff\">\n            <use xlink:href=\"#j\"/>\n          </mask>\n          <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".8\" mask=\"url(#k)\" cx=\"9\" cy=\"24\" r=\"31\"/>\n        </g>\n        <g transform=\"translate(41)\">\n          <mask id=\"m\" fill=\"#fff\">\n            <use xlink:href=\"#l\"/>\n          </mask>\n          <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".8\" mask=\"url(#m)\" cx=\"13\" cy=\"24\" r=\"33\"/>\n        </g>\n        <g transform=\"translate(41)\">\n          <mask id=\"o\" fill=\"#fff\">\n            <use xlink:href=\"#n\"/>\n          </mask>\n          <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".7\" mask=\"url(#o)\" cx=\"18\" cy=\"24\" r=\"34\"/>\n        </g>\n        <g transform=\"translate(41)\">\n          <mask id=\"q\" fill=\"#fff\">\n            <use xlink:href=\"#p\"/>\n          </mask>\n          <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".7\" mask=\"url(#q)\" cx=\"23\" cy=\"24\" r=\"35\"/>\n        </g>\n        <g transform=\"translate(41)\">\n          <mask id=\"s\" fill=\"#fff\">\n            <use xlink:href=\"#r\"/>\n          </mask>\n          <g mask=\"url(#s)\">\n            <g transform=\"translate(55)\">\n              <mask id=\"u\" fill=\"#fff\">\n                <use xlink:href=\"#t\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".6\" mask=\"url(#u)\" cx=\"-27\" cy=\"24\" r=\"36\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"w\" fill=\"#fff\">\n                <use xlink:href=\"#v\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".6\" mask=\"url(#w)\" cx=\"-22\" cy=\"24\" r=\"37\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"y\" fill=\"#fff\">\n                <use xlink:href=\"#x\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".6\" mask=\"url(#y)\" cx=\"-17\" cy=\"24\" r=\"38\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"A\" fill=\"#fff\">\n                <use xlink:href=\"#z\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".55\" mask=\"url(#A)\" cx=\"-12\" cy=\"24\" r=\"39\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"C\" fill=\"#fff\">\n                <use xlink:href=\"#B\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".55\" mask=\"url(#C)\" cx=\"-7\" cy=\"24\" r=\"40\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"E\" fill=\"#fff\">\n                <use xlink:href=\"#D\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".55\" mask=\"url(#E)\" cx=\"-2\" cy=\"24\" r=\"41\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"G\" fill=\"#fff\">\n                <use xlink:href=\"#F\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".55\" mask=\"url(#G)\" cx=\"3\" cy=\"24\" r=\"42\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"I\" fill=\"#fff\">\n                <use xlink:href=\"#H\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".55\" mask=\"url(#I)\" cx=\"8\" cy=\"24\" r=\"43\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"K\" fill=\"#fff\">\n                <use xlink:href=\"#J\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".5\" mask=\"url(#K)\" cx=\"13\" cy=\"24\" r=\"44\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"M\" fill=\"#fff\">\n                <use xlink:href=\"#L\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".5\" mask=\"url(#M)\" cx=\"18\" cy=\"24\" r=\"45\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"O\" fill=\"#fff\">\n                <use xlink:href=\"#N\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".5\" mask=\"url(#O)\" cx=\"23\" cy=\"24\" r=\"46\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"Q\" fill=\"#fff\">\n                <use xlink:href=\"#P\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".5\" mask=\"url(#Q)\" cx=\"28\" cy=\"24\" r=\"47\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"S\" fill=\"#fff\">\n                <use xlink:href=\"#R\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".5\" mask=\"url(#S)\" cx=\"33\" cy=\"24\" r=\"48\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"U\" fill=\"#fff\">\n                <use xlink:href=\"#T\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".45\" mask=\"url(#U)\" cx=\"38\" cy=\"24\" r=\"49\"/>\n            </g>\n            <g transform=\"translate(55)\">\n              <mask id=\"W\" fill=\"#fff\">\n                <use xlink:href=\"#V\"/>\n              </mask>\n              <circle stroke=\"url(#d)\" stroke-width=\"2\" opacity=\".45\" mask=\"url(#W)\" cx=\"43\" cy=\"24\" r=\"50\"/>\n            </g>\n            <g transform=\"translate(145)\">\n              <mask id=\"Y\" fill=\"#fff\">\n                <use xlink:href=\"#X\"/>\n              </mask>\n              <g mask=\"url(#Y)\">\n                <g stroke=\"url(#d)\" stroke-width=\"2\" transform=\"translate(-105 -66)\">\n                  <circle opacity=\".45\" transform=\"rotate(15 63 90)\" cx=\"63\" cy=\"90\" r=\"51\"/>\n                  <circle opacity=\".45\" transform=\"rotate(15 68 90)\" cx=\"68\" cy=\"90\" r=\"52\"/>\n                  <circle opacity=\".45\" transform=\"rotate(15 73 90)\" cx=\"73\" cy=\"90\" r=\"53\"/>\n                  <circle opacity=\".45\" transform=\"rotate(15 78 90)\" cx=\"78\" cy=\"90\" r=\"54\"/>\n                  <circle opacity=\".4\" transform=\"rotate(15 83 90)\" cx=\"83\" cy=\"90\" r=\"55\"/>\n                  <circle opacity=\".4\" transform=\"rotate(15 88 90)\" cx=\"88\" cy=\"90\" r=\"56\"/>\n                  <circle opacity=\".4\" transform=\"rotate(15 93 90)\" cx=\"93\" cy=\"90\" r=\"57\"/>\n                  <circle opacity=\".4\" transform=\"rotate(15 98 90)\" cx=\"98\" cy=\"90\" r=\"58\"/>\n                  <circle opacity=\".4\" transform=\"rotate(15 103 90)\" cx=\"103\" cy=\"90\" r=\"59\"/>\n                  <circle opacity=\".35\" transform=\"rotate(15 108 90)\" cx=\"108\" cy=\"90\" r=\"60\"/>\n                  <circle opacity=\".35\" transform=\"rotate(15 113 90)\" cx=\"113\" cy=\"90\" r=\"61\"/>\n                  <circle opacity=\".35\" transform=\"rotate(15 118 89)\" cx=\"118\" cy=\"89\" r=\"62\"/>\n                  <circle opacity=\".35\" transform=\"rotate(15 123 89)\" cx=\"123\" cy=\"89\" r=\"63\"/>\n                  <circle opacity=\".3\" transform=\"rotate(15 128 89)\" cx=\"128\" cy=\"89\" r=\"64\"/>\n                  <circle opacity=\".3\" transform=\"rotate(15 133 89)\" cx=\"133\" cy=\"89\" r=\"65\"/>\n                  <circle opacity=\".3\" transform=\"rotate(15 138 89)\" cx=\"138\" cy=\"89\" r=\"66\"/>\n                  <circle opacity=\".25\" transform=\"rotate(15 143 89)\" cx=\"143\" cy=\"89\" r=\"67\"/>\n                  <circle opacity=\".25\" transform=\"rotate(15 148 89)\" cx=\"148\" cy=\"89\" r=\"68\"/>\n                  <circle opacity=\".2\" transform=\"rotate(15 153 89)\" cx=\"153\" cy=\"89\" r=\"69\"/>\n                  <circle opacity=\".2\" transform=\"rotate(15 158 89)\" cx=\"158\" cy=\"89\" r=\"70\"/>\n                  <circle opacity=\".2\" transform=\"rotate(15 163 89)\" cx=\"163\" cy=\"89\" r=\"71\"/>\n                  <circle opacity=\".2\" transform=\"rotate(15 168 89)\" cx=\"168\" cy=\"89\" r=\"72\"/>\n                </g>\n              </g>\n            </g>\n          </g>\n        </g>\n      </g>\n    </g>\n  </svg>`\n\nconst renderStyle = (id: string, type: LargeButtonType) => {\n  const style = document.createElement('style')\n\n  let styleText = stripIndents(oneLine)`\n    #${id} {\n      position: relative;\n      background-image: url(data:image/svg+xml;base64,${window.btoa(backgroundPattern)}), linear-gradient(to right, #7A7CF3, #6262F6);\n      background-repeat: no-repeat;\n      background-position: left 39px center, left center;\n      background-size: 282px 100%, 100% 100%;\n      box-shadow: 0 4px 15px 0 rgba(98,98,246,0.50);\n      color: #fff;\n      text-decoration: none;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border-radius: 4px;\n      padding: 12px 39px;\n      box-sizing: border-box;\n    }\n\n    #${id}-lock {\n      position: absolute;\n      left: 19px;\n      top: 50%;\n      transform: translateY(-50%);\n      height: 20px;\n      color: #5a5de0;\n    }\n\n    #${id}-text-and-logo {\n      display: flex;\n      width: 100%;\n      align-items: center;\n      justify-content: center;\n      margin-left: 12px;\n      margin-right: 12px;\n    }\n\n    #${id}-logo {\n      margin-right: 6px;\n      height: 22px;\n    }\n  `\n\n  if (['sign-up', 'log-in', 'verify'].indexOf(type) >= 0) {\n    styleText += stripIndents(oneLine)`\n      #${id}-text {\n        margin-top: 2px;\n      }\n    `\n  }\n\n  style.append(styleText)\n\n  return style\n}\n\n/* tslint:disable:max-line-length */\nconst renderLockIcon = (id: string) => {\n  const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n  svg.id = `${id}-lock`\n  svg.setAttribute('viewBox', '0 0 24 24')\n\n  const lock = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n  lock.setAttribute(\n    'd',\n    'M19.5 9.5h-.75V6.75a6.75 6.75 0 0 0-13.5 0V9.5H4.5a2 2 0 0 0-2 2V22a2 2 0 0 0 2 2h15a2 2 0 0 0 2-2V11.5a2 2 0 0 0-2-2zm-9.5 6a2 2 0 1 1 3 1.723V19.5a1 1 0 0 1-2 0v-2.277a1.994 1.994 0 0 1-1-1.723zM7.75 6.75a4.25 4.25 0 0 1 8.5 0V9a.5.5 0 0 1-.5.5h-7.5a.5.5 0 0 1-.5-.5z',\n  )\n  lock.setAttribute('fill', 'currentColor')\n\n  svg.appendChild(lock)\n\n  return svg\n}\n/* tslint:enable:max-line-length */\n\nconst renderText = (id: string, d: string, width: string, height: string) => {\n  const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n  svg.id = `${id}-text`\n  svg.setAttribute('width', width)\n  svg.setAttribute('height', height)\n\n  const text = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n  text.setAttribute('d', d)\n  text.setAttribute('fill', 'currentColor')\n  text.setAttribute('fill-rulle', 'evenodd')\n\n  svg.appendChild(text)\n\n  return svg\n}\n\n/* tslint:disable:max-line-length */\nconst texts: {[k in LargeButtonType]: {d: string; width: string; height: string}} = {\n  'log-in': {\n    d:\n      'M.296 12V.976h2.352v8.96h4.128V12H.296zm11.328-2.048c.928 0 1.696-.672 1.696-1.712 0-1.008-.768-1.696-1.696-1.696-.912 0-1.68.688-1.68 1.696 0 1.04.768 1.712 1.68 1.712zm0 2.176c-2.112 0-3.872-1.536-3.872-3.888s1.76-3.872 3.872-3.872 3.888 1.52 3.888 3.872-1.776 3.888-3.888 3.888zm10.96-3.888c0-1.12-.88-1.76-1.808-1.76-.944 0-1.792.704-1.792 1.76 0 1.12.848 1.824 1.792 1.824.912 0 1.808-.736 1.808-1.824zm-3.904 4.288c.256.688 1.136 1.2 1.888 1.2 1.696 0 2.16-1.168 2.064-2.656-.352.688-1.312 1.088-2.24 1.088-1.92 0-3.728-1.52-3.728-3.872 0-2.4 1.808-3.92 3.728-3.92.928 0 1.872.4 2.24 1.088v-.928h2.16v6.432c0 3.216-1.568 4.768-4.224 4.768-1.648 0-3.056-.928-3.68-2.32.56-.272 1.232-.608 1.792-.88zM31.016.976h2.336V12h-2.336V.976zm6.88 7.072V12h-2.224V4.528h2.224v1.088c.4-.752 1.28-1.248 2.16-1.248 1.68 0 2.736 1.04 2.736 3.168V12h-2.224V8.016c0-.992-.544-1.488-1.296-1.488-.784 0-1.376.384-1.376 1.52zm21.792-3.52L57.064 12h-1.856l-1.472-4.752L52.328 12h-1.856l-2.704-7.472h2.368l1.328 4.448 1.312-4.448h1.904l1.312 4.448 1.328-4.448h2.368zm3.392 0V12h-2.208V4.528h2.208zM60.584 1.76c0-.736.64-1.296 1.392-1.296.752 0 1.36.56 1.36 1.296s-.608 1.312-1.36 1.312c-.752 0-1.392-.576-1.392-1.312zm7.456 2.768h1.568v1.76H68.04V12h-2.208V6.288h-1.36v-1.76h1.36V1.664h2.208v2.864zm5.152 3.52V12h-2.224V.464h2.224v5.232c.304-.928 1.392-1.328 2.096-1.328 1.968 0 2.992 1.312 2.992 3.568V12h-2.224V8.016c0-.976-.704-1.488-1.376-1.488-.704 0-1.488.384-1.488 1.52zm18.896-4c0 .72-.368 1.632-1.504 2.064 1.456.368 2.08 1.616 2.08 2.512 0 1.824-1.328 3.376-3.52 3.376h-4.736V.976h4.416c1.984 0 3.264 1.184 3.264 3.072zm-5.328 1.28h1.84c.608 0 1.024-.48 1.024-1.136 0-.688-.352-1.152-1.04-1.152H86.76v2.288zm2.208 1.936H86.76v2.672h2.256c.784 0 1.184-.704 1.184-1.36 0-.624-.4-1.312-1.232-1.312zm5.36-6.8h2.224V12h-2.224V.464zm7.696 9.488c.928 0 1.696-.672 1.696-1.712 0-1.008-.768-1.696-1.696-1.696-.912 0-1.68.688-1.68 1.696 0 1.04.768 1.712 1.68 1.712zm0 2.176c-2.112 0-3.872-1.536-3.872-3.888s1.76-3.872 3.872-3.872 3.888 1.52 3.888 3.872-1.776 3.888-3.888 3.888zm8.912-2.176c.928 0 1.696-.672 1.696-1.712 0-1.008-.768-1.696-1.696-1.696-.912 0-1.68.688-1.68 1.696 0 1.04.768 1.712 1.68 1.712zm0 2.176c-2.112 0-3.872-1.536-3.872-3.888s1.76-3.872 3.872-3.872 3.888 1.52 3.888 3.872-1.776 3.888-3.888 3.888zm13.744-5.6c-.704 0-1.28.432-1.28 1.52V12h-2.224V7.968c-.016-.944-.592-1.44-1.232-1.44-.672 0-1.296.384-1.296 1.52V12h-2.224V4.528h2.224v1.088c.352-.784 1.152-1.232 1.952-1.232 1.184 0 1.984.448 2.4 1.312.72-1.168 1.712-1.328 2.24-1.328 1.776 0 2.88 1.136 2.88 3.392V12h-2.208V8.016c0-.976-.576-1.488-1.232-1.488z',\n    width: '129',\n    height: '16',\n  },\n  'sign-up': {\n    d:\n      'M0 8.304h2.352c.032.704.592 1.328 1.648 1.328.944 0 1.6-.448 1.616-1.168.016-.496-.208-.928-1.328-1.248L2.96 6.848C.528 6.096.112 4.672.112 3.68c0-1.968 1.68-3.296 3.792-3.296 2.128 0 3.728 1.264 3.728 3.376H5.296c0-.736-.496-1.248-1.424-1.248-.816 0-1.424.448-1.424 1.104 0 .288.112.816 1.184 1.12l1.312.416C7.616 5.92 8 7.424 7.968 8.48 7.936 10.672 5.952 11.712 4 11.712c-2.4 0-4-1.424-4-3.408zm11.84-4.24v7.472H9.632V4.064h2.208zM9.344 1.296C9.344.56 9.984 0 10.736 0c.752 0 1.36.56 1.36 1.296s-.608 1.312-1.36 1.312c-.752 0-1.392-.576-1.392-1.312zm10.016 6.48c0-1.12-.88-1.76-1.808-1.76-.944 0-1.792.704-1.792 1.76 0 1.12.848 1.824 1.792 1.824.912 0 1.808-.736 1.808-1.824zm-3.904 4.288c.256.688 1.136 1.2 1.888 1.2 1.696 0 2.16-1.168 2.064-2.656-.352.688-1.312 1.088-2.24 1.088-1.92 0-3.728-1.52-3.728-3.872 0-2.4 1.808-3.92 3.728-3.92.928 0 1.872.4 2.24 1.088v-.928h2.16v6.432c0 3.216-1.568 4.768-4.224 4.768-1.648 0-3.056-.928-3.68-2.32.56-.272 1.232-.608 1.792-.88zm10.384-4.48v3.952h-2.224V4.064h2.224v1.088c.4-.752 1.28-1.248 2.16-1.248 1.68 0 2.736 1.04 2.736 3.168v4.464h-2.224V7.552c0-.992-.544-1.488-1.296-1.488-.784 0-1.376.384-1.376 1.52zm15.216 1.904c.976 0 1.904-.752 1.904-1.888V.512h2.352V7.6c0 2.496-2 4.096-4.256 4.096-2.272 0-4.288-1.6-4.288-4.096V.512h2.384V7.6c0 1.136.912 1.888 1.904 1.888zm8.72-1.664c0 1.12.816 1.776 1.728 1.776.944 0 1.728-.704 1.728-1.776 0-1.104-.784-1.808-1.728-1.808-.928 0-1.728.736-1.728 1.808zm-2.256-3.76h2.208v.928c.368-.688 1.264-1.088 2.192-1.088 1.92 0 3.616 1.52 3.616 3.872 0 2.4-1.696 3.92-3.616 3.92-.928 0-1.824-.384-2.192-1.072V15.2H47.52V4.064zm24.56 0l-2.624 7.472H67.6l-1.472-4.752-1.408 4.752h-1.856L60.16 4.064h2.368l1.328 4.448 1.312-4.448h1.904l1.312 4.448 1.328-4.448h2.368zm3.392 0v7.472h-2.208V4.064h2.208zm-2.496-2.768c0-.736.64-1.296 1.392-1.296.752 0 1.36.56 1.36 1.296s-.608 1.312-1.36 1.312c-.752 0-1.392-.576-1.392-1.312zm7.456 2.768H82v1.76h-1.568v5.712h-2.208V5.824h-1.36v-1.76h1.36V1.2h2.208v2.864zm5.152 3.52v3.952H83.36V0h2.224v5.232c.304-.928 1.392-1.328 2.096-1.328 1.968 0 2.992 1.312 2.992 3.568v4.064h-2.224V7.552c0-.976-.704-1.488-1.376-1.488-.704 0-1.488.384-1.488 1.52zm18.896-4c0 .72-.368 1.632-1.504 2.064 1.456.368 2.08 1.616 2.08 2.512 0 1.824-1.328 3.376-3.52 3.376H96.8V.512h4.416c1.984 0 3.264 1.184 3.264 3.072zm-5.328 1.28h1.84c.608 0 1.024-.48 1.024-1.136 0-.688-.352-1.152-1.04-1.152h-1.824v2.288zM101.36 6.8h-2.208v2.672h2.256c.784 0 1.184-.704 1.184-1.36 0-.624-.4-1.312-1.232-1.312zm5.36-6.8h2.224v11.536h-2.224V0zm7.696 9.488c.928 0 1.696-.672 1.696-1.712 0-1.008-.768-1.696-1.696-1.696-.912 0-1.68.688-1.68 1.696 0 1.04.768 1.712 1.68 1.712zm0 2.176c-2.112 0-3.872-1.536-3.872-3.888s1.76-3.872 3.872-3.872 3.888 1.52 3.888 3.872-1.776 3.888-3.888 3.888zm8.912-2.176c.928 0 1.696-.672 1.696-1.712 0-1.008-.768-1.696-1.696-1.696-.912 0-1.68.688-1.68 1.696 0 1.04.768 1.712 1.68 1.712zm0 2.176c-2.112 0-3.872-1.536-3.872-3.888s1.76-3.872 3.872-3.872 3.888 1.52 3.888 3.872-1.776 3.888-3.888 3.888zm13.744-5.6c-.704 0-1.28.432-1.28 1.52v3.952h-2.224V7.504c-.016-.944-.592-1.44-1.232-1.44-.672 0-1.296.384-1.296 1.52v3.952h-2.224V4.064h2.224v1.088c.352-.784 1.152-1.232 1.952-1.232 1.184 0 1.984.448 2.4 1.312.72-1.168 1.712-1.328 2.24-1.328 1.776 0 2.88 1.136 2.88 3.392v4.24h-2.208V7.552c0-.976-.576-1.488-1.232-1.488z',\n    width: '141',\n    height: '16',\n  },\n  connect: {\n    d:\n      'M8.288 7.968l1.888 1.312c-.96 1.456-2.64 2.416-4.64 2.416C2.384 11.696 0 9.152 0 6.048 0 2.912 2.384.384 5.536.384c1.968 0 3.632.928 4.592 2.336L8.224 4.032c-.592-.864-1.552-1.44-2.688-1.44-1.84 0-3.184 1.536-3.184 3.456 0 1.904 1.344 3.44 3.184 3.44 1.152 0 2.16-.624 2.752-1.52zm6.688 1.52c.928 0 1.696-.672 1.696-1.712 0-1.008-.768-1.696-1.696-1.696-.912 0-1.68.688-1.68 1.696 0 1.04.768 1.712 1.68 1.712zm0 2.176c-2.112 0-3.872-1.536-3.872-3.888s1.76-3.872 3.872-3.872 3.888 1.52 3.888 3.872-1.776 3.888-3.888 3.888zm7.712-4.08v3.952h-2.224V4.064h2.224v1.088c.4-.752 1.28-1.248 2.16-1.248 1.68 0 2.736 1.04 2.736 3.168v4.464H25.36V7.552c0-.992-.544-1.488-1.296-1.488-.784 0-1.376.384-1.376 1.52zm9.088 0v3.952h-2.224V4.064h2.224v1.088c.4-.752 1.28-1.248 2.16-1.248 1.68 0 2.736 1.04 2.736 3.168v4.464h-2.224V7.552c0-.992-.544-1.488-1.296-1.488-.784 0-1.376.384-1.376 1.52zm12.112 1.488l1.616 1.104c-.752 1.12-2.144 1.52-3.408 1.52-2.144 0-3.904-1.568-3.904-3.92s1.76-3.872 3.904-3.872c2.128 0 3.824 1.584 3.824 3.936 0 .192-.016.496-.032.688h-5.472c.112.864 1.056 1.248 1.84 1.248.608 0 1.264-.224 1.632-.704zm-3.44-1.936h3.232c-.112-.912-.944-1.28-1.568-1.28-.624 0-1.472.336-1.664 1.28zm6.544.64c0-2.352 1.92-3.872 4.064-3.872 1.328 0 2.528.576 3.248 1.584l-1.808 1.296c-.304-.48-.864-.752-1.44-.752-.944 0-1.856.672-1.856 1.744s.912 1.792 1.856 1.792c.576 0 1.136-.272 1.44-.752l1.808 1.28c-.704 1.008-1.904 1.6-3.248 1.6-2.144 0-4.064-1.568-4.064-3.92zm11.76-3.712h1.568v1.76h-1.568v5.712h-2.208V5.824h-1.36v-1.76h1.36V1.2h2.208v2.864zm12.208 7.472h-2.384V6.544L64.32.512h2.784L69.76 4.64 72.448.512h2.784L70.96 6.576v4.96zm8.464-2.048c.928 0 1.696-.672 1.696-1.712 0-1.008-.768-1.696-1.696-1.696-.912 0-1.68.688-1.68 1.696 0 1.04.768 1.712 1.68 1.712zm0 2.176c-2.112 0-3.872-1.536-3.872-3.888s1.76-3.872 3.872-3.872 3.888 1.52 3.888 3.872-1.776 3.888-3.888 3.888zm10.304-3.648V4.064h2.224v7.472h-2.224v-1.024c-.4.752-1.216 1.184-1.936 1.184-1.68 0-2.96-1.04-2.96-3.168V4.064h2.224v3.984c0 1.184.816 1.488 1.328 1.488.688 0 1.344-.384 1.344-1.52zm6.496.912v2.608H94V4.064h2.224v1.808c.384-1.392 1.344-1.968 2.112-1.968.528 0 .928.096 1.28.272l-.4 2c-.4-.192-.784-.224-1.136-.224-1.28 0-1.856 1.008-1.856 2.976zm16.4-5.344c0 .72-.368 1.632-1.504 2.064 1.456.368 2.08 1.616 2.08 2.512 0 1.824-1.328 3.376-3.52 3.376h-4.736V.512h4.416c1.984 0 3.264 1.184 3.264 3.072zm-5.328 1.28h1.84c.608 0 1.024-.48 1.024-1.136 0-.688-.352-1.152-1.04-1.152h-1.824v2.288zm2.208 1.936h-2.208v2.672h2.256c.784 0 1.184-.704 1.184-1.36 0-.624-.4-1.312-1.232-1.312zm5.36-6.8h2.224v11.536h-2.224V0zm7.696 9.488c.928 0 1.696-.672 1.696-1.712 0-1.008-.768-1.696-1.696-1.696-.912 0-1.68.688-1.68 1.696 0 1.04.768 1.712 1.68 1.712zm0 2.176c-2.112 0-3.872-1.536-3.872-3.888s1.76-3.872 3.872-3.872 3.888 1.52 3.888 3.872-1.776 3.888-3.888 3.888zm8.912-2.176c.928 0 1.696-.672 1.696-1.712 0-1.008-.768-1.696-1.696-1.696-.912 0-1.68.688-1.68 1.696 0 1.04.768 1.712 1.68 1.712zm0 2.176c-2.112 0-3.872-1.536-3.872-3.888s1.76-3.872 3.872-3.872 3.888 1.52 3.888 3.872-1.776 3.888-3.888 3.888zm13.744-5.6c-.704 0-1.28.432-1.28 1.52v3.952h-2.224V7.504c-.016-.944-.592-1.44-1.232-1.44-.672 0-1.296.384-1.296 1.52v3.952h-2.224V4.064h2.224v1.088c.352-.784 1.152-1.232 1.952-1.232 1.184 0 1.984.448 2.4 1.312.72-1.168 1.712-1.328 2.24-1.328 1.776 0 2.88 1.136 2.88 3.392v4.24h-2.208V7.552c0-.976-.576-1.488-1.232-1.488zm5.68-5.552h2.336v11.024h-2.336V.512zm7.264 2.128v6.768h1.984c1.76 0 2.64-1.552 2.64-3.36 0-1.824-.88-3.408-2.64-3.408h-1.984zm1.984 8.896h-4.32V.512h4.32c3.168 0 4.976 2.4 4.976 5.536 0 3.12-1.808 5.488-4.976 5.488z',\n    width: '166',\n    height: '12',\n  },\n  bloom: {\n    d:\n      'M7.68 3.584c0 .72-.368 1.632-1.504 2.064 1.456.368 2.08 1.616 2.08 2.512 0 1.824-1.328 3.376-3.52 3.376H0V.512h4.416C6.4.512 7.68 1.696 7.68 3.584zm-5.328 1.28h1.84c.608 0 1.024-.48 1.024-1.136 0-.688-.352-1.152-1.04-1.152H2.352v2.288zM4.56 6.8H2.352v2.672h2.256c.784 0 1.184-.704 1.184-1.36 0-.624-.4-1.312-1.232-1.312zM9.92 0h2.224v11.536H9.92V0zm7.696 9.488c.928 0 1.696-.672 1.696-1.712 0-1.008-.768-1.696-1.696-1.696-.912 0-1.68.688-1.68 1.696 0 1.04.768 1.712 1.68 1.712zm0 2.176c-2.112 0-3.872-1.536-3.872-3.888s1.76-3.872 3.872-3.872 3.888 1.52 3.888 3.872-1.776 3.888-3.888 3.888zm8.912-2.176c.928 0 1.696-.672 1.696-1.712 0-1.008-.768-1.696-1.696-1.696-.912 0-1.68.688-1.68 1.696 0 1.04.768 1.712 1.68 1.712zm0 2.176c-2.112 0-3.872-1.536-3.872-3.888s1.76-3.872 3.872-3.872 3.888 1.52 3.888 3.872-1.776 3.888-3.888 3.888zm13.744-5.6c-.704 0-1.28.432-1.28 1.52v3.952h-2.224V7.504c-.016-.944-.592-1.44-1.232-1.44-.672 0-1.296.384-1.296 1.52v3.952h-2.224V4.064h2.224v1.088c.352-.784 1.152-1.232 1.952-1.232 1.184 0 1.984.448 2.4 1.312.72-1.168 1.712-1.328 2.24-1.328 1.776 0 2.88 1.136 2.88 3.392v4.24h-2.208V7.552c0-.976-.576-1.488-1.232-1.488z',\n    width: '44',\n    height: '12',\n  },\n  verify: {\n    d:\n      'M0 .512h2.432L4.4 7.744 6.352.512H8.8L5.44 11.536H3.36L0 .512zm15.328 8.56l1.616 1.104c-.752 1.12-2.144 1.52-3.408 1.52-2.144 0-3.904-1.568-3.904-3.92s1.76-3.872 3.904-3.872c2.128 0 3.824 1.584 3.824 3.936 0 .192-.016.496-.032.688h-5.472c.112.864 1.056 1.248 1.84 1.248.608 0 1.264-.224 1.632-.704zm-3.44-1.936h3.232c-.112-.912-.944-1.28-1.568-1.28-.624 0-1.472.336-1.664 1.28zm9.216 1.792v2.608H18.88V4.064h2.224v1.808c.384-1.392 1.344-1.968 2.112-1.968.528 0 .928.096 1.28.272l-.4 2c-.4-.192-.784-.224-1.136-.224-1.28 0-1.856 1.008-1.856 2.976zm6.752-4.864v7.472h-2.208V4.064h2.208zM25.36 1.296C25.36.56 26 0 26.752 0c.752 0 1.36.56 1.36 1.296s-.608 1.312-1.36 1.312c-.752 0-1.392-.576-1.392-1.312zM34.848 0v2.128h-.816c-.768 0-1.136.544-1.136 1.424v.512H34.4v1.76h-1.504v5.712h-2.24V5.824h-1.408v-1.76h1.408v-.512C30.656 1.264 31.888 0 34.032 0h.816zm8 4.064L38.24 15.2h-2.352l1.792-4.432-2.88-6.704h2.368l1.648 4.24 1.664-4.24h2.368zm16.016 0l-2.624 7.472h-1.856l-1.472-4.752-1.408 4.752h-1.856l-2.704-7.472h2.368l1.328 4.448 1.312-4.448h1.904l1.312 4.448 1.328-4.448h2.368zm3.392 0v7.472h-2.208V4.064h2.208zM59.76 1.296C59.76.56 60.4 0 61.152 0c.752 0 1.36.56 1.36 1.296s-.608 1.312-1.36 1.312c-.752 0-1.392-.576-1.392-1.312zm7.456 2.768h1.568v1.76h-1.568v5.712h-2.208V5.824h-1.36v-1.76h1.36V1.2h2.208v2.864zm5.152 3.52v3.952h-2.224V0h2.224v5.232c.304-.928 1.392-1.328 2.096-1.328 1.968 0 2.992 1.312 2.992 3.568v4.064h-2.224V7.552c0-.976-.704-1.488-1.376-1.488-.704 0-1.488.384-1.488 1.52zm18.896-4c0 .72-.368 1.632-1.504 2.064 1.456.368 2.08 1.616 2.08 2.512 0 1.824-1.328 3.376-3.52 3.376h-4.736V.512H88c1.984 0 3.264 1.184 3.264 3.072zm-5.328 1.28h1.84c.608 0 1.024-.48 1.024-1.136 0-.688-.352-1.152-1.04-1.152h-1.824v2.288zM88.144 6.8h-2.208v2.672h2.256c.784 0 1.184-.704 1.184-1.36 0-.624-.4-1.312-1.232-1.312zm5.36-6.8h2.224v11.536h-2.224V0zm7.696 9.488c.928 0 1.696-.672 1.696-1.712 0-1.008-.768-1.696-1.696-1.696-.912 0-1.68.688-1.68 1.696 0 1.04.768 1.712 1.68 1.712zm0 2.176c-2.112 0-3.872-1.536-3.872-3.888s1.76-3.872 3.872-3.872 3.888 1.52 3.888 3.872-1.776 3.888-3.888 3.888zm8.912-2.176c.928 0 1.696-.672 1.696-1.712 0-1.008-.768-1.696-1.696-1.696-.912 0-1.68.688-1.68 1.696 0 1.04.768 1.712 1.68 1.712zm0 2.176c-2.112 0-3.872-1.536-3.872-3.888s1.76-3.872 3.872-3.872S114 5.424 114 7.776s-1.776 3.888-3.888 3.888zm13.744-5.6c-.704 0-1.28.432-1.28 1.52v3.952h-2.224V7.504c-.016-.944-.592-1.44-1.232-1.44-.672 0-1.296.384-1.296 1.52v3.952H115.6V4.064h2.224v1.088c.352-.784 1.152-1.232 1.952-1.232 1.184 0 1.984.448 2.4 1.312.72-1.168 1.712-1.328 2.24-1.328 1.776 0 2.88 1.136 2.88 3.392v4.24h-2.208V7.552c0-.976-.576-1.488-1.232-1.488z',\n    width: '128',\n    height: '16',\n  },\n}\n/* tslint:enable:max-line-length */\n\nconst renderTextAndLogo = (id: string, type: LargeButtonType) => {\n  const textAndLogo = document.createElement('span')\n  textAndLogo.id = `${id}-text-and-logo`\n  textAndLogo.appendChild(renderBloomLogo(id))\n\n  const text = texts[type]\n\n  textAndLogo.appendChild(renderText(id, text.d, text.width, text.height))\n\n  return textAndLogo\n}\n\nexport const renderLargeRequestButton = (id: string, anchor: HTMLAnchorElement, type: LargeButtonType) => {\n  anchor.appendChild(renderStyle(id, type))\n  anchor.appendChild(renderLockIcon(id))\n  anchor.appendChild(renderTextAndLogo(id, type))\n}\n","import {appendQuery} from './append'\nimport {renderSmallRequestButton} from './buttons/renderSmallRequestButton'\nimport {renderMediumRequestButton} from './buttons/renderMediumRequestButton'\nimport {renderLargeRequestButton} from './buttons/renderLargeRequestButton'\nimport {RequestData, RequestElementResult, ButtonOptions} from '../types'\n\nconst getLink = (requestData: RequestData, callbackUrl: string) => {\n  requestData.url = appendQuery(requestData.url, {'share-kit-from': 'button'})\n\n  return `https://bloom.co/download?request=${window.btoa(JSON.stringify(requestData))}&callback-url=${encodeURIComponent(callbackUrl)}`\n}\n\nconst render = (id: string, anchor: HTMLAnchorElement, config: {requestData: RequestData; buttonOptions: ButtonOptions}) => {\n  anchor.href = getLink(config.requestData, config.buttonOptions.callbackUrl)\n\n  // Clear all children\n  while (anchor.lastChild) {\n    anchor.removeChild(anchor.lastChild)\n  }\n\n  const buttonOptions = config.buttonOptions\n\n  if (buttonOptions.size === 'sm') {\n    renderSmallRequestButton(id, anchor, buttonOptions.type, buttonOptions.invert)\n  } else if (buttonOptions.size === 'md') {\n    renderMediumRequestButton(id, anchor, buttonOptions.type || 'verify')\n  } else {\n    renderLargeRequestButton(id, anchor, buttonOptions.type || 'verify')\n  }\n}\n\nconst generateId = () => {\n  const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'\n\n  let rand = ''\n  for (let i = 0; i < 4; i++) {\n    rand += possible.charAt(Math.floor(Math.random() * possible.length))\n  }\n\n  return `bloom-request-element-${rand}`\n}\n\nexport const renderRequestButton = (config: {\n  container: HTMLElement\n  requestData: RequestData\n  buttonOptions: ButtonOptions\n  id?: string\n}): RequestElementResult => {\n  const id = config.id || generateId()\n  const anchor = document.createElement('a')\n  config.container.appendChild(anchor)\n\n  anchor.id = id\n  anchor.target = '_blank'\n  anchor.rel = 'norefferer noopener'\n\n  render(id, anchor, config)\n\n  return {\n    update: updateConfig => {\n      render(id, anchor, updateConfig)\n    },\n    remove: () => {\n      anchor.remove()\n    },\n  }\n}\n","import {drawQRCode, Options} from '@bloomprotocol/qr'\n\nimport {appendQuery} from './append'\nimport {RequestData, RequestElementResult} from '../types'\n\n// Slightly modified from: https://hackernoon.com/copying-text-to-clipboard-with-javascript-df4d4988697f\nconst copyDataToClipboard = (requestData: RequestData) => {\n  const selection = document.getSelection()\n  const selected = !selection ? false : selection.rangeCount > 0 ? selection.getRangeAt(0) : false\n\n  const textarea = document.createElement('textarea')\n  textarea.value = `'${JSON.stringify(requestData)}'`\n  textarea.setAttribute('readonly', '')\n  textarea.style.position = 'absolute'\n  textarea.style.left = '-9999px'\n\n  document.body.appendChild(textarea)\n  textarea.select()\n  document.execCommand('copy')\n  document.body.removeChild(textarea)\n\n  if (selected && selection) {\n    selection.removeAllRanges()\n    selection.addRange(selected)\n  }\n}\n\nexport const renderRequestQRCode = (config: {\n  container: HTMLElement\n  requestData: RequestData\n  qrOptions?: Partial<Options>\n}): RequestElementResult => {\n  const canvas = document.createElement('canvas')\n  config.container.append(canvas)\n\n  config.requestData.url = appendQuery(config.requestData.url, {'share-kit-from': 'qr'})\n  canvas.onclick = () => copyDataToClipboard(config.requestData)\n\n  const {update, remove} = drawQRCode(canvas, {data: config.requestData, options: config.qrOptions})\n\n  return {\n    update: updateConfig => {\n      updateConfig.requestData.url = appendQuery(updateConfig.requestData.url, {'share-kit-from': 'qr'})\n      canvas.onclick = () => copyDataToClipboard(updateConfig.requestData)\n\n      update({data: updateConfig.requestData, options: updateConfig.qrOptions})\n    },\n    remove,\n  }\n}\n","import {Options as QROptions} from '@bloomprotocol/qr'\nimport Bowser from 'bowser'\n\nimport {ButtonOptions, RequestData, ShouldRenderButton, RequestElementResult} from './types'\nimport {renderRequestButton} from './elements/renderRequestButton'\nimport {renderRequestQRCode} from './elements/renderRequestQRCode'\n\nconst renderRequestElement = (config: {\n  container: HTMLElement\n  requestData: RequestData\n  qrOptions?: Partial<QROptions>\n  shouldRenderButton?: ShouldRenderButton\n  buttonOptions: ButtonOptions\n}): RequestElementResult => {\n  if (config.shouldRenderButton === undefined) {\n    config.shouldRenderButton = parsedResult => {\n      const isSupportedPlatform = parsedResult.platform.type === 'mobile' || parsedResult.platform.type === 'tablet'\n      const isSupportedOS = parsedResult.os.name === 'iOS' || parsedResult.os.name === 'Android'\n\n      return isSupportedPlatform && isSupportedOS\n    }\n  }\n\n  const shouldRenderButton = config.shouldRenderButton(Bowser.parse(window.navigator.userAgent))\n\n  if (shouldRenderButton) {\n    return renderRequestButton(config)\n  } else {\n    return renderRequestQRCode(config)\n  }\n}\n\nexport {renderRequestElement}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"title\", null, \"Bloom\");\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#6067f1\"\n}, React.createElement(\"path\", {\n  d: \"M62.44,90.9a5.38,5.38,0,0,1-10.76,0s-.2-1,.84-3.23A13.12,13.12,0,0,1,57,82.21a14.29,14.29,0,0,1,4.68,5.46,6.61,6.61,0,0,1,.77,3.23Z\",\n  transform: \"translate(-40.01 -82.21)\"\n}), React.createElement(\"path\", {\n  d: \"M62.44,109.1a5.38,5.38,0,0,0-10.76,0s-.2,1,.84,3.23A13.12,13.12,0,0,0,57,117.79a14.29,14.29,0,0,0,4.68-5.46,6.61,6.61,0,0,0,.77-3.23Z\",\n  transform: \"translate(-40.01 -82.21)\"\n}), React.createElement(\"path\", {\n  d: \"M65.18,94.63a5.39,5.39,0,0,0,0,10.77s1,.19,3.23-.84a13.13,13.13,0,0,0,5.45-4.47,14.21,14.21,0,0,0-5.45-4.68,6.56,6.56,0,0,0-3.23-.78Z\",\n  transform: \"translate(-40.01 -82.21)\"\n}), React.createElement(\"path\", {\n  d: \"M48.7,94.58a5.38,5.38,0,0,1,0,10.76s-1,.2-3.23-.84A13.21,13.21,0,0,1,40,100a14.29,14.29,0,0,1,5.46-4.68,6.59,6.59,0,0,1,3.23-.77Z\",\n  transform: \"translate(-40.01 -82.21)\"\n}), React.createElement(\"path\", {\n  d: \"M95.81,94.34A4.15,4.15,0,0,1,93,98.27a5.09,5.09,0,0,1,4,4.78,6.33,6.33,0,0,1-6.7,6.42h-9v-21H89.6C93.38,88.49,95.81,90.74,95.81,94.34ZM85.67,96.77h3.5a2,2,0,0,0,2-2.16,1.92,1.92,0,0,0-2-2.19H85.67Zm4.2,3.69h-4.2v5.09H90A2.38,2.38,0,0,0,92.22,103,2.36,2.36,0,0,0,89.87,100.46ZM99,87.51v22h4.24v-22Zm13.55,18.07a3.25,3.25,0,1,0-3.2-3.26A3.15,3.15,0,0,0,112.52,105.58Zm0,4.14a7.39,7.39,0,1,1,7.4-7.4A7.18,7.18,0,0,1,112.52,109.72Zm15.86-4.14a3.25,3.25,0,1,0-3.2-3.26A3.14,3.14,0,0,0,128.38,105.58Zm0,4.14a7.39,7.39,0,1,1,7.4-7.4A7.18,7.18,0,0,1,128.38,109.72Zm25.06-10.66c1.25,0,2.35,1,2.35,2.83v7.58H160V101.4c0-4.29-2.1-6.45-5.48-6.45a4.87,4.87,0,0,0-4.27,2.52c-.79-1.64-2.31-2.49-4.57-2.49A4.06,4.06,0,0,0,142,97.32V95.25h-4.24v14.22H142V102c0-2.16,1.18-2.89,2.46-2.89s2.32.94,2.35,2.74v7.67H151V102C151,99.88,152.1,99.06,153.44,99.06Z\",\n  transform: \"translate(-40.01 -82.21)\"\n}));\n\nvar SvgLogo = function SvgLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 119.98 35.57\",\n    height: 28,\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? React.createElement(\"title\", null, title) : null, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/logo.21b8a6b7.svg\";\nexport { ForwardRef as ReactComponent };","type Callback = (data: any) => void\n\ntype SocketHandlers = {\n  [type: string]: Callback[]\n}\n\nconst host = (() => {\n  const isLocal = window.location.hostname === 'localhost'\n  const protocol = isLocal ? 'ws' : 'wss'\n  const port = isLocal ? '3001' : '443'\n\n  return `${protocol}://${window.location.hostname}:${port}/websocket`\n})()\n\nlet socket: WebSocket\n\nconst socketHandlers: SocketHandlers = {}\n\nconst resetSocketConnection = () => {\n  socket = new WebSocket(host)\n\n  socket.onmessage = (e: MessageEvent) => {\n    try {\n      const decoded = JSON.parse(e.data)\n      if (decoded instanceof Array) {\n        const callbacks = socketHandlers[decoded[0]]\n        if (callbacks) callbacks.forEach(callback => callback(JSON.parse(decoded[1])))\n      }\n    } catch (e) {\n      console.log('Error in websocket callback', e)\n    }\n  }\n\n  socket.onclose = (e: CloseEvent) => {\n    return\n  }\n}\n\nresetSocketConnection()\n\nsetInterval(() => {\n  console.log('Socket state:', socket && socket.readyState)\n}, 30000)\n\nsetInterval(() => {\n  if (!socket || socket.readyState !== 1) {\n    if (socket) {\n      socket.close()\n    }\n    resetSocketConnection()\n  }\n}, 3000)\n\nconst socketOn = (type: string, callback: Callback) => {\n  if (typeof socketHandlers[type] === 'undefined') {\n    socketHandlers[type] = []\n  }\n\n  socketHandlers[type].push(callback)\n}\n\nconst socketOff = (type: string, callback?: Callback) => {\n  if (typeof socketHandlers[type] === 'undefined') return\n  if (socketHandlers[type].length <= 0) return\n\n  if (!callback) {\n    socketHandlers[type].length = 0\n  } else {\n    const index = socketHandlers[type].indexOf(callback)\n\n    if (index >= 0) {\n      socketHandlers[type].splice(index, 1)\n    }\n  }\n}\n\nexport {socketOn, socketOff, resetSocketConnection}\n","export const sitemap = {\n  home: '/',\n  claim: (id: string) => `/claim/${id}`,\n  share: (id: string) => `/share/${id}`,\n  issue: '/issue',\n  request: '/request',\n}\n","import React, {useState} from 'react'\nimport {FC} from 'react-forward-props'\nimport {Link, NavLink} from 'react-router-dom'\nimport clsx from 'clsx'\n\nimport {ReactComponent as Logo} from './logo.svg'\nimport {useDocumentTitle} from '../../utils/hooks'\nimport {sitemap} from '../../sitemap'\n\nimport './index.scss'\n\nconst useDocumentTitleSuffix = (titleSuffix?: string) => {\n  useDocumentTitle(titleSuffix ? `Attestation Playground - ${titleSuffix}` : 'Attestation Playground')\n}\n\ntype ShellProps = {\n  titleSuffix?: string\n}\n\nexport const Shell: FC<'div', ShellProps> = props => {\n  useDocumentTitleSuffix(props.titleSuffix)\n  const [isOpen, setIsOpen] = useState(false)\n\n  return (\n    <div className=\"shell\">\n      <nav className=\"navbar has-shadow is-spaced\">\n        <div className=\"container\">\n          <div className=\"navbar-brand\">\n            <Link to={sitemap.home} className=\"navbar-item\">\n              <Logo />\n            </Link>\n            <div className={clsx('navbar-burger', 'burger', {'is-active': isOpen})} onClick={() => setIsOpen(!isOpen)}>\n              <span></span>\n              <span></span>\n              <span></span>\n            </div>\n          </div>\n          <div className={clsx('navbar-menu', {'is-active': isOpen})}>\n            <NavLink to={sitemap.issue} className=\"navbar-item\" activeClassName=\"is-active\">\n              Issue Credential\n            </NavLink>\n            <NavLink to={sitemap.request} className=\"navbar-item\" activeClassName=\"is-active\">\n              Request Credentials\n            </NavLink>\n          </div>\n        </div>\n      </nav>\n      <main className=\"shell__main\">\n        <div className=\"container\">\n          <div className=\"shell__body\">{props.children}</div>\n        </div>\n      </main>\n    </div>\n  )\n}\n\ntype AdminShellProps = {\n  titleSuffix?: string\n}\n","import {useEffect} from 'react'\n\nimport {socketOn, socketOff, resetSocketConnection} from './socket'\n\nexport const useDocumentTitle = (title: string) => {\n  useEffect(() => {\n    const prevTitle = document.title\n    document.title = title\n\n    return () => {\n      document.title = prevTitle\n    }\n  }, [title])\n}\n\nexport const useSocket = (type: string, callback: (data: any) => void, condition?: boolean) => {\n  useEffect(() => {\n    if (condition === false) return\n\n    socketOn(type, callback)\n\n    return () => {\n      socketOff(type, callback)\n    }\n  }, [type, callback, condition])\n}\n\nexport const useResetSocketConnection = () => {\n  useEffect(() => {\n    resetSocketConnection()\n  }, [])\n}\n","import React from 'react'\nimport clsx from 'clsx'\nimport {FC} from 'react-forward-props'\n\nimport './index.scss'\n\ntype BouncingDotsProps = {}\n\nconst BouncingDots: FC<'div', BouncingDotsProps> = props => (\n  <div {...props} className={clsx('loading--bouncing-dots', props.className)}>\n    <svg className=\"loading--bouncing-dots__content\" width=\"60\" height=\"20\" viewBox=\"0 0 60 20\" xmlns=\"http://www.w3.org/2000/svg\">\n      <circle className=\"loading--bouncing-dots__item\" cx=\"7\" cy=\"15\" r=\"4\" />\n      <circle className=\"loading--bouncing-dots__item\" cx=\"30\" cy=\"15\" r=\"4\" />\n      <circle className=\"loading--bouncing-dots__item\" cx=\"53\" cy=\"15\" r=\"4\" />\n    </svg>\n  </div>\n)\n\nexport {BouncingDots}\n","import React from 'react'\nimport {FC} from 'react-forward-props'\nimport clsx from 'clsx'\n\ntype CardProps = {}\n\nconst Card: FC<'div', CardProps> = props => {\n  return (\n    <div {...props} className={clsx('card', props.className)}>\n      {props.children}\n    </div>\n  )\n}\n\ntype CardHeaderProps = {}\n\nconst CardHeader: FC<'div', CardHeaderProps> = props => {\n  return (\n    <div {...props} className={clsx('card-header', props.className)}>\n      {props.children}\n    </div>\n  )\n}\n\ntype CardHeaderTitleProps = {\n  as?: React.ComponentType\n}\n\nconst CardHeaderTitle: FC<'div', CardHeaderTitleProps> = props => {\n  const As = props.as || 'div'\n\n  return (\n    <As {...props} className={clsx('card-header-title', props.className)}>\n      {props.children}\n    </As>\n  )\n}\n\ntype CardHeaderIconProps = {\n  as?: React.ComponentType\n}\n\nconst CardHeaderIcon: FC<'div', CardHeaderIconProps> = props => {\n  const As = props.as || 'div'\n\n  return (\n    <As {...props} className={clsx('card-header-icon', props.className)}>\n      {props.children}\n    </As>\n  )\n}\n\ntype CardContentProps = {}\n\nconst CardContent: FC<'div', CardContentProps> = props => {\n  return (\n    <div {...props} className={clsx('card-content', props.className)}>\n      {props.children}\n    </div>\n  )\n}\n\ntype CardFooterProps = {}\n\nconst CardFooter: FC<'footer', CardFooterProps> = props => {\n  return (\n    <footer {...props} className={clsx('card-footer', props.className)}>\n      {props.children}\n    </footer>\n  )\n}\n\ntype CardFooterItemProps = {\n  as?: React.ComponentType\n}\n\nconst CardFooterItem: FC<'div', CardFooterItemProps> = props => {\n  const As = props.as || 'div'\n\n  return (\n    <As {...props} className={clsx('card-footer-item', props.className)}>\n      {props.children}\n    </As>\n  )\n}\n\nexport {Card, CardHeader, CardHeaderTitle, CardHeaderIcon, CardContent, CardFooter, CardFooterItem}\n","import React from 'react'\nimport {FC, forwardProps} from 'react-forward-props'\nimport clsx from 'clsx'\n\ntype TMessageSkins = 'default' | 'dark' | 'primary' | 'link' | 'info' | 'success' | 'warning' | 'danger'\n\ntype TMessageSkinConfig = {\n  className: string\n}\n\nconst MessageSkin: {[K in TMessageSkins]: TMessageSkinConfig} = {\n  default: {className: ''},\n  dark: {className: 'is-dark'},\n  primary: {className: 'is-primary'},\n  link: {className: 'is-link'},\n  info: {className: 'is-info'},\n  success: {className: 'is-success'},\n  warning: {className: 'is-warning'},\n  danger: {className: 'is-danger'},\n}\n\ntype MessageProps = {\n  skin?: TMessageSkinConfig\n}\n\nconst Message: FC<'article', MessageProps> = _props => {\n  const props = {skin: MessageSkin.default, ..._props}\n\n  return (\n    <article {...forwardProps(props, 'skin')} className={clsx('message', props.skin.className, props.className)}>\n      {props.children}\n    </article>\n  )\n}\n\ntype MessageHeaderProps = {}\n\nconst MessageHeader: FC<'div', MessageHeaderProps> = props => (\n  <div {...props} className={clsx('message-header', props.className)}>\n    {props.children}\n  </div>\n)\n\ntype MessageBodyProps = {}\n\nconst MessageBody: FC<'div', MessageBodyProps> = props => (\n  <div {...props} className={clsx('message-body', props.className)}>\n    {props.children}\n  </div>\n)\n\nexport {Message, MessageSkin, MessageHeader, MessageBody}\n","import wretch, {ResponseChain} from 'wretch'\n\nconst api = async () => {\n  return wretch().headers({\n    credentials: 'same-origin',\n    'Content-Type': 'application/json',\n  })\n}\n\nconst generic = async <T>(method: 'get' | 'delete' | 'post' | 'put' | 'patch', endpoint: string, body: {[k: string]: any} = {}) => {\n  const controller = new AbortController()\n  const wretcher = (await api()).signal(controller).url(endpoint)\n  let resp: ResponseChain\n\n  switch (method) {\n    case 'get':\n    case 'delete':\n      resp = wretcher[method]()\n      break\n    case 'post':\n    case 'put':\n    case 'patch':\n      resp = wretcher[method](body)\n      break\n    default:\n      throw Error(`Unsupported method: ${method}`)\n  }\n\n  // This makes the fetch request cancelable by calling .cancel()\n  const promise = resp.json<T>()\n  ;(promise as any)['cancel'] = controller.abort\n\n  return promise\n}\n\nexport const post = async <T>(endpoint: string, body: {[k: string]: any} = {}) => generic<T>('post', endpoint, body)\n\nexport const get = async <T>(endpoint: string) => generic<T>('get', endpoint)\n\nexport const del = async <T>(endpoint: string) => generic<T>('delete', endpoint)\n\nexport const put = async <T>(endpoint: string, body: {[k: string]: any} = {}) => generic<T>('put', endpoint, body)\n\nexport const patch = async <T>(endpoint: string, body: {[k: string]: any} = {}) => generic<T>('patch', endpoint, body)\n","import * as http from './http'\nimport {AtomicVCV1} from '@bloomprotocol/attestations-common'\n\nexport const create = ({type, data}: {type: string; data: {}}) => http.post<{id: string}>('/api/v1/cred/create', {type, data})\n\nexport const getConfig = ({id}: {id: string}) => http.get<{claimVersion: 'v1'}>(`/api/v1/cred/${id}/get-config`)\n\nexport const getClaimedVC = ({id}: {id: string}) => http.get<{vc: AtomicVCV1}>(`/api/v1/cred/${id}/get-claimed-vc`)\n","import * as http from './http'\n\nexport const create = ({types, responseVersion}: {types: string[]; responseVersion: string}) =>\n  http.post<{id: string}>('/api/v1/share/create', {types, responseVersion})\n\nexport const getConfig = ({id}: {id: string}) => http.get<{types: string[]; responseVersion: 'v0' | 'v1'}>(`/api/v1/share/${id}/get-config`)\n\nexport const getSharedData = ({id}: {id: string}) => http.get<{verifiableCredential: []}>(`/api/v1/share/${id}/get-shared-data`)\n","import * as cred from './cred'\nimport * as share from './share'\n\nexport const api = {cred, share}\n","import React from 'react'\nimport {FC, forwardProps} from 'react-forward-props'\nimport clsx from 'clsx'\n\ntype TButtonSkins =\n  | 'default'\n  | 'white'\n  | 'light'\n  | 'dark'\n  | 'black'\n  | 'text'\n  | 'primary'\n  | 'link'\n  | 'info'\n  | 'success'\n  | 'warning'\n  | 'danger'\n\ntype TButtonSkinConfig = {\n  className: string\n}\n\nexport const ButtonSkin: {[K in TButtonSkins]: TButtonSkinConfig} = {\n  default: {className: ''},\n  white: {className: 'is-white'},\n  light: {className: 'is-light'},\n  dark: {className: 'is-dark'},\n  black: {className: 'is-black'},\n  text: {className: 'is-text'},\n  primary: {className: 'is-primary'},\n  link: {className: 'is-link'},\n  info: {className: 'is-info'},\n  success: {className: 'is-success'},\n  warning: {className: 'is-warning'},\n  danger: {className: 'is-danger'},\n}\n\ntype TButtonSizes = 'small' | 'default' | 'normal' | 'medium' | 'large'\n\ntype TButtonSizeConfig = {\n  className: string\n}\n\nexport const ButtonSize: {[K in TButtonSizes]: TButtonSizeConfig} = {\n  default: {className: ''},\n  small: {className: 'is-small'},\n  normal: {className: 'is-normal'},\n  medium: {className: 'is-medium'},\n  large: {className: 'is-large'},\n}\n\ntype ButtonProps = {\n  skin?: TButtonSkinConfig\n  size?: TButtonSizeConfig\n  isLight?: boolean\n  isFullwidth?: boolean\n  isOutlined?: boolean\n  isInverted?: boolean\n  isRounded?: boolean\n  isHovered?: boolean\n  isFocused?: boolean\n  isActive?: boolean\n  isLoading?: boolean\n  isStatic?: boolean\n  isDisabled?: boolean\n}\n\nexport const Button: FC<'button', ButtonProps> = _props => {\n  const props = {skin: ButtonSkin.default, size: ButtonSkin.default, ..._props}\n\n  return (\n    <button\n      {...forwardProps(\n        props,\n        'skin',\n        'size',\n        'isLight',\n        'isFullwidth',\n        'isOutlined',\n        'isInverted',\n        'isRounded',\n        'isHovered',\n        'isFocused',\n        'isActive',\n        'isLoading',\n        'isStatic',\n        'isDisabled',\n      )}\n      className={clsx(\n        'button',\n        props.skin.className,\n        props.size.className,\n        {\n          'is-light': props.isLight,\n          'is-fullwidth': props.isFullwidth,\n          'is-outlined': props.isOutlined,\n          'is-inverted': props.isInverted,\n          'is-rounded': props.isRounded,\n          'is-hovered': props.isHovered,\n          'is-focused': props.isFocused,\n          'is-active': props.isActive,\n          'is-loading': props.isLoading,\n          'is-static': props.isStatic,\n        },\n        props.className,\n      )}\n      disabled={props.isDisabled}\n    >\n      {props.children}\n    </button>\n  )\n}\n","import React from 'react'\nimport {FC, forwardProps} from 'react-forward-props'\nimport clsx from 'clsx'\n\ntype TDeleteSizes = 'small' | 'default' | 'medium' | 'large'\n\ntype TDeleteSizeConfig = {\n  className: string\n}\n\nexport const DeleteSize: {[K in TDeleteSizes]: TDeleteSizeConfig} = {\n  default: {className: ''},\n  small: {className: 'is-small'},\n  medium: {className: 'is-medium'},\n  large: {className: 'is-large'},\n}\n\ntype DeleteProps = {\n  size?: TDeleteSizeConfig\n}\n\nexport const Delete: FC<'button', DeleteProps> = _props => {\n  const props = {size: DeleteSize.default, ..._props}\n\n  return (\n    <button {...forwardProps(props, 'size')} className={clsx('delete', props.size.className, props.className)}>\n      {props.children}\n    </button>\n  )\n}\n","import React, {useMemo} from 'react'\nimport {JsonEditor as JsonEditorBase} from 'jsoneditor-react'\nimport {FC} from 'react-forward-props'\nimport Ajv from 'ajv'\nimport ace from 'brace'\nimport 'brace/mode/json'\n\nimport 'jsoneditor-react/es/editor.min.css'\n\ntype JsonEditorProps = {\n  value: {} | null\n  onChange?: (value: any | null) => void\n  mode: 'tree' | 'code'\n  schema?: any\n}\n\nexport const JsonEditor: FC<'div', JsonEditorProps> = props => {\n  const ajv = useMemo(() => {\n    return new Ajv({allErrors: true, verbose: true})\n  }, [])\n\n  return <JsonEditorBase ace={ace} ajv={ajv} value={props.value} onChange={props.onChange} mode={props.mode} schema={props.schema} />\n}\n","import React, {useState, useEffect} from 'react'\nimport bowser from 'bowser'\nimport {useParams, Redirect} from 'react-router-dom'\nimport {isUuid} from 'uuidv4'\nimport {ClaimElement} from '@bloomprotocol/claim-kit-react'\nimport clsx from 'clsx'\nimport {AtomicVCV1} from '@bloomprotocol/attestations-common'\n\nimport {Shell} from '../../components/Shell'\nimport {sitemap} from '../../sitemap'\nimport {BouncingDots} from '../../components/BouncingDots'\nimport {Card, CardContent} from '../../components/Card'\nimport {Message, MessageHeader, MessageBody, MessageSkin} from '../../components/Message'\nimport {useCredGetConfig} from '../../query/cred'\nimport {resetSocketConnection, socketOn, socketOff} from '../../utils/socket'\nimport {api} from '../../api'\nimport {useLocalClient} from '../../components/LocalClientProvider'\nimport {Button} from '../../components/Button'\nimport {Delete} from '../../components/Delete'\nimport {JsonEditor} from '../../components/JsonEditor'\n\nimport './index.scss'\n\nconst useGetClaimedTypes = (ready: boolean) => {\n  const [claimedVC, setClaimedVC] = useState<AtomicVCV1 | null | undefined>()\n\n  useEffect(() => {\n    let current = true\n\n    const get = async () => {\n      const token = new URLSearchParams(window.location.search).get('token')\n\n      if (token) {\n        try {\n          const {vc} = await api.cred.getClaimedVC({id: token})\n          if (current) setClaimedVC(vc)\n        } catch {\n          if (current) setClaimedVC(null)\n        }\n      }\n    }\n\n    void get()\n\n    return () => {\n      current = false\n    }\n  }, [])\n\n  useEffect(() => {\n    const socketCallback = (vc: any) => setClaimedVC(vc)\n\n    if (ready) {\n      resetSocketConnection()\n      socketOn('notif/cred-claimed', socketCallback)\n    }\n\n    return () => {\n      socketOff('notif/cred-claimed', socketCallback)\n    }\n  }, [ready])\n\n  return claimedVC\n}\n\ntype ClaimProps = {}\n\nexport const Claim: React.FC<ClaimProps> = props => {\n  const isMobile = bowser.parse(window.navigator.userAgent).platform.type === 'mobile'\n  const {id: token} = useParams<{id: string}>()\n  const {data, error} = useCredGetConfig({id: token})\n  const claimedVC = useGetClaimedTypes(data !== null)\n  const {claimVC} = useLocalClient()\n  const [errorMessage, setErrorMessage] = useState<string>()\n\n  if (!isUuid(token)) return <Redirect to=\"/not-found\" />\n\n  const host = process.env.REACT_APP_SERVER_URL || `${window.location.protocol}//${window.location.host}`\n\n  let children: React.ReactNode\n\n  if (claimedVC) {\n    children = (\n      <Message skin={MessageSkin.success}>\n        <MessageHeader>\n          <p>Successfully Claimed Credential</p>\n        </MessageHeader>\n        <MessageBody>\n          <div className=\"claim__claimed-vc-container\">\n            <JsonEditor value={claimedVC} mode=\"tree\" />\n          </div>\n        </MessageBody>\n      </Message>\n    )\n  } else if (error) {\n    children = (\n      <Message skin={MessageSkin.warning}>\n        <MessageHeader>\n          <p>Could Not Fetch Request</p>\n        </MessageHeader>\n        <MessageBody>Please ensure that the URL is correct.</MessageBody>\n      </Message>\n    )\n  } else {\n    let cardContent: React.ReactNode\n    let localClientButton: React.ReactNode | undefined\n\n    if (data) {\n      const endpoint = `/api/v1/cred/${token}/claim-${data.claimVersion}`\n\n      cardContent = (\n        <ClaimElement\n          className=\"claim__qr-container\"\n          shouldRenderButton={isMobile}\n          claimData={{\n            version: 1,\n            token,\n            url: `${host}${endpoint}`,\n          }}\n          qrOptions={{size: 256}}\n          buttonOptions={{\n            callbackUrl: `${window.location.origin}${sitemap.claim(token)}?token=${token}`,\n          }}\n        />\n      )\n\n      localClientButton = (\n        <Button\n          isFullwidth\n          onClick={async () => {\n            const response = await claimVC(endpoint)\n\n            if (response.kind === 'error') {\n              setErrorMessage(response.message)\n            }\n          }}\n        >\n          Claim With Local Client\n        </Button>\n      )\n    } else {\n      cardContent = <BouncingDots />\n    }\n\n    children = (\n      <React.Fragment>\n        <Card>\n          <CardContent>\n            {cardContent}\n            {localClientButton && (\n              <React.Fragment>\n                <div className=\"is-divider\" data-content=\"OR\" />\n                {localClientButton}\n              </React.Fragment>\n            )}\n            {errorMessage && (\n              <Message className=\"claim__error-message\" skin={MessageSkin.danger}>\n                <MessageHeader>\n                  <p>Error while claiming the credential:</p>\n                  <Delete onClick={() => setErrorMessage(undefined)} aria-label=\"clear message\" />\n                </MessageHeader>\n                <MessageBody>{errorMessage}</MessageBody>\n              </Message>\n            )}\n          </CardContent>\n        </Card>\n      </React.Fragment>\n    )\n  }\n\n  const isNarrow = !data && !claimedVC\n\n  return (\n    <Shell titleSuffix=\"Claim\">\n      <h1 className=\"title is-1 has-text-weight-bold has-text-centered\">Claim Credential</h1>\n      <p className=\"subtitle has-text-centered\">Claim a credential with a {isMobile ? 'click of a button' : 'scan of a QR code'}.</p>\n      <div className=\"columns is-mobile is-centered\">\n        <div\n          className={clsx('column is-one-third-desktop is-half-tablet', {\n            'is-narrow': isNarrow,\n            'is-full': claimedVC,\n          })}\n          style={{width: isNarrow && !claimedVC ? 'auto' : undefined}}\n        >\n          {children}\n        </div>\n      </div>\n    </Shell>\n  )\n}\n","import {useQuery} from 'react-query'\n\nimport {api} from '../api'\nimport {WithVariables} from './query'\n\nexport const useCredGetConfig: WithVariables<{claimVersion: 'v1'}, {id: string}> = (variables, options) => {\n  return useQuery(variables && ['cred.getConfig', variables], api.cred.getConfig, options)\n}\n","import React from 'react'\n\nimport {Shell} from '../../components/Shell'\nimport {useLocalClient} from '../../components/LocalClientProvider'\nimport {Button} from '../../components/Button'\nimport {JsonEditor} from '../../components/JsonEditor'\n\nimport './index.scss'\nimport {Delete} from '../../components/Delete'\n\ntype HomeProps = {}\n\nexport const Home: React.FC<HomeProps> = props => {\n  const {wallet, vcs, regen, deleteVC} = useLocalClient()\n\n  return (\n    <Shell>\n      <h1 className=\"title is-1 has-text-weight-bold has-text-centered\">Attestations Playground</h1>\n      <p className=\"subtitle has-text-centered\">Welcome to the Bloom attestation playground!</p>\n      <div className=\"columns is-mobile is-centered\">\n        <div className=\"column is-half-tablet\">\n          <h3 className=\"title is-3\">Local Wallet:</h3>\n          <div className=\"has-text-info\">{wallet.getAddressString()}</div>\n          <Button className=\"home__regen-btn\" onClick={() => regen()}>\n            Regenerate Wallet\n          </Button>\n          <div className=\"is-divider\" />\n          <h3 className=\"title is-3\">Local Attestations:</h3>\n          {vcs.length > 0 ? (\n            <React.Fragment>\n              {vcs.map((vc, i) => (\n                <div className=\"columns home__vc\" key={i}>\n                  <div className=\"column is-narrow is-paddingless\">\n                    <Delete className=\"home__vc__delete-btn\" onClick={() => deleteVC(i)} aria-label=\"Delete VC\" />\n                  </div>\n                  <div className=\"column is-paddingless\">\n                    <JsonEditor value={vc} mode=\"tree\" />\n                  </div>\n                </div>\n              ))}\n            </React.Fragment>\n          ) : (\n            <div>You do not have any credentials stored</div>\n          )}\n        </div>\n      </div>\n    </Shell>\n  )\n}\n","import React, {useState} from 'react'\nimport {Link} from 'react-router-dom'\nimport {FC} from 'react-forward-props'\nimport {useId} from '@reach/auto-id'\nimport {codeBlock} from 'common-tags'\nimport S from 'fluent-schema'\nimport {SimpleThing} from '@bloomprotocol/attestations-common'\n\nimport {Shell} from '../../components/Shell'\nimport {Message, MessageSkin, MessageHeader, MessageBody} from '../../components/Message'\nimport {Delete} from '../../components/Delete'\nimport {sitemap} from '../../sitemap'\nimport {Button, ButtonSkin} from '../../components/Button'\nimport {Card, CardHeader, CardHeaderTitle, CardContent, CardFooter, CardFooterItem} from '../../components/Card'\nimport {api} from '../../api'\nimport {JsonEditor} from '../../components/JsonEditor'\n\nimport './index.scss'\n\ntype AtomicVCBuilderProps = {\n  type: string\n  data: {} | null\n  onTypeChange: (type: string) => void\n  onDataChange: (data: SimpleThing | null) => void\n}\n\nconst AtomicVCBuilder: FC<'div', AtomicVCBuilderProps> = props => {\n  const id = useId(props.id)\n\n  return (\n    <div>\n      <div className=\"field\">\n        <label htmlFor={`${id}-type`} className=\"label\">\n          Type\n        </label>\n        <div className=\"control\">\n          <input\n            required\n            value={props.type}\n            onChange={e => props.onTypeChange(e.target.value.trim())}\n            id={`${id}-type`}\n            className=\"input\"\n            type=\"text\"\n            placeholder=\"Type\"\n          />\n        </div>\n      </div>\n      <div className=\"field\">\n        <label htmlFor={`${id}-data`} className=\"label\">\n          Data\n        </label>\n        <div className=\"control\">\n          <JsonEditor\n            mode=\"code\"\n            id={`${id}-data`}\n            value={props.data}\n            onChange={props.onDataChange}\n            schema={S.object()\n              .prop('@type', S.string())\n              .required(['@type'])\n              .valueOf()}\n          />\n        </div>\n      </div>\n    </div>\n  )\n}\n\ntype IssueProps = {}\n\nexport const Issue: React.FC<IssueProps> = props => {\n  const [newCredId, setNewCredId] = useState<string>()\n  const [type, setType] = useState('')\n  const [data, setData] = useState<SimpleThing | null>({'@type': ''})\n\n  const isDisabled = type.trim() === '' || data === null\n\n  return (\n    <Shell titleSuffix=\"Issue\">\n      <h1 className=\"title is-1 has-text-weight-bold has-text-centered\">Issue Credential</h1>\n      <p className=\"subtitle has-text-centered\">Create claim nodes for a credential.</p>\n      {newCredId && (\n        <Message skin={MessageSkin.success}>\n          <MessageHeader>\n            <p>Request Successfully Created</p>\n            <Delete onClick={() => setNewCredId(undefined)} aria-label=\"clear message\" />\n          </MessageHeader>\n          <MessageBody>\n            To claim this credential navigate to <Link to={sitemap.claim(newCredId)}>{sitemap.claim(newCredId)}</Link>.\n          </MessageBody>\n        </Message>\n      )}\n      <div className=\"columns\">\n        <div className=\"column is-half\">\n          <Card>\n            <CardHeader>\n              <CardHeaderTitle>Configuration</CardHeaderTitle>\n            </CardHeader>\n            <CardContent>\n              <AtomicVCBuilder type={type} data={data} onTypeChange={setType} onDataChange={setData} />\n            </CardContent>\n          </Card>\n        </div>\n        <div className=\"column is-half\">\n          <Card>\n            <CardHeader>\n              <CardHeaderTitle>Atomic Verifiable Credential</CardHeaderTitle>\n            </CardHeader>\n            <CardContent>\n              <pre>\n                <code>\n                  {codeBlock`\n                    const credentialSubject = await buildAtomicVCSubectV1({\n                      data: ${JSON.stringify(data)},\n                      subject: 'did:ethr:0x...',\n                    })\n\n                    const atomicVC = await buildAtomicVCV1({\n                      type: ['${type}']\n                      data: ${JSON.stringify(data)},\n                      credentialSubject,\n                      issuanceDate: '...',\n                      expirationDate: '...',\n                      privateKey: Buffer.from('...', 'hex'),\n                    })\n                    `}\n                </code>\n              </pre>\n            </CardContent>\n            <CardFooter>\n              <CardFooterItem>\n                <Button\n                  isFullwidth\n                  skin={ButtonSkin.info}\n                  onClick={async () => {\n                    const {id} = await api.cred.create({type, data: data!})\n                    setNewCredId(id)\n                    setType('')\n                    setData({'@type': ''})\n                  }}\n                  isDisabled={isDisabled}\n                >\n                  Issue VC\n                </Button>\n              </CardFooterItem>\n            </CardFooter>\n          </Card>\n        </div>\n      </div>\n    </Shell>\n  )\n}\n","import React, {useState} from 'react'\nimport {AttestationTypeNames, AttestationTypes} from '@bloomprotocol/attestations-common'\nimport {stripIndent} from 'common-tags'\nimport {Link} from 'react-router-dom'\nimport {FC} from 'react-forward-props'\n\nimport {Shell} from '../../components/Shell'\nimport {api} from '../../api'\nimport {sitemap} from '../../sitemap'\nimport {Message, MessageHeader, MessageBody, MessageSkin} from '../../components/Message'\nimport {Card, CardContent, CardHeader, CardHeaderTitle} from '../../components/Card'\nimport {Button, ButtonSkin} from '../../components/Button'\nimport {Delete} from '../../components/Delete'\n\nimport './index.scss'\n\nconst getDisplayValueForType = (type: string) => {\n  const manifest = AttestationTypes[type as any]\n  return manifest ? `${AttestationTypes[type as any].nameFriendly} (${type})` : type\n}\n\ntype TypeConfigProps = {\n  type: string\n}\n\nconst TypeConfig: FC<'details', TypeConfigProps> = props => {\n  return (\n    <details className=\"request__type-config\">\n      <summary className=\"is-size-5 has-text-weight-bold\">{getDisplayValueForType(props.type)}</summary>\n      <div className=\"request__type-config__options\">\n        <div className=\"request__type-config__options__coming-soon\">\n          <div className=\"request__type-config__options__coming-soon__text is-size-3 has-text-centered\">Coming Soon</div>\n        </div>\n        <div className=\"columns\">\n          <div className=\"column\">\n            <div className=\"field\">\n              <div className=\"control\">\n                <label className=\"checkbox\">\n                  <input type=\"checkbox\" /> Optional\n                </label>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"columns\">\n          <div className=\"column\">\n            <div className=\"field\">\n              <label htmlFor={`${props.type}-completed-before`} className=\"label\">\n                Completed Before\n              </label>\n              <div className=\"control\">\n                <input id={`${props.type}-completed-before`} className=\"input\" type=\"text\" placeholder=\"Completed Before\" />\n              </div>\n            </div>\n          </div>\n          <div className=\"column\">\n            <div className=\"field\">\n              <label htmlFor={`${props.type}-completed-after`} className=\"label\">\n                Completed After\n              </label>\n              <div className=\"control\">\n                <input id={`${props.type}-completed-after`} className=\"input\" type=\"text\" placeholder=\"Completed After\" />\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"columns\">\n          <div className=\"column\">\n            <div className=\"field\">\n              <label htmlFor={`${props.type}-provider-whitelist`} className=\"label\">\n                Provider Whitelist\n              </label>\n              <div className=\"control\">\n                <input id={`${props.type}-provider-whitelist`} className=\"input\" type=\"text\" placeholder=\"Provider Whitelist\" />\n              </div>\n            </div>\n          </div>\n          <div className=\"column\">\n            <div className=\"field\">\n              <label htmlFor={`${props.type}-provider-blacklist`} className=\"label\">\n                Provider Blacklist\n              </label>\n              <div className=\"control\">\n                <input id={`${props.type}-provider-blacklist`} className=\"input\" type=\"text\" placeholder=\"Provider Blacklist\" />\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"columns\">\n          <div className=\"column\">\n            <div className=\"field\">\n              <label htmlFor={`${props.type}-attester-whitelist`} className=\"label\">\n                Provider Whitelist\n              </label>\n              <div className=\"control\">\n                <input id={`${props.type}-attester-whitelist`} className=\"input\" type=\"text\" placeholder=\"Attester Whitelist\" />\n              </div>\n            </div>\n          </div>\n          <div className=\"column\">\n            <div className=\"field\">\n              <label htmlFor={`${props.type}-attester-blacklist`} className=\"label\">\n                Provider Blacklist\n              </label>\n              <div className=\"control\">\n                <input id={`${props.type}-attester-blacklist`} className=\"input\" type=\"text\" placeholder=\"Attester Blacklist\" />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </details>\n  )\n}\n\ntype RequestProps = {}\n\nexport const Request: React.FC<RequestProps> = props => {\n  const [selectedTypes, setSelectedTypes] = useState<Set<string>>(new Set())\n  const [customTypes, setCustomTypes] = useState<Set<string>>(new Set())\n  const [newCustomType, setNewCustomType] = useState('')\n  const [responseVersion, setResponseVersion] = useState('v0')\n\n  const [newShareId, setNewShareId] = useState<string>()\n\n  const handleResponseVersionChange: React.ChangeEventHandler<HTMLInputElement> = e => {\n    switch (e.target.value) {\n      case 'v0':\n        setResponseVersion('v0')\n        break\n      case 'v1':\n        setResponseVersion('v1')\n        break\n      default:\n        throw new Error(`Unknown value: ${e.target.value}`)\n    }\n  }\n\n  const allRequestedTypes = [...Array.from(customTypes), ...Array.from(selectedTypes)]\n\n  return (\n    <Shell titleSuffix=\"Request\">\n      <h1 className=\"title is-1 has-text-weight-bold has-text-centered\">Request Credentials</h1>\n      <p className=\"subtitle has-text-centered\">Create a request for credentials, including Bloom provided and third party credentials.</p>\n      {newShareId && (\n        <Message skin={MessageSkin.success}>\n          <MessageHeader>\n            <p>Request Successfully Created</p>\n            <Delete onClick={() => setNewShareId(undefined)} aria-label=\"clear message\" />\n          </MessageHeader>\n          <MessageBody>\n            To share data for this request navigate to <Link to={sitemap.share(newShareId)}>{sitemap.share(newShareId)}</Link>.\n          </MessageBody>\n        </Message>\n      )}\n      <div>\n        <div className=\"title is-4\">Credential Types:</div>\n        <div className=\"columns\">\n          <div className=\"column\">\n            <Card>\n              <CardHeader>\n                <CardHeaderTitle>Types</CardHeaderTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"request__add-types\">\n                  <div className=\"request__custom-types\">\n                    <form\n                      onSubmit={e => {\n                        e.preventDefault()\n\n                        const newCustomTypes = new Set(customTypes)\n                        newCustomTypes.add(newCustomType)\n\n                        setCustomTypes(newCustomTypes)\n                        setNewCustomType('')\n                      }}\n                      className=\"request__custom-types__add-form\"\n                    >\n                      <div className=\"field has-addons\">\n                        <div className=\"control is-expanded\">\n                          <input\n                            value={newCustomType}\n                            onChange={e => setNewCustomType(e.target.value.trim())}\n                            className=\"input\"\n                            type=\"text\"\n                            placeholder=\"Custom Type\"\n                          />\n                        </div>\n                        <div className=\"control\">\n                          <Button>Add</Button>\n                        </div>\n                      </div>\n                    </form>\n                    <div>\n                      {Array.from(customTypes).map(customType => {\n                        return (\n                          <div className=\"request__custom-type\" key={customType}>\n                            <Delete\n                              className=\"request__custom-type__delete\"\n                              onClick={() => {\n                                const newCustomTypes = new Set(customTypes)\n                                newCustomTypes.delete(customType)\n\n                                setCustomTypes(newCustomTypes)\n                              }}\n                              aria-label=\"remove custom type\"\n                            />\n                            {customType}\n                          </div>\n                        )\n                      })}\n                    </div>\n                  </div>\n                  <div className=\"request__available-types\">\n                    {AttestationTypeNames.map(type => {\n                      return (\n                        <label key={type} className=\"request__type-checkbox checkbox\">\n                          <input\n                            checked={selectedTypes.has(type)}\n                            onChange={() => {\n                              const newSelectedTypes = new Set(selectedTypes)\n\n                              if (!newSelectedTypes.delete(type)) {\n                                newSelectedTypes.add(type)\n                              }\n\n                              setSelectedTypes(newSelectedTypes)\n                            }}\n                            type=\"checkbox\"\n                            name=\"attestation-type\"\n                          />\n                          {` ${getDisplayValueForType(type)}`}\n                        </label>\n                      )\n                    })}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n          <div className=\"column\">\n            <Card>\n              <CardHeader>\n                <CardHeaderTitle>Configuration</CardHeaderTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"request__type-configs\">\n                  {allRequestedTypes.map(type => (\n                    <TypeConfig key={type} type={type} />\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n        <div className=\"title is-4\">\n          Response Version: <span className=\"is-italic has-text-info\">(Coming Soon)</span>\n        </div>\n        <div className=\"field\">\n          <div className=\"control\">\n            <label className=\"radio\">\n              <input\n                checked={responseVersion === 'v0'}\n                type=\"radio\"\n                name=\"response-version\"\n                value=\"v0\"\n                onChange={handleResponseVersionChange}\n              />\n              {' V0'}\n            </label>\n            <label className=\"radio\">\n              <input\n                checked={responseVersion === 'v1'}\n                type=\"radio\"\n                name=\"response-version\"\n                value=\"v1\"\n                onChange={handleResponseVersionChange}\n              />\n              {' V1'}\n            </label>\n          </div>\n        </div>\n        <Button\n          isDisabled={allRequestedTypes.length === 0}\n          skin={ButtonSkin.link}\n          onClick={async () => {\n            const {id} = await api.share.create({types: allRequestedTypes, responseVersion})\n            setNewShareId(id)\n            setSelectedTypes(new Set())\n            setCustomTypes(new Set())\n          }}\n        >\n          Request\n        </Button>\n      </div>\n      <div className=\"request__output\">\n        <div className=\"title is-4\">Output:</div>\n        <pre>\n          <code>\n            {stripIndent`\n              const requestData: RequestData = {\n                action: Action.attestation,\n                token: '...',\n                url: '...',\n                org_name: 'Attestation Playground',\n                org_logo_url: 'https://bloom.co/images/notif/bloom-logo.png',\n                org_usage_policy_url: 'https://bloom.co/legal/terms',\n                org_privacy_policy_url: 'https://bloom.co/legal/privacy',\n                types: [${allRequestedTypes.map(type => `\"${type}\"`).join(', ')}]\n              }\n            `}\n          </code>\n        </pre>\n      </div>\n    </Shell>\n  )\n}\n","import React, {useState, useEffect} from 'react'\nimport {RequestElement, Action} from '@bloomprotocol/share-kit-react'\nimport {TAttestationTypeNames} from '@bloomprotocol/attestations-common'\nimport {useParams, Redirect} from 'react-router-dom'\nimport {isUuid} from 'uuidv4'\nimport bowser from 'bowser'\nimport clsx from 'clsx'\n\nimport {Shell} from '../../components/Shell'\nimport {useShareGetConfig} from '../../query/share'\nimport {BouncingDots} from '../../components/BouncingDots'\nimport {sitemap} from '../../sitemap'\nimport {api} from '../../api'\nimport {resetSocketConnection, socketOn, socketOff} from '../../utils/socket'\nimport {Message, MessageHeader, MessageBody, MessageSkin} from '../../components/Message'\nimport {Card, CardContent} from '../../components/Card'\nimport {Button} from '../../components/Button'\nimport {useLocalClient} from '../../components/LocalClientProvider'\nimport {Delete} from '../../components/Delete'\nimport {JsonEditor} from '../../components/JsonEditor'\n\nimport './index.scss'\n\nconst useGetSharedTypes = (ready: boolean) => {\n  const [sharedData, setSharedData] = useState<[] | null | undefined>()\n\n  useEffect(() => {\n    let current = true\n\n    const get = async () => {\n      const token = new URLSearchParams(window.location.search).get('token')\n\n      if (token) {\n        try {\n          const {verifiableCredential} = await api.share.getSharedData({id: token})\n          if (current) setSharedData(verifiableCredential)\n        } catch {\n          if (current) setSharedData(null)\n        }\n      }\n    }\n\n    void get()\n\n    return () => {\n      current = false\n    }\n  }, [])\n\n  useEffect(() => {\n    const socketCallback = async (verifiableCredential: any) => {\n      setSharedData(verifiableCredential)\n    }\n\n    if (ready) {\n      resetSocketConnection()\n      socketOn('notif/share-recieved', socketCallback)\n    }\n\n    return () => {\n      socketOff('notif/share-recieved', socketCallback)\n    }\n  }, [ready])\n\n  return sharedData\n}\n\ntype ShareProps = {}\n\nexport const Share: React.FC<ShareProps> = props => {\n  const isMobile = bowser.parse(window.navigator.userAgent).platform.type === 'mobile'\n  const {id: token} = useParams<{id: string}>()\n  const {data, error} = useShareGetConfig({id: token})\n  const sharedData = useGetSharedTypes(data !== null)\n  const {shareVCs} = useLocalClient()\n  const [errorMessage, setErrorMessage] = useState<string>()\n\n  if (!isUuid(token)) return <Redirect to=\"/not-found\" />\n\n  const host = process.env.REACT_APP_SERVER_URL || `${window.location.protocol}//${window.location.host}`\n\n  let children: React.ReactNode\n\n  if (sharedData) {\n    children = (\n      <Message skin={MessageSkin.success}>\n        <MessageHeader>\n          <p>Successfully Shared Credentials</p>\n        </MessageHeader>\n        <MessageBody>\n          <div className=\"share__shared-data-container\">\n            <JsonEditor value={sharedData} mode=\"tree\" />\n          </div>\n        </MessageBody>\n      </Message>\n    )\n  } else if (error) {\n    children = (\n      <Message skin={MessageSkin.warning}>\n        <MessageHeader>\n          <p>Could Not Fetch Request</p>\n        </MessageHeader>\n        <MessageBody>Please ensure that the URL is correct.</MessageBody>\n      </Message>\n    )\n  } else {\n    let cardContent: React.ReactNode\n    let localClientButton: React.ReactNode | undefined\n\n    if (data) {\n      const endpoint = `/api/v1/share/recieve-${data.responseVersion}`\n\n      cardContent = (\n        <RequestElement\n          className=\"share__qr-container\"\n          shouldRenderButton={() => isMobile}\n          requestData={{\n            action: Action.attestation,\n            token,\n            url: `${host}${endpoint}`,\n            org_name: 'Attestation Playground',\n            org_logo_url: 'https://bloom.co/images/notif/bloom-logo.png',\n            org_usage_policy_url: 'https://bloom.co/legal/terms',\n            org_privacy_policy_url: 'https://bloom.co/legal/privacy',\n            // TODO: make this not typed to our attestation names\n            types: data.types as TAttestationTypeNames[],\n          }}\n          qrOptions={{size: 256}}\n          buttonOptions={{\n            callbackUrl: `${window.location.origin}${sitemap.share(token)}?token=${token}`,\n          }}\n        />\n      )\n\n      if (data.responseVersion === 'v1') {\n        localClientButton = (\n          <Button\n            isFullwidth\n            onClick={async () => {\n              const response = await shareVCs(data.types, token, endpoint)\n\n              if (response.kind === 'error') {\n                setErrorMessage(response.message)\n              }\n            }}\n          >\n            Share From Local Client\n          </Button>\n        )\n      }\n    } else {\n      cardContent = <BouncingDots />\n    }\n\n    children = (\n      <React.Fragment>\n        <Card>\n          <CardContent>\n            {cardContent}\n            {localClientButton && (\n              <React.Fragment>\n                <div className=\"is-divider\" data-content=\"OR\" />\n                {localClientButton}\n              </React.Fragment>\n            )}\n            {errorMessage && (\n              <Message className=\"share__error-message\" skin={MessageSkin.danger}>\n                <MessageHeader>\n                  <p>Error while sharing credentials:</p>\n                  <Delete onClick={() => setErrorMessage(undefined)} aria-label=\"clear message\" />\n                </MessageHeader>\n                <MessageBody>{errorMessage}</MessageBody>\n              </Message>\n            )}\n          </CardContent>\n        </Card>\n      </React.Fragment>\n    )\n  }\n\n  const isNarrow = (!data || data.responseVersion === 'v0') && !sharedData\n\n  return (\n    <Shell titleSuffix=\"Share\">\n      <h1 className=\"title is-1 has-text-weight-bold has-text-centered\">Share Credentials</h1>\n      <p className=\"subtitle has-text-centered\">\n        Share requested credentials with a {isMobile ? 'click of a button' : 'scan of a QR code'}.\n      </p>\n      <div className=\"columns is-mobile is-centered\">\n        <div\n          className={clsx('column is-one-third-desktop is-half-tablet', {\n            'is-narrow': isNarrow,\n            'is-full': sharedData,\n          })}\n          style={{width: isNarrow && !sharedData ? 'auto' : undefined}}\n        >\n          {children}\n        </div>\n      </div>\n    </Shell>\n  )\n}\n","import {useQuery} from 'react-query'\n\nimport {api} from '../api'\nimport {WithVariables} from './query'\n\nexport const useShareGetConfig: WithVariables<{types: string[]; responseVersion: 'v0' | 'v1'}, {id: string}> = (variables, options) => {\n  return useQuery(variables && ['share.getConfig', variables], api.share.getConfig, options)\n}\n","import React from 'react'\nimport {BrowserRouter, Switch, Route} from 'react-router-dom'\n\nimport {Claim, Home, Issue, Request, Share} from './pages'\nimport {sitemap} from './sitemap'\n\nconst App: React.FC = () => (\n  <BrowserRouter>\n    <Switch>\n      <Route exact path={sitemap.home}>\n        <Home />\n      </Route>\n      <Route exact path={sitemap.issue}>\n        <Issue />\n      </Route>\n      <Route exact path={sitemap.request}>\n        <Request />\n      </Route>\n      <Route exact path={sitemap.claim(':id')}>\n        <Claim />\n      </Route>\n      <Route exact path={sitemap.share(':id')}>\n        <Share />\n      </Route>\n      <Route path=\"*\">Not Found</Route>\n    </Switch>\n  </BrowserRouter>\n)\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport {ReactQueryConfigProvider} from 'react-query'\n\nimport 'bulma/css/bulma.css'\nimport 'bulma-extensions/bulma-divider/dist/css/bulma-divider.min.css'\n\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\nimport {LocalClientProvider} from './components/LocalClientProvider'\n\nimport './index.css'\n\nReactDOM.render(\n  <LocalClientProvider>\n    <ReactQueryConfigProvider config={{refetchAllOnWindowFocus: false, retry: 0}}>\n      <App />\n    </ReactQueryConfigProvider>\n  </LocalClientProvider>,\n  document.getElementById('root'),\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}