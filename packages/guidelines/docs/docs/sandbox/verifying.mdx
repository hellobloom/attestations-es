---
id: verifying
title: Verifying | Sandbox
sidebar_label: Verifying
hide_title: true
---

import useBaseUrl from '@docusaurus/useBaseUrl'

# Verifying

These steps will show you how to use the verifier side of the sandbox.

## Create A Request

First you create a request for VCs, this includes:

- Choosing the types of VCs you want to be shared with you
- Setting the endpoint you want VCs shared to
- URLs to your privacy and terms policies
- And other display data like your name and logo

The last three are taken care of for you in the VC Sandbox.

### Steps

1. Go to [sandbox.bloom.co/request](https://sandbox.bloom.co/request)
2. Fill out the types you want shared
   <img src={useBaseUrl('img/sandbox/verifying/select-types.png')} alt="Select credential types" />
3. Select the reponse version you want back, this should be set to V1 if you plan to share from the local client
   <img src={useBaseUrl('img/sandbox/verifying/select-response.png')} alt="Select respone version" />
4. Click "Request", this will [create a request](https://github.com/hellobloom/vc/blob/vc-network-update/dev/sandbox/server/src/routes/share.ts#L21) accessible through with the link at the top of the page

## Sharing Credentials

After creating a request you can now share your credentials, in this part you are acting as an end user who is interacting with your app. This is as simple as scanning a QR code or clicking a button.

Steps:

1. Navigate to the link sent in response to the request creation
2. Click the button that says "Share From Local DID" if using the local client, otherwise use the Bloom app to scan the QR code
   <img src={useBaseUrl('img/sandbox/verifying/share.png')} alt="Share options" />
3. If you have the requested credentials stored you will see a success message, otherwise you will see a list of credentials you do not have stored
   <img src={useBaseUrl('img/sandbox/verifying/share-success.png')} alt="Successful credential share" />

### Tech Details

Let's talk about what's going on during a share of VCs.

1. The user's client [queries stored](https://github.com/hellobloom/vc/blob/vc-network-update/dev/sandbox/client/src/components/LocalClientProvider/index.tsx#L107) VCs based on the request
2. If the query is successful it [packages the VCs](https://github.com/hellobloom/vc/blob/vc-network-update/dev/sandbox/client/src/components/LocalClientProvider/index.tsx#L127) in a Verifiable Presentation
3. [Signs the VP](https://github.com/hellobloom/vc/blob/vc-network-update/dev/sandbox/client/src/components/LocalClientProvider/utils.ts#L58) with `jsonld-signatures`
4. [Sends the signed VP](https://github.com/hellobloom/vc/blob/vc-network-update/dev/sandbox/client/src/components/LocalClientProvider/index.tsx#L139) to the data requester

## Verifying Credentials

:::important Important
The endpoint that recieves the VCs needs to be a public endpoint since users will be sharing directly from their mobile app.
:::

### Steps

1. API endpoint recieves the shared VCs wrapped in a VP
2. Pass the VP to `validateVerifiablePresentationResponse` from Verify Kit
3. Check the outcome of the validation
4. Update client with result

### Tech Details

Let's dive into what's happening during validation of a shared VP

1. First the structure of the JSON is checked to make sure all the keys are present and of the correct types
2. Once that is out of the way the signatures are validated.
   i. The signature of the VP is checked against the holder's key and the VCs are checked against each respective issuer's key
3. (_COMING SOON_) VCs are checked for any revocation
4. The result of the validation is returned
